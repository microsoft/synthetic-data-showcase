{"version":3,"file":"index.5f95b336.js","sources":["../../src/pages/Select/AggregateStatistics/AggregateStatistics.hooks.ts","../../src/pages/Select/AggregateStatistics/AggregateStatistics.styles.ts","../../src/pages/Select/AggregateStatistics/ContributionChart.styles.ts","../../src/pages/Select/AggregateStatistics/ContributionChart.tsx","../../src/pages/Select/AggregateStatistics/AggregateStatistics.tsx","../../src/pages/Select/InfoBar/InfoBar.tsx","../../src/pages/Select/SelectCommands/AggregationControls/AggregationControls.tsx","../../src/pages/Select/SelectCommands/MultiValueColumns/MultiValueColumns.tsx","../../src/pages/Select/SelectCommands/SelectColumns/SelectColumns.hooks.ts","../../src/pages/Select/SelectCommands/SelectColumns/SelectColumns.tsx","../../src/pages/Select/SelectCommands/SensitiveZeros/SensitiveZeros.hooks.tsx","../../src/pages/Select/SelectCommands/SensitiveZeros/SensitiveZeros.tsx","../../src/pages/Select/SelectCommands/SubjectId/SubjectId.tsx","../../src/pages/Select/SelectCommands/SelectCommands.tsx","../../src/pages/Select/TablePreview/TablePreview.tsx","../../src/pages/Select/SelectPage.tsx"],"sourcesContent":["/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type {\n\tIAggregateStatistics,\n\tIRecordsCountByStringKey,\n} from '@essex/sds-core'\nimport type { Remote } from 'comlink'\nimport { useCallback, useMemo } from 'react'\n\nimport type { ICsvContent } from '~models'\nimport { useSdsManagerInstance, useSensitiveContent } from '~states'\nimport { usableHeaders, usableMultiValueColumns } from '~utils'\nimport type { ICancelablePromise } from '~workers/types'\n\nexport function useGetAggregateStatistics(): (\n\tsensitiveContent: ICsvContent,\n\trecordLimit: number,\n\treportingLength: number,\n\tresolution: number,\n) => Promise<\n\tRemote<ICancelablePromise<IAggregateStatistics | null>> | undefined\n> {\n\tconst [managerInstance] = useSdsManagerInstance()\n\n\treturn useCallback(\n\t\tasync (\n\t\t\tsensitiveContent: ICsvContent,\n\t\t\trecordLimit: number,\n\t\t\treportingLength: number,\n\t\t\tresolution: number,\n\t\t) => {\n\t\t\tif (managerInstance) {\n\t\t\t\tconst headers = usableHeaders(sensitiveContent).map(h => h.name)\n\t\t\t\tconst instance = await managerInstance.instance\n\n\t\t\t\treturn instance.generateAggregateStatistics(\n\t\t\t\t\tsensitiveContent.table.toCSV({\n\t\t\t\t\t\tdelimiter: sensitiveContent.delimiter,\n\t\t\t\t\t}),\n\t\t\t\t\t{\n\t\t\t\t\t\tdelimiter: sensitiveContent.delimiter,\n\t\t\t\t\t\tsubjectId: sensitiveContent.subjectId,\n\t\t\t\t\t\tuseColumns: headers,\n\t\t\t\t\t\tsensitiveZeros: sensitiveContent.headers\n\t\t\t\t\t\t\t.filter(h => h.hasSensitiveZeros)\n\t\t\t\t\t\t\t.map(h => h.name),\n\t\t\t\t\t\trecordLimit,\n\t\t\t\t\t\tmultiValueColumns: usableMultiValueColumns(sensitiveContent),\n\t\t\t\t\t},\n\t\t\t\t\treportingLength,\n\t\t\t\t\tresolution,\n\t\t\t\t)\n\t\t\t}\n\t\t},\n\t\t[managerInstance],\n\t)\n}\n\nfunction calcPercentages(\n\ttotal: number | undefined,\n\tcounts: IRecordsCountByStringKey | undefined,\n) {\n\tconst ret = {}\n\n\tif (!counts || !total || total === 0) {\n\t\treturn ret\n\t}\n\n\tfor (const column of Object.keys(counts)) {\n\t\tret[column] = (counts[column] * 100.0) / total\n\t}\n\n\treturn ret\n}\n\nexport function useColumnsWithRareCombinationsPercentage(\n\tstatistics: IAggregateStatistics | null,\n): IRecordsCountByStringKey {\n\treturn useMemo(() => {\n\t\treturn calcPercentages(\n\t\t\tstatistics?.numberOfRecordsWithRareCombinations,\n\t\t\tstatistics?.numberOfRecordsWithRareCombinationsPerColumn,\n\t\t)\n\t}, [statistics])\n}\n\nexport function useAttributesWithRareCombinationsPercentage(\n\tstatistics: IAggregateStatistics | null,\n): IRecordsCountByStringKey {\n\treturn useMemo(() => {\n\t\treturn calcPercentages(\n\t\t\tstatistics?.numberOfRecordsWithRareCombinations,\n\t\t\tstatistics?.numberOfRecordsWithRareCombinationsPerAttribute,\n\t\t)\n\t}, [statistics])\n}\n\nexport function useOnRemoveColumn(): (column: string) => void {\n\tconst [sensitiveContent, setSensitiveContent] = useSensitiveContent()\n\n\treturn useCallback(\n\t\tcolumn => {\n\t\t\tconst index = sensitiveContent.headers.findIndex(h => h.name === column)\n\n\t\t\tif (index >= 0) {\n\t\t\t\tsetSensitiveContent(previous => ({\n\t\t\t\t\t...previous,\n\t\t\t\t\theaders: [\n\t\t\t\t\t\t...previous.headers.slice(0, index),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...previous.headers[index],\n\t\t\t\t\t\t\tuse: !previous.headers[index].use,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t...previous.headers.slice(index + 1),\n\t\t\t\t\t],\n\t\t\t\t}))\n\t\t\t}\n\t\t},\n\t\t[sensitiveContent, setSensitiveContent],\n\t)\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { FlexContainer, FlexItem } from '@sds/components'\nimport styled from 'styled-components'\n\nexport const Container = styled(FlexContainer)`\n\twidth: 100%;\n\tpadding: ${p => p.theme.spacing.m};\n\tfont-size: ${p => p.theme.fonts.large.fontSize};\n`\n\nexport const StyledReport = styled.div`\n\tmargin-bottom: ${p => p.theme.spacing.m};\n`\n\nexport const ChartsContainer = styled(FlexContainer)`\n\twidth: 100%;\n`\n\nexport const ChartItem = styled(FlexItem)`\n\twidth: calc(50% - ${p => p.theme.spacing.s1});\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { FlexItem } from '@sds/components'\nimport styled from 'styled-components'\n\nexport const ChartContainer = styled(FlexItem)`\n\toverflow-y: auto;\n\toverflow-x: hidden;\n\tpadding: ${p => p.theme.spacing.s1};\n\tdirection: ltr;\n\t& > div {\n\t\tdirection: ltr;\n\t}\n\t&::-webkit-scrollbar {\n\t\twidth: 4px;\n\t\tbackground: ${p => p.theme.palette.neutralLight};\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color: ${p => p.theme.palette.themePrimary};\n\t\tborder-radius: 20px;\n\t}\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { FlexContainer, FlexItem } from '@sds/components'\nimport { useThematic } from '@thematic/react'\nimport type { Plugin } from 'chart.js'\nimport ChartDataLabels from 'chartjs-plugin-datalabels'\nimport _ from 'lodash'\nimport type { FC } from 'react'\nimport { memo, useCallback, useMemo } from 'react'\nimport { Bar } from 'react-chartjs-2'\n\nimport { ChartContainer } from './ContributionChart.styles.js'\nimport type { ContributionChartProps } from './ContributionChart.types.js'\n\nexport const ContributionChart: FC<ContributionChartProps> = memo(\n\tfunction ContributionChart({\n\t\tselectedKey,\n\t\tvaluePerKey,\n\t\tlabel,\n\t\tcontainerHeight,\n\t\tbarHeight,\n\t\ttooltipFormatter,\n\t\tonClick,\n\t}) {\n\t\tconst labels = useMemo(\n\t\t\t() =>\n\t\t\t\t_(valuePerKey)\n\t\t\t\t\t.keys()\n\t\t\t\t\t.sortBy(k => -valuePerKey[k])\n\t\t\t\t\t.value(),\n\t\t\t[valuePerKey],\n\t\t)\n\t\tconst data = useMemo(\n\t\t\t() => labels.map(k => valuePerKey[k].toFixed(0)),\n\t\t\t[labels, valuePerKey],\n\t\t)\n\t\tconst handleClick = useCallback(\n\t\t\t(evt, elements, chart) => {\n\t\t\t\t// either bar click fires off the same item\n\t\t\t\tconst clicked = elements && elements[0]\n\t\t\t\tconst key = clicked ? labels[clicked.index] : undefined\n\t\t\t\t// only triggers the event if we clicked a bar\n\t\t\t\tkey && onClick?.(key)\n\t\t\t},\n\t\t\t[labels, onClick],\n\t\t)\n\t\tconst thematic = useThematic()\n\t\tconst backgroundColor = useMemo(() => {\n\t\t\tconst normalColor = thematic.scales().nominal().toArray()[0]\n\t\t\tconst selectedColor = thematic.scales().nominalBold().toArray()[0]\n\n\t\t\treturn labels.map(l => (l === selectedKey ? selectedColor : normalColor))\n\t\t}, [labels, thematic, selectedKey])\n\t\tconst labelColors = useMemo(() => {\n\t\t\tconst greys = thematic.scales().greys().toArray()\n\n\t\t\treturn labels.map(l => (selectedKey === l ? greys[0] : greys[80]))\n\t\t}, [labels, thematic, selectedKey])\n\n\t\treturn (\n\t\t\t<FlexContainer vertical justify=\"center\">\n\t\t\t\t<FlexItem align=\"center\">{label}</FlexItem>\n\t\t\t\t<ChartContainer\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tmaxHeight: containerHeight,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Bar\n\t\t\t\t\t\theight={Math.max(barHeight * data.length, barHeight)}\n\t\t\t\t\t\tdata={{\n\t\t\t\t\t\t\tlabels: labels,\n\t\t\t\t\t\t\tdatasets: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: label,\n\t\t\t\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\t\t\t\txAxisID: 'xAxis',\n\t\t\t\t\t\t\t\t\tyAxisID: 'yAxis',\n\t\t\t\t\t\t\t\t\tbackgroundColor,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tplugins={[\n\t\t\t\t\t\t\tChartDataLabels as Plugin<'bar'>,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'event-catcher',\n\t\t\t\t\t\t\t\tbeforeEvent(chart, args, _pluginOptions) {\n\t\t\t\t\t\t\t\t\t// on hover at options will not handle well the case\n\t\t\t\t\t\t\t\t\t// where the mouse leaves the bar\n\t\t\t\t\t\t\t\t\tif (args.event.type === 'mousemove') {\n\t\t\t\t\t\t\t\t\t\tconst elements = chart.getActiveElements()\n\t\t\t\t\t\t\t\t\t\tchart.canvas.style.cursor =\n\t\t\t\t\t\t\t\t\t\t\telements && elements[0] ? 'pointer' : 'default'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t\toptions={{\n\t\t\t\t\t\t\tplugins: {\n\t\t\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\t\t\tdisplay: false,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdatalabels: {\n\t\t\t\t\t\t\t\t\tanchor: 'start',\n\t\t\t\t\t\t\t\t\talign: 'end',\n\t\t\t\t\t\t\t\t\toffset: 5,\n\t\t\t\t\t\t\t\t\tformatter: value => `${value} %`,\n\t\t\t\t\t\t\t\t\tcolor: labelColors,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttooltip: {\n\t\t\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\t\t\tlabel: tooltipFormatter,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tindexAxis: 'y',\n\t\t\t\t\t\t\tscales: {\n\t\t\t\t\t\t\t\txAxis: {\n\t\t\t\t\t\t\t\t\tdisplay: false,\n\t\t\t\t\t\t\t\t\tgrid: {\n\t\t\t\t\t\t\t\t\t\tdisplay: false,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tyAxis: {\n\t\t\t\t\t\t\t\t\tgrid: {\n\t\t\t\t\t\t\t\t\t\tdisplay: false,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonClick: handleClick,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</ChartContainer>\n\t\t\t</FlexContainer>\n\t\t)\n\t},\n)\nContributionChart.displayName = 'ContributionChart'\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { IAggregateStatistics } from '@essex/sds-core'\nimport { Spinner } from '@fluentui/react'\nimport type { FC } from 'react'\nimport { memo, useCallback, useEffect, useRef, useState } from 'react'\n\nimport {\n\tuseGlobalErrorMessage,\n\tuseRawSynthesisParameters,\n\tuseSdsManagerInstance,\n\tuseSensitiveContent,\n} from '~states'\n\nimport {\n\tuseAttributesWithRareCombinationsPercentage,\n\tuseColumnsWithRareCombinationsPercentage,\n\tuseGetAggregateStatistics,\n} from './AggregateStatistics.hooks.js'\nimport {\n\tChartItem,\n\tChartsContainer,\n\tContainer,\n\tStyledReport,\n} from './AggregateStatistics.styles.js'\nimport { ContributionChart } from './ContributionChart.js'\n\nexport const AggregateStatistics: FC = memo(function AggregateStatistics() {\n\tconst currentAggregationId = useRef<string | undefined>('')\n\tconst [managerInstance] = useSdsManagerInstance()\n\tconst [sensitiveContent] = useSensitiveContent()\n\tconst [statistics, setStatistics] = useState<IAggregateStatistics | null>(\n\t\tnull,\n\t)\n\tconst [isLoading, setIsLoading] = useState(false)\n\tconst [, setGlobalErrorMessage] = useGlobalErrorMessage()\n\tconst [rawSynthesisParams] = useRawSynthesisParameters()\n\tconst getAggregateStatistics = useGetAggregateStatistics()\n\tconst columnWithRareCombinationsPercentage =\n\t\tuseColumnsWithRareCombinationsPercentage(statistics)\n\tconst attributesWithRareCombinationsPercentage =\n\t\tuseAttributesWithRareCombinationsPercentage(statistics)\n\tconst columnTooltipFormatter = useCallback(\n\t\titem => {\n\t\t\treturn `Affecting ${\n\t\t\t\tstatistics?.numberOfRecordsWithRareCombinationsPerColumn[item.label]\n\t\t\t}/${\n\t\t\t\tstatistics?.numberOfRecordsWithRareCombinations\n\t\t\t} rare/linkable subjects (${item.raw}%)`\n\t\t},\n\t\t[statistics],\n\t)\n\tconst attributeTooltipFormatter = useCallback(\n\t\titem => {\n\t\t\treturn `Affecting ${\n\t\t\t\tstatistics?.numberOfRecordsWithRareCombinationsPerAttribute[item.label]\n\t\t\t}/${\n\t\t\t\tstatistics?.numberOfRecordsWithRareCombinations\n\t\t\t} rare/linkable subjects (${item.raw}%)`\n\t\t},\n\t\t[statistics],\n\t)\n\n\tuseEffect(() => {\n\t\tsetIsLoading(true)\n\t\tsetGlobalErrorMessage(undefined)\n\n\t\tgetAggregateStatistics(\n\t\t\tsensitiveContent,\n\t\t\trawSynthesisParams.recordLimit,\n\t\t\trawSynthesisParams.reportingLength,\n\t\t\trawSynthesisParams.resolution,\n\t\t).then(async aggregateStatisticsGetter => {\n\t\t\tconst id = await aggregateStatisticsGetter?.id\n\n\t\t\tcurrentAggregationId.current = id\n\n\t\t\ttry {\n\t\t\t\tconst result = (await await aggregateStatisticsGetter?.promise) ?? null\n\n\t\t\t\t// only update if this was the last request made\n\t\t\t\tif (id === currentAggregationId.current) {\n\t\t\t\t\tsetStatistics(result)\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tif (currentAggregationId.current !== '') {\n\t\t\t\t\tsetGlobalErrorMessage(err as string)\n\t\t\t\t\tsetStatistics(null)\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (currentAggregationId.current !== '') {\n\t\t\t\t\tsetIsLoading(false)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}, [getAggregateStatistics, sensitiveContent, rawSynthesisParams.recordLimit, rawSynthesisParams.reportingLength, rawSynthesisParams.resolution, setStatistics, setIsLoading, setGlobalErrorMessage])\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\t// cancel any pending execution on unmount\n\t\t\tmanagerInstance?.instance.forceAggregateStatisticsWorkerToTerminate()\n\t\t\tcurrentAggregationId.current = ''\n\t\t}\n\t}, [managerInstance])\n\n\treturn (\n\t\t<Container vertical align=\"center\">\n\t\t\t{isLoading ? (\n\t\t\t\t<Spinner />\n\t\t\t) : statistics && statistics.numberOfRecordsWithRareCombinations > 0 ? (\n\t\t\t\t<>\n\t\t\t\t\t<StyledReport>{`Contribution to privacy risk (creating rare attribute combinations in ${\n\t\t\t\t\t\tstatistics.numberOfRecordsWithRareCombinations\n\t\t\t\t\t}/${statistics.numberOfRecords} subjects, ${(\n\t\t\t\t\t\t(statistics.numberOfRecordsWithRareCombinations * 100.0) /\n\t\t\t\t\t\tstatistics.numberOfRecords\n\t\t\t\t\t).toFixed(0)}%)`}</StyledReport>\n\t\t\t\t\t<ChartsContainer justify=\"space-between\">\n\t\t\t\t\t\t<ChartItem>\n\t\t\t\t\t\t\t<ContributionChart\n\t\t\t\t\t\t\t\tvaluePerKey={columnWithRareCombinationsPercentage}\n\t\t\t\t\t\t\t\tlabel={'Selected columns'}\n\t\t\t\t\t\t\t\tcontainerHeight={220}\n\t\t\t\t\t\t\t\tbarHeight={10}\n\t\t\t\t\t\t\t\ttooltipFormatter={columnTooltipFormatter}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ChartItem>\n\t\t\t\t\t\t<ChartItem>\n\t\t\t\t\t\t\t<ContributionChart\n\t\t\t\t\t\t\t\tvaluePerKey={attributesWithRareCombinationsPercentage}\n\t\t\t\t\t\t\t\tlabel={'Attributes of selected columns'}\n\t\t\t\t\t\t\t\tcontainerHeight={220}\n\t\t\t\t\t\t\t\tbarHeight={10}\n\t\t\t\t\t\t\t\ttooltipFormatter={attributeTooltipFormatter}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ChartItem>\n\t\t\t\t\t</ChartsContainer>\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<StyledReport>\n\t\t\t\t\tNo rare attribute combinations (below the privacy resolution) based on\n\t\t\t\t\tthe current parameters\n\t\t\t\t</StyledReport>\n\t\t\t)}\n\t\t</Container>\n\t)\n})\nAggregateStatistics.displayName = 'AggregateStatistics'\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { FlexContainer } from '@sds/components'\nimport type { FC } from 'react'\nimport { memo, useMemo } from 'react'\nimport styled from 'styled-components'\n\nimport { useSensitiveContent } from '~states'\n\nexport const InfoBar: FC = memo(function InfoBar() {\n\tconst [sensitiveContent] = useSensitiveContent()\n\n\tconst stats = useMemo(() => {\n\t\tconst subjectId = sensitiveContent.subjectId\n\t\tconst rowCount = sensitiveContent.table.numRows()\n\t\tconst data = sensitiveContent.headers.reduce(\n\t\t\t(acc, cur) => {\n\t\t\t\tconst colStats = sensitiveContent.metadata?.columns[cur.name]\n\t\t\t\tif (cur.use && colStats && cur.name !== subjectId) {\n\t\t\t\t\tacc.count += 1\n\t\t\t\t\tacc.unique += colStats.stats?.distinct ?? 0\n\t\t\t\t\tacc.combinations *= colStats.stats?.distinct ?? 1\n\t\t\t\t}\n\n\t\t\t\treturn acc\n\t\t\t},\n\t\t\t{ count: 0, unique: 0, combinations: 1 },\n\t\t)\n\n\t\tif (data.count) {\n\t\t\treturn `${data.count} columns and ${rowCount} records.` // with ${data.combinations} maximum possible combimations`\n\t\t} else {\n\t\t\treturn '0 columns selected'\n\t\t}\n\t}, [sensitiveContent])\n\n\treturn <Container justify=\"center\">{stats}</Container>\n})\nInfoBar.displayName = 'InfoBar'\n\nconst Container = styled(FlexContainer)`\n\tpadding: ${p => p.theme.spacing.m};\n\tfont-size: ${p => p.theme.fonts.large.fontSize};\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { Position, SpinButton } from '@fluentui/react'\nimport { FlexContainer } from '@sds/components'\nimport type { FC } from 'react'\nimport { memo } from 'react'\nimport styled from 'styled-components'\n\nimport {\n\tuseRawSynthesisParameters,\n\tuseRawSynthesisParametersPropertySetter,\n} from '../../../../states/rawSynthesisParameters.js'\nimport { useSpinButtonOnChange } from '../../../hooks/index.js'\n\nexport const AggregationControls: FC = memo(function SelectCommand() {\n\tconst [rawSynthesisParams] = useRawSynthesisParameters()\n\tconst handleResolutionChange = useSpinButtonOnChange(\n\t\tuseRawSynthesisParametersPropertySetter('resolution'),\n\t)\n\tconst handleReportingLengthChange = useSpinButtonOnChange(\n\t\tuseRawSynthesisParametersPropertySetter('reportingLength'),\n\t)\n\n\treturn (\n\t\t<FlexContainer align=\"center\">\n\t\t\t<Action>Privacy Resolution</Action>\n\t\t\t<StyledSpinButton\n\t\t\t\tlabelPosition={Position.top}\n\t\t\t\tmin={1}\n\t\t\t\tstep={1}\n\t\t\t\tvalue={rawSynthesisParams.resolution.toString()}\n\t\t\t\tonChange={handleResolutionChange}\n\t\t\t/>\n\t\t\t<Action>Aggregation Limit</Action>\n\t\t\t<StyledSpinButton\n\t\t\t\tlabelPosition={Position.top}\n\t\t\t\tmin={1}\n\t\t\t\tstep={1}\n\t\t\t\tvalue={rawSynthesisParams.reportingLength.toString()}\n\t\t\t\tonChange={handleReportingLengthChange}\n\t\t\t/>\n\t\t</FlexContainer>\n\t)\n})\nAggregationControls.displayName = 'AggregationControls'\n\nexport const StyledSpinButton = styled(SpinButton)`\n\twidth: 60px;\n`\n\nconst Action = styled.span`\n\tfont-size: ${p => p.theme.fonts.mediumPlus.fontSize};\n\tletter-spacing: 1.25px;\n\tpadding: ${p => p.theme.spacing.m};\n\tcolor: ${p => p.theme.palette.themePrimary};\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { Callout, Checkbox, DirectionalHint, Label } from '@fluentui/react'\nimport { useBoolean, useId } from '@fluentui/react-hooks'\nimport { FlexContainer } from '@sds/components'\nimport type { ChangeEvent, FC } from 'react'\nimport { memo, useCallback, useMemo, useState } from 'react'\nimport styled from 'styled-components'\n\nimport { useSensitiveContent } from '~states'\n\nexport const MultiValueColumns: FC = memo(function MultiValueColumns() {\n\tconst [isCalloutVisible, { toggle: toggleIsCalloutVisible }] =\n\t\tuseBoolean(false)\n\tconst actionId = useId('multi-value-columns')\n\tconst [defaultDelimiter, setDefaultDelimiter] = useState(';')\n\tconst [sensitiveContent, setSensitiveContent] = useSensitiveContent()\n\n\tconst updateDefaultDelimiter = useCallback(\n\t\t(event: ChangeEvent<HTMLInputElement>) => {\n\t\t\tsetDefaultDelimiter(event.target.value ?? ';')\n\t\t},\n\t\t[setDefaultDelimiter],\n\t)\n\n\tconst selectedStringColumns = useMemo(() => {\n\t\treturn sensitiveContent.headers\n\t\t\t.filter(header => {\n\t\t\t\treturn (\n\t\t\t\t\theader.name !== sensitiveContent.subjectId &&\n\t\t\t\t\theader.use &&\n\t\t\t\t\tsensitiveContent.metadata?.columns[header.name].type === 'string'\n\t\t\t\t)\n\t\t\t})\n\t\t\t.map(h => h.name)\n\t}, [sensitiveContent])\n\n\tconst toggleCallout = useCallback(() => {\n\t\tif (!selectedStringColumns.length) return\n\t\ttoggleIsCalloutVisible()\n\t}, [selectedStringColumns, toggleIsCalloutVisible])\n\n\tconst actionClass = useMemo(() => {\n\t\treturn selectedStringColumns.length ? '' : 'disabled'\n\t}, [selectedStringColumns])\n\n\tconst handleDelimiterUpdate = useCallback(\n\t\t(index: number, delimter: string | null) => {\n\t\t\tsetSensitiveContent(previous => ({\n\t\t\t\t...previous,\n\t\t\t\theaders: [\n\t\t\t\t\t...previous.headers.slice(0, index),\n\t\t\t\t\t{\n\t\t\t\t\t\t...previous.headers[index],\n\t\t\t\t\t\tspreadWithDelimiter: delimter,\n\t\t\t\t\t},\n\t\t\t\t\t...previous.headers.slice(index + 1),\n\t\t\t\t],\n\t\t\t}))\n\t\t},\n\t\t[setSensitiveContent],\n\t)\n\n\tconst setAllOptions = useCallback(\n\t\t(set: boolean) => {\n\t\t\tconst newHeaders = sensitiveContent.headers.map(header => {\n\t\t\t\tif (selectedStringColumns?.includes(header.name)) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...header,\n\t\t\t\t\t\tspreadWithDelimiter: set\n\t\t\t\t\t\t\t? header.spreadWithDelimiter ?? defaultDelimiter\n\t\t\t\t\t\t\t: null,\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn header\n\t\t\t\t}\n\t\t\t})\n\t\t\tsetSensitiveContent(previous => ({\n\t\t\t\t...previous,\n\t\t\t\theaders: newHeaders,\n\t\t\t}))\n\t\t},\n\t\t[\n\t\t\tsensitiveContent,\n\t\t\tsetSensitiveContent,\n\t\t\tdefaultDelimiter,\n\t\t\tselectedStringColumns,\n\t\t],\n\t)\n\n\tconst list = useMemo(() => {\n\t\treturn sensitiveContent.headers.map((header, index) => {\n\t\t\tif (!header.use || !selectedStringColumns?.includes(header.name))\n\t\t\t\treturn null\n\t\t\treturn (\n\t\t\t\t<StyledListItem\n\t\t\t\t\tclassName={(index + 1) % 2 !== 0 ? 'odd' : ''}\n\t\t\t\t\tkey={header.name}\n\t\t\t\t\tjustify=\"space-between\"\n\t\t\t\t\talign=\"center\"\n\t\t\t\t>\n\t\t\t\t\t<StyledCheckbox\n\t\t\t\t\t\tlabel={header.name}\n\t\t\t\t\t\tchecked={header.spreadWithDelimiter !== null}\n\t\t\t\t\t\tonChange={(ev, checked) =>\n\t\t\t\t\t\t\thandleDelimiterUpdate(index, checked ? defaultDelimiter : null)\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<StyledListItemInputArea\n\t\t\t\t\t\tclassName={header.spreadWithDelimiter !== null ? 'enabled' : ''}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StyledInputField\n\t\t\t\t\t\t\tvalue={header.spreadWithDelimiter ?? ''}\n\t\t\t\t\t\t\tonChange={(ev: ChangeEvent<HTMLInputElement>) =>\n\t\t\t\t\t\t\t\thandleDelimiterUpdate(index, ev.target.value)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</StyledListItemInputArea>\n\t\t\t\t</StyledListItem>\n\t\t\t)\n\t\t})\n\t}, [\n\t\tsensitiveContent,\n\t\tselectedStringColumns,\n\t\thandleDelimiterUpdate,\n\t\tdefaultDelimiter,\n\t])\n\treturn (\n\t\t<>\n\t\t\t<Action className={actionClass} id={actionId} onClick={toggleCallout}>\n\t\t\t\tMulti-value Columns\n\t\t\t</Action>\n\t\t\t{isCalloutVisible && (\n\t\t\t\t<Callout\n\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\tgapSpace={0}\n\t\t\t\t\tisBeakVisible={false}\n\t\t\t\t\tdirectionalHint={DirectionalHint.bottomCenter}\n\t\t\t\t\ttarget={`#${actionId}`}\n\t\t\t\t\tonDismiss={toggleIsCalloutVisible}\n\t\t\t\t\tsetInitialFocus\n\t\t\t\t>\n\t\t\t\t\t<Container vertical>\n\t\t\t\t\t\t<GroupActions vertical>\n\t\t\t\t\t\t\t<FlexContainer justify=\"space-around\" align=\"center\">\n\t\t\t\t\t\t\t\t<GroupAction onClick={() => setAllOptions(true)}>\n\t\t\t\t\t\t\t\t\tAll\n\t\t\t\t\t\t\t\t</GroupAction>\n\t\t\t\t\t\t\t\t<Divider>|</Divider>\n\t\t\t\t\t\t\t\t<GroupAction onClick={() => setAllOptions(false)}>\n\t\t\t\t\t\t\t\t\tNone\n\t\t\t\t\t\t\t\t</GroupAction>\n\t\t\t\t\t\t\t</FlexContainer>\n\t\t\t\t\t\t\t<DefaultDelimiterArea align=\"center\" justify=\"space-between\">\n\t\t\t\t\t\t\t\t<Label htmlFor=\"default-delimiter\">Default Delimiter: </Label>\n\t\t\t\t\t\t\t\t<StyledInputWrapper>\n\t\t\t\t\t\t\t\t\t<StyledInputField\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tid=\"default-delimiter\"\n\t\t\t\t\t\t\t\t\t\tonChange={updateDefaultDelimiter}\n\t\t\t\t\t\t\t\t\t\tvalue={defaultDelimiter}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</StyledInputWrapper>\n\t\t\t\t\t\t\t</DefaultDelimiterArea>\n\t\t\t\t\t\t</GroupActions>\n\t\t\t\t\t\t<ListContainer vertical>\n\t\t\t\t\t\t\t<div>{list}</div>\n\t\t\t\t\t\t</ListContainer>\n\t\t\t\t\t</Container>\n\t\t\t\t</Callout>\n\t\t\t)}\n\t\t</>\n\t)\n})\nMultiValueColumns.displayName = 'MultiValueColumns'\n\nconst Action = styled.span`\n\tfont-size: ${p => p.theme.fonts.mediumPlus.fontSize};\n\t/* font-weight: bold; */\n\tletter-spacing: 1.25px;\n\tpadding: ${p => p.theme.spacing.m};\n\tcolor: ${p => p.theme.palette.themePrimary};\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n\t&.disabled {\n\t\tcolor: ${p => p.theme.palette.neutralTertiary};\n\t\t&:hover {\n\t\t\tcursor: auto;\n\t\t}\n\t}\n`\n\nconst Container = styled(FlexContainer)`\n\tmin-width: 250px;\n\tmax-height: 400px;\n\tborder: 1px solid ${p => p.theme.palette.neutralLight};\n\t/* background: ${p => p.theme.palette.neutralQuaternary}; */\n\toverflow-y: auto;\n\t&::-webkit-scrollbar {\n\t\tdisplay: none;\n\t}\n`\n\nconst GroupActions = styled(FlexContainer)`\n\tpadding: ${p => p.theme.spacing.s1};\n\tborder-bottom: 1px solid ${p => p.theme.palette.neutralLight};\n\tbox-shadow: ${p => p.theme.effects.elevation4};\n`\n\nconst GroupAction = styled.span`\n\tcolor: ${p => p.theme.palette.themePrimary};\n\tfont-size: ${p => p.theme.fonts.medium.fontSize};\n\tfont-weight: bold;\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n`\n\nconst Divider = styled.span`\n\tfont-size: ${p => p.theme.fonts.smallPlus.fontSize};\n\tcolor: ${p => p.theme.palette.neutralTertiary};\n`\n\nconst ListContainer = styled(FlexContainer)`\n\toverflow-y: auto;\n\tpadding: ${p => p.theme.spacing.s1};\n\tdirection: rtl;\n\t& > div {\n\t\tdirection: ltr;\n\t}\n\t&::-webkit-scrollbar {\n\t\twidth: 4px;\n\t\tbackground: ${p => p.theme.palette.neutralLight};\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color: ${p => p.theme.palette.themePrimary};\n\t\tborder-radius: 20px;\n\t}\n`\n\nconst StyledListItem = styled(FlexContainer)`\n\tpadding: ${p => p.theme.spacing.s2} 0;\n\tborder-bottom: 1px solid ${p => p.theme.palette.neutralLight};\n`\n\nconst StyledListItemInputArea = styled.div`\n\twidth: 50px;\n\tvisibility: hidden;\n\t&.enabled {\n\t\tvisibility: visible;\n\t}\n`\n\nconst StyledCheckbox = styled(Checkbox)`\n\tpadding: ${p => p.theme.spacing.s2};\n`\n\nconst DefaultDelimiterArea = styled(FlexContainer)`\n\tmargin-top: ${p => p.theme.spacing.m};\n\n\t& label {\n\t\tfont-weight: normal;\n\t\tletter-spacing: 1.25px;\n\t\tfont-size: ${p => p.theme.fonts.medium.fontSize};\n\t\t/* color: ${p => p.theme.palette.neutralTertiary}; */\n\t}\n`\n\nconst StyledInputWrapper = styled.div`\n\tmargin-left: ${p => p.theme.spacing.m};\n`\n\nconst StyledInputField = styled.input`\n\twidth: 100%;\n\theight: 18px;\n\tborder: 1px solid ${p => p.theme.palette.themeLight};\n\tborder-radius: ${p => p.theme.effects.roundedCorner2};\n\t&:focus {\n\t\toutline: 1px solid ${p => p.theme.palette.themePrimary};\n\t}\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { useCallback } from 'react'\nimport type { SetterOrUpdater } from 'recoil'\n\nimport type { ICsvContent } from '~models'\n\nexport function useOnUseColumnCheckToggle(\n\tsetter: SetterOrUpdater<ICsvContent>,\n): (index: number) => void {\n\treturn useCallback(\n\t\tindex => {\n\t\t\tsetter(previous => ({\n\t\t\t\t...previous,\n\t\t\t\theaders: [\n\t\t\t\t\t...previous.headers.slice(0, index),\n\t\t\t\t\t{\n\t\t\t\t\t\t...previous.headers[index],\n\t\t\t\t\t\tuse: !previous.headers[index].use,\n\t\t\t\t\t},\n\t\t\t\t\t...previous.headers.slice(index + 1),\n\t\t\t\t],\n\t\t\t}))\n\t\t},\n\t\t[setter],\n\t)\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { Callout, Checkbox, DirectionalHint } from '@fluentui/react'\nimport { useBoolean, useId } from '@fluentui/react-hooks'\nimport { FlexContainer } from '@sds/components'\nimport type { FC } from 'react'\nimport { memo, useCallback, useMemo } from 'react'\nimport styled from 'styled-components'\n\nimport { useSensitiveContent } from '~states'\n\nimport { useOnUseColumnCheckToggle } from './SelectColumns.hooks.js'\n\nexport const SelectColumns: FC = memo(function SelectColumns() {\n\tconst [isCalloutVisible, { toggle: toggleIsCalloutVisible }] =\n\t\tuseBoolean(false)\n\tconst actionId = useId('select-columns-id')\n\tconst [sensitiveContent, setSensitiveContent] = useSensitiveContent()\n\tconst columnCheckToggle = useOnUseColumnCheckToggle(setSensitiveContent)\n\n\tconst setAllOptions = useCallback(\n\t\t(set: boolean) => {\n\t\t\tconst newHeaders = sensitiveContent.headers.map(header => {\n\t\t\t\treturn { ...header, use: set }\n\t\t\t})\n\n\t\t\tsetSensitiveContent(previous => ({\n\t\t\t\t...previous,\n\t\t\t\theaders: newHeaders,\n\t\t\t}))\n\t\t},\n\t\t[sensitiveContent, setSensitiveContent],\n\t)\n\n\tconst list = useMemo(() => {\n\t\treturn sensitiveContent.headers.map((header, index) => {\n\t\t\treturn (\n\t\t\t\t<StyledCheckbox\n\t\t\t\t\tkey={header.fieldName}\n\t\t\t\t\tlabel={header.name}\n\t\t\t\t\tchecked={header.use}\n\t\t\t\t\tonChange={() => columnCheckToggle(index)}\n\t\t\t\t/>\n\t\t\t)\n\t\t})\n\t}, [sensitiveContent, columnCheckToggle])\n\n\treturn (\n\t\t<>\n\t\t\t<Action id={actionId} onClick={toggleIsCalloutVisible}>\n\t\t\t\tSelect Columns\n\t\t\t</Action>\n\t\t\t{isCalloutVisible && (\n\t\t\t\t<Callout\n\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\tgapSpace={0}\n\t\t\t\t\tisBeakVisible={false}\n\t\t\t\t\tdirectionalHint={DirectionalHint.bottomCenter}\n\t\t\t\t\ttarget={`#${actionId}`}\n\t\t\t\t\tonDismiss={toggleIsCalloutVisible}\n\t\t\t\t\tsetInitialFocus\n\t\t\t\t>\n\t\t\t\t\t<Container vertical>\n\t\t\t\t\t\t<GroupActions justify=\"space-around\" align=\"center\">\n\t\t\t\t\t\t\t<GroupAction onClick={() => setAllOptions(true)}>All</GroupAction>\n\t\t\t\t\t\t\t<Divider>|</Divider>\n\t\t\t\t\t\t\t<GroupAction onClick={() => setAllOptions(false)}>\n\t\t\t\t\t\t\t\tNone\n\t\t\t\t\t\t\t</GroupAction>\n\t\t\t\t\t\t</GroupActions>\n\t\t\t\t\t\t<ListContainer vertical>\n\t\t\t\t\t\t\t<div>{list}</div>\n\t\t\t\t\t\t</ListContainer>\n\t\t\t\t\t</Container>\n\t\t\t\t</Callout>\n\t\t\t)}\n\t\t</>\n\t)\n})\nSelectColumns.displayName = 'SelectColumns'\n\nconst Action = styled.span`\n\tfont-size: ${p => p.theme.fonts.mediumPlus.fontSize};\n\t/* font-weight: bold; */\n\tletter-spacing: 1.25px;\n\tpadding: ${p => p.theme.spacing.m};\n\tcolor: ${p => p.theme.palette.themePrimary};\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n`\n\nconst Container = styled(FlexContainer)`\n\tmin-width: 250px;\n\tmax-height: 400px;\n\tborder: 1px solid ${p => p.theme.palette.neutralLight};\n\t/* background: ${p => p.theme.palette.neutralQuaternary}; */\n\toverflow-y: auto;\n\t&::-webkit-scrollbar {\n\t\tdisplay: none;\n\t}\n`\n\nconst GroupActions = styled(FlexContainer)`\n\tpadding: ${p => p.theme.spacing.s1};\n\tborder-bottom: 1px solid ${p => p.theme.palette.neutralLight};\n\tbox-shadow: ${p => p.theme.effects.elevation4};\n`\n\nconst GroupAction = styled.span`\n\tcolor: ${p => p.theme.palette.themePrimary};\n\tfont-size: ${p => p.theme.fonts.medium.fontSize};\n\tfont-weight: bold;\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n`\n\nconst Divider = styled.span`\n\tfont-size: ${p => p.theme.fonts.smallPlus.fontSize};\n\tcolor: ${p => p.theme.palette.neutralTertiary};\n`\n\nconst ListContainer = styled(FlexContainer)`\n\toverflow-y: auto;\n\tpadding: ${p => p.theme.spacing.s1};\n\tdirection: rtl;\n\t& > div {\n\t\tdirection: ltr;\n\t}\n\t&::-webkit-scrollbar {\n\t\twidth: 4px;\n\t\tbackground: ${p => p.theme.palette.neutralLight};\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color: ${p => p.theme.palette.themePrimary};\n\t\tborder-radius: 20px;\n\t}\n`\n\nconst StyledCheckbox = styled(Checkbox)`\n\tpadding: ${p => p.theme.spacing.s2};\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { useCallback, useMemo } from 'react'\nimport type { SetterOrUpdater } from 'recoil'\n\nimport type { ICsvContent } from '~models'\n\nexport function useColumnsWithZeros(\n\tcontent: ICsvContent,\n): string[] | undefined {\n\treturn useMemo(\n\t\t() =>\n\t\t\tcontent.columnsWithZeros\n\t\t\t\t?.map(i => content.headers[i])\n\t\t\t\t.filter(h => h.use)\n\t\t\t\t.map(h => h.name),\n\t\t[content],\n\t)\n}\n\nexport function useOnSensitiveZeroCheckToggle(\n\tsetter: SetterOrUpdater<ICsvContent>,\n): (index: number) => void {\n\treturn useCallback(\n\t\tindex => {\n\t\t\tsetter(previous => ({\n\t\t\t\t...previous,\n\t\t\t\theaders: [\n\t\t\t\t\t...previous.headers.slice(0, index),\n\t\t\t\t\t{\n\t\t\t\t\t\t...previous.headers[index],\n\t\t\t\t\t\thasSensitiveZeros: !previous.headers[index].hasSensitiveZeros,\n\t\t\t\t\t},\n\t\t\t\t\t...previous.headers.slice(index + 1),\n\t\t\t\t],\n\t\t\t}))\n\t\t},\n\t\t[setter],\n\t)\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { Callout, Checkbox, DirectionalHint } from '@fluentui/react'\nimport { useBoolean, useId } from '@fluentui/react-hooks'\nimport { FlexContainer } from '@sds/components'\nimport type { FC } from 'react'\nimport { memo, useCallback, useMemo } from 'react'\nimport styled from 'styled-components'\n\nimport { useSensitiveContent } from '~states'\n\nimport {\n\tuseColumnsWithZeros,\n\tuseOnSensitiveZeroCheckToggle,\n} from './SensitiveZeros.hooks.js'\n\nexport const SensitiveZeros: FC = memo(function SensitiveZeros() {\n\tconst [isCalloutVisible, { toggle: toggleIsCalloutVisible }] =\n\t\tuseBoolean(false)\n\tconst actionId = useId('sensitive-zeros-id')\n\tconst [sensitiveContent, setSensitiveContent] = useSensitiveContent()\n\tconst columnsWithZeros = useColumnsWithZeros(sensitiveContent)\n\n\tconst toggleCallout = useCallback(() => {\n\t\tif (!columnsWithZeros?.length) return\n\t\ttoggleIsCalloutVisible()\n\t}, [columnsWithZeros, toggleIsCalloutVisible])\n\n\tconst actionClass = useMemo(() => {\n\t\treturn columnsWithZeros?.length ? '' : 'disabled'\n\t}, [columnsWithZeros])\n\n\tconst handleSensitiveCheckChange =\n\t\tuseOnSensitiveZeroCheckToggle(setSensitiveContent)\n\n\tconst setAllOptions = useCallback(\n\t\t(set: boolean) => {\n\t\t\tconst newHeaders = sensitiveContent.headers.map(header => {\n\t\t\t\tif (columnsWithZeros?.includes(header.name)) {\n\t\t\t\t\treturn { ...header, hasSensitiveZeros: set }\n\t\t\t\t} else {\n\t\t\t\t\treturn header\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tsetSensitiveContent(previous => ({\n\t\t\t\t...previous,\n\t\t\t\theaders: newHeaders,\n\t\t\t}))\n\t\t},\n\t\t[sensitiveContent, setSensitiveContent, columnsWithZeros],\n\t)\n\n\tconst list = useMemo(() => {\n\t\treturn sensitiveContent.headers.map((header, index) => {\n\t\t\tif (!header.use || !columnsWithZeros?.includes(header.name)) return null\n\t\t\treturn (\n\t\t\t\t<StyledCheckbox\n\t\t\t\t\tkey={header.fieldName}\n\t\t\t\t\tlabel={header.name}\n\t\t\t\t\tchecked={header.hasSensitiveZeros}\n\t\t\t\t\tonChange={() => handleSensitiveCheckChange(index)}\n\t\t\t\t/>\n\t\t\t)\n\t\t})\n\t}, [sensitiveContent, handleSensitiveCheckChange, columnsWithZeros])\n\treturn (\n\t\t<>\n\t\t\t<Action className={actionClass} id={actionId} onClick={toggleCallout}>\n\t\t\t\tSensitive Zeros\n\t\t\t</Action>\n\t\t\t{isCalloutVisible && (\n\t\t\t\t<Callout\n\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\tgapSpace={0}\n\t\t\t\t\tisBeakVisible={false}\n\t\t\t\t\tdirectionalHint={DirectionalHint.bottomCenter}\n\t\t\t\t\ttarget={`#${actionId}`}\n\t\t\t\t\tonDismiss={toggleIsCalloutVisible}\n\t\t\t\t\tsetInitialFocus\n\t\t\t\t>\n\t\t\t\t\t<Container vertical>\n\t\t\t\t\t\t<GroupActions justify=\"space-around\" align=\"center\">\n\t\t\t\t\t\t\t<GroupAction onClick={() => setAllOptions(true)}>All</GroupAction>\n\t\t\t\t\t\t\t<Divider>|</Divider>\n\t\t\t\t\t\t\t<GroupAction onClick={() => setAllOptions(false)}>\n\t\t\t\t\t\t\t\tNone\n\t\t\t\t\t\t\t</GroupAction>\n\t\t\t\t\t\t</GroupActions>\n\t\t\t\t\t\t<ListContainer vertical>\n\t\t\t\t\t\t\t<div>{list}</div>\n\t\t\t\t\t\t</ListContainer>\n\t\t\t\t\t</Container>\n\t\t\t\t</Callout>\n\t\t\t)}\n\t\t</>\n\t)\n})\nSensitiveZeros.displayName = 'SensitiveZeros'\n\nconst Action = styled.span`\n\tfont-size: ${p => p.theme.fonts.mediumPlus.fontSize};\n\t/* font-weight: bold; */\n\tletter-spacing: 1.25px;\n\tpadding: ${p => p.theme.spacing.m};\n\tcolor: ${p => p.theme.palette.themePrimary};\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n\t&.disabled {\n\t\tcolor: ${p => p.theme.palette.neutralTertiary};\n\t\t&:hover {\n\t\t\tcursor: auto;\n\t\t}\n\t}\n`\n\nconst Container = styled(FlexContainer)`\n\tmin-width: 250px;\n\tmax-height: 400px;\n\tborder: 1px solid ${p => p.theme.palette.neutralLight};\n\t/* background: ${p => p.theme.palette.neutralQuaternary}; */\n\toverflow-y: auto;\n\t&::-webkit-scrollbar {\n\t\tdisplay: none;\n\t}\n`\n\nconst GroupActions = styled(FlexContainer)`\n\tpadding: ${p => p.theme.spacing.s1};\n\tborder-bottom: 1px solid ${p => p.theme.palette.neutralLight};\n\tbox-shadow: ${p => p.theme.effects.elevation4};\n`\n\nconst GroupAction = styled.span`\n\tcolor: ${p => p.theme.palette.themePrimary};\n\tfont-size: ${p => p.theme.fonts.medium.fontSize};\n\tfont-weight: bold;\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n`\n\nconst Divider = styled.span`\n\tfont-size: ${p => p.theme.fonts.smallPlus.fontSize};\n\tcolor: ${p => p.theme.palette.neutralTertiary};\n`\n\nconst ListContainer = styled(FlexContainer)`\n\toverflow-y: auto;\n\tpadding: ${p => p.theme.spacing.s1};\n\tdirection: rtl;\n\t& > div {\n\t\tdirection: ltr;\n\t}\n\t&::-webkit-scrollbar {\n\t\twidth: 4px;\n\t\tbackground: ${p => p.theme.palette.neutralLight};\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color: ${p => p.theme.palette.themePrimary};\n\t\tborder-radius: 20px;\n\t}\n`\n\nconst StyledCheckbox = styled(Checkbox)`\n\tpadding: ${p => p.theme.spacing.s2};\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { Callout, DirectionalHint, Icon } from '@fluentui/react'\nimport { useBoolean, useId } from '@fluentui/react-hooks'\nimport { FlexContainer } from '@sds/components'\nimport type { FC } from 'react'\nimport { memo, useCallback, useMemo } from 'react'\nimport styled from 'styled-components'\n\nimport { useSensitiveContent } from '~states'\n\nexport const SubjectId: FC = memo(function SubjectId() {\n\tconst [isCalloutVisible, { toggle: toggleIsCalloutVisible }] =\n\t\tuseBoolean(false)\n\tconst actionId = useId('select-columns-id')\n\tconst [sensitiveContent, setSensitiveContent] = useSensitiveContent()\n\n\tconst visibleColumns = useMemo(() => {\n\t\treturn sensitiveContent.headers.filter(h => h.use)\n\t}, [sensitiveContent])\n\n\tconst subjectId = useMemo(() => {\n\t\treturn sensitiveContent.subjectId\n\t}, [sensitiveContent])\n\tconst actionClass = useMemo(() => {\n\t\treturn visibleColumns.length ? '' : 'disabled'\n\t}, [visibleColumns])\n\n\tconst handleShowMenu = useCallback(() => {\n\t\tif (!visibleColumns.length) return\n\t\ttoggleIsCalloutVisible()\n\t}, [visibleColumns, toggleIsCalloutVisible])\n\n\tconst handleSubjectIdChange = useCallback(\n\t\t(key: string) => {\n\t\t\tsetSensitiveContent(previous => ({\n\t\t\t\t...previous,\n\t\t\t\tsubjectId: key === previous.subjectId ? undefined : key,\n\t\t\t}))\n\t\t},\n\t\t[setSensitiveContent],\n\t)\n\n\tconst list = useMemo(() => {\n\t\treturn visibleColumns.map((header, index) => {\n\t\t\treturn (\n\t\t\t\t<ListItem\n\t\t\t\t\tkey={header.name}\n\t\t\t\t\tonClick={() => handleSubjectIdChange(header.name)}\n\t\t\t\t\tclassName={header.name === subjectId ? 'activeListItem' : ''}\n\t\t\t\t>\n\t\t\t\t\t<Icon iconName=\"CheckMark\" />\n\t\t\t\t\t{header.name}\n\t\t\t\t</ListItem>\n\t\t\t)\n\t\t})\n\t}, [subjectId, visibleColumns, handleSubjectIdChange])\n\n\treturn (\n\t\t<>\n\t\t\t<Action className={actionClass} id={actionId} onClick={handleShowMenu}>\n\t\t\t\tSubject ID\n\t\t\t</Action>\n\t\t\t{isCalloutVisible && (\n\t\t\t\t<Callout\n\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\tgapSpace={0}\n\t\t\t\t\tisBeakVisible={false}\n\t\t\t\t\tdirectionalHint={DirectionalHint.bottomCenter}\n\t\t\t\t\ttarget={`#${actionId}`}\n\t\t\t\t\tonDismiss={toggleIsCalloutVisible}\n\t\t\t\t\tsetInitialFocus\n\t\t\t\t>\n\t\t\t\t\t<Container vertical>\n\t\t\t\t\t\t<ListContainer vertical>\n\t\t\t\t\t\t\t<div>{list}</div>\n\t\t\t\t\t\t</ListContainer>\n\t\t\t\t\t</Container>\n\t\t\t\t</Callout>\n\t\t\t)}\n\t\t</>\n\t)\n})\nSubjectId.displayName = 'SubjectId'\n\nconst Action = styled.span`\n\tfont-size: ${p => p.theme.fonts.mediumPlus.fontSize};\n\t/* font-weight: bold; */\n\tletter-spacing: 1.25px;\n\tpadding: ${p => p.theme.spacing.m};\n\tcolor: ${p => p.theme.palette.themePrimary};\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n\t&.disabled {\n\t\tcolor: ${p => p.theme.palette.neutralTertiary};\n\t\t&:hover {\n\t\t\tcursor: auto;\n\t\t}\n\t}\n`\n\nconst Container = styled(FlexContainer)`\n\tmin-width: 250px;\n\tmax-height: 400px;\n\tborder: 1px solid ${p => p.theme.palette.neutralLight};\n\t/* background: ${p => p.theme.palette.neutralQuaternary}; */\n\toverflow-y: auto;\n\t&::-webkit-scrollbar {\n\t\tdisplay: none;\n\t}\n`\n\nconst ListContainer = styled(FlexContainer)`\n\toverflow-y: auto;\n\tpadding: ${p => p.theme.spacing.s1};\n\tdirection: rtl;\n\t& > div {\n\t\tdirection: ltr;\n\t}\n\t&::-webkit-scrollbar {\n\t\twidth: 4px;\n\t\tbackground: ${p => p.theme.palette.neutralLight};\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color: ${p => p.theme.palette.themePrimary};\n\t\tborder-radius: 20px;\n\t}\n`\n\nconst ListItem = styled.div`\n\tpadding: ${p => p.theme.spacing.s1};\n\tfont-size: ${p => p.theme.fonts.medium.fontSize};\n\t&:hover {\n\t\tcursor: pointer;\n\t\tbackground: ${p => p.theme.palette.neutralLight};\n\t}\n\t& i {\n\t\tpadding: 0 ${p => p.theme.spacing.s1};\n\t\tvisibility: hidden;\n\t}\n\t&.activeListItem {\n\t\tbackground: ${p => p.theme.palette.neutralLight};\n\t\t& i {\n\t\t\tvisibility: visible;\n\t\t}\n\t}\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { FlexContainer } from '@sds/components'\nimport type { FC } from 'react'\nimport { memo } from 'react'\nimport styled from 'styled-components'\n\nimport { AggregationControls } from './AggregationControls/AggregationControls.js'\nimport { MultiValueColumns } from './MultiValueColumns/index.js'\nimport { SelectColumns } from './SelectColumns/index.js'\nimport { SensitiveZeros } from './SensitiveZeros/index.js'\nimport { SubjectId } from './SubjectId/index.js'\n\nexport const SelectCommands: FC = memo(function SelectCommand() {\n\treturn (\n\t\t<Container justify=\"center\" align=\"center\" wrap>\n\t\t\t<SelectColumns />\n\t\t\t<Divider>|</Divider>\n\t\t\t<SubjectId />\n\t\t\t<Divider>|</Divider>\n\t\t\t<SensitiveZeros />\n\t\t\t<Divider>|</Divider>\n\t\t\t<MultiValueColumns />\n\t\t\t<AggregationControls />\n\t\t</Container>\n\t)\n})\nSelectCommands.displayName = 'SelectCommands'\n\nconst Container = styled(FlexContainer)`\n\tborder-bottom: 1px solid ${p => p.theme.palette.neutralLight};\n\tbox-shadow: ${p => p.theme.effects.elevation4};\n`\n\nconst Divider = styled.span`\n\tfont-size: ${p => p.theme.fonts.smallPlus.fontSize};\n\tcolor: ${p => p.theme.palette.neutralTertiary};\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { ArqueroDetailsList } from '@essex/arquero-react'\nimport { useTheme } from '@fluentui/react'\nimport type { FC } from 'react'\nimport { memo, useMemo } from 'react'\nimport styled from 'styled-components'\n\nimport { useSensitiveContent } from '~states'\n\nexport const TablePreview: FC = memo(function TablePreview() {\n\tconst [sensitiveContent] = useSensitiveContent()\n\tconst theme = useTheme()\n\n\tconst visibleColumns = useMemo(() => {\n\t\treturn sensitiveContent.headers.filter(h => h.use).map(h => h.name)\n\t}, [sensitiveContent])\n\n\tif (!visibleColumns.length) return <></>\n\n\treturn (\n\t\t<Container>\n\t\t\t<ArqueroDetailsList\n\t\t\t\ttable={sensitiveContent.table}\n\t\t\t\tmetadata={sensitiveContent.metadata}\n\t\t\t\tfeatures={{\n\t\t\t\t\thistogramColumnHeaders: true,\n\t\t\t\t\tstatsColumnHeaders: true,\n\t\t\t\t}}\n\t\t\t\tisSortable\n\t\t\t\tisHeadersFixed\n\t\t\t\tshowColumnBorders\n\t\t\t\tvisibleColumns={visibleColumns}\n\t\t\t\tstyles={{\n\t\t\t\t\troot: {\n\t\t\t\t\t\theight: 800,\n\t\t\t\t\t\tborder: `1px solid ${theme.palette.neutralLight}`,\n\t\t\t\t\t},\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Container>\n\t)\n})\nTablePreview.displayName = 'TablePreview'\n\nconst Container = styled.div`\n\theight: 100%;\n\tmin-height: 150px;\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { FlexContainer } from '@sds/components'\nimport type { FC } from 'react'\nimport { memo } from 'react'\nimport styled from 'styled-components'\n\nimport { AggregateStatistics } from './AggregateStatistics/index.js'\nimport { InfoBar } from './InfoBar/index.js'\nimport { SelectCommands } from './SelectCommands/index.js'\nimport { TablePreview } from './TablePreview/index.js'\n\nexport const SelectPage: FC = memo(function SelectPage() {\n\treturn (\n\t\t<Container vertical>\n\t\t\t<SelectCommands />\n\t\t\t<MainContent vertical>\n\t\t\t\t<AggregateStatistics />\n\t\t\t\t<InfoBar />\n\t\t\t\t<TablePreview />\n\t\t\t</MainContent>\n\t\t</Container>\n\t)\n})\nSelectPage.displayName = 'SelectPage'\n\nconst Container = styled(FlexContainer)`\n\theight: 100%;\n\toverflow-y: auto;\n\t&::-webkit-scrollbar {\n\t\tdisplay: none;\n\t}\n`\n\nconst MainContent = styled(FlexContainer)`\n\theight: 100%;\n\toverflow-y: auto;\n`\n"],"names":["useGetAggregateStatistics","managerInstance","useSdsManagerInstance","useCallback","sensitiveContent","recordLimit","reportingLength","resolution","headers","usableHeaders","h","usableMultiValueColumns","calcPercentages","total","counts","ret","column","useColumnsWithRareCombinationsPercentage","statistics","useMemo","useAttributesWithRareCombinationsPercentage","Container","styled","FlexContainer","p","StyledReport","ChartsContainer","ChartItem","FlexItem","ChartContainer","ContributionChart","memo","selectedKey","valuePerKey","label","containerHeight","barHeight","tooltipFormatter","onClick","labels","_","keys","sortBy","k","value","data","map","toFixed","handleClick","evt","elements","chart","clicked","key","index","undefined","thematic","useThematic","backgroundColor","normalColor","scales","nominal","toArray","selectedColor","nominalBold","l","labelColors","greys","_jsx","maxHeight","Bar","Math","max","length","datasets","xAxisID","yAxisID","ChartDataLabels","id","beforeEvent","args","_pluginOptions","event","type","getActiveElements","canvas","style","cursor","plugins","legend","display","datalabels","anchor","align","offset","formatter","color","tooltip","callbacks","indexAxis","xAxis","grid","yAxis","displayName","AggregateStatistics","currentAggregationId","useRef","useSensitiveContent","setStatistics","useState","isLoading","setIsLoading","setGlobalErrorMessage","useGlobalErrorMessage","rawSynthesisParams","useRawSynthesisParameters","getAggregateStatistics","columnWithRareCombinationsPercentage","attributesWithRareCombinationsPercentage","columnTooltipFormatter","item","numberOfRecordsWithRareCombinationsPerColumn","numberOfRecordsWithRareCombinations","raw","attributeTooltipFormatter","numberOfRecordsWithRareCombinationsPerAttribute","useEffect","then","aggregateStatisticsGetter","current","result","promise","err","instance","forceAggregateStatisticsWorkerToTerminate","Spinner","_jsxs","_Fragment","numberOfRecords","InfoBar","stats","subjectId","rowCount","table","numRows","reduce","acc","cur","colStats","metadata","columns","name","use","count","unique","distinct","combinations","theme","spacing","m","fonts","large","fontSize","AggregationControls","handleResolutionChange","useSpinButtonOnChange","useRawSynthesisParametersPropertySetter","handleReportingLengthChange","Action","StyledSpinButton","Position","top","toString","SpinButton","span","mediumPlus","palette","themePrimary","MultiValueColumns","isCalloutVisible","toggle","toggleIsCalloutVisible","useBoolean","actionId","useId","defaultDelimiter","setDefaultDelimiter","setSensitiveContent","updateDefaultDelimiter","target","selectedStringColumns","filter","header","toggleCallout","actionClass","handleDelimiterUpdate","delimter","previous","slice","spreadWithDelimiter","setAllOptions","set","newHeaders","includes","list","StyledListItem","StyledCheckbox","ev","checked","StyledListItemInputArea","StyledInputField","Callout","DirectionalHint","bottomCenter","GroupActions","GroupAction","Divider","DefaultDelimiterArea","Label","StyledInputWrapper","ListContainer","neutralTertiary","neutralLight","neutralQuaternary","s1","effects","elevation4","medium","smallPlus","s2","div","Checkbox","input","themeLight","roundedCorner2","useOnUseColumnCheckToggle","setter","SelectColumns","columnCheckToggle","fieldName","useColumnsWithZeros","content","columnsWithZeros","i","useOnSensitiveZeroCheckToggle","hasSensitiveZeros","SensitiveZeros","handleSensitiveCheckChange","SubjectId","visibleColumns","handleShowMenu","handleSubjectIdChange","ListItem","Icon","SelectCommands","TablePreview","useTheme","ArqueroDetailsList","histogramColumnHeaders","statsColumnHeaders","root","height","border","SelectPage","MainContent"],"mappings":"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"}