(function(){"use strict";const V=Symbol("Comlink.proxy"),G=Symbol("Comlink.endpoint"),Y=Symbol("Comlink.releaseProxy"),J=Symbol("Comlink.thrown"),I=n=>typeof n=="object"&&n!==null||typeof n=="function",X={canHandle:n=>I(n)&&n[V],serialize(n){const{port1:e,port2:a}=new MessageChannel;return U(n,e),[a,[a]]},deserialize(n){return n.start(),Z(n)}},K={canHandle:n=>I(n)&&J in n,serialize({value:n}){let e;return n instanceof Error?e={isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:e={isError:!1,value:n},[e,[]]},deserialize(n){throw n.isError?Object.assign(new Error(n.value.message),n.value):n.value}},D=new Map([["proxy",X],["throw",K]]);function U(n,e=self){e.addEventListener("message",function a(o){if(!o||!o.data)return;const{id:t,type:r,path:s}=Object.assign({path:[]},o.data),g=(o.data.argumentList||[]).map(S);let _;try{const f=s.slice(0,-1).reduce((l,P)=>l[P],n),v=s.reduce((l,P)=>l[P],n);switch(r){case"GET":_=v;break;case"SET":f[s.slice(-1)[0]]=S(o.data.value),_=!0;break;case"APPLY":_=v.apply(f,g);break;case"CONSTRUCT":{const l=new v(...g);_=ne(l)}break;case"ENDPOINT":{const{port1:l,port2:P}=new MessageChannel;U(n,P),_=te(l,[l])}break;case"RELEASE":_=void 0;break;default:return}}catch(f){_={value:f,[J]:0}}Promise.resolve(_).catch(f=>({value:f,[J]:0})).then(f=>{const[v,l]=W(f);e.postMessage(Object.assign(Object.assign({},v),{id:t}),l),r==="RELEASE"&&(e.removeEventListener("message",a),H(e))})}),e.start&&e.start()}function Q(n){return n.constructor.name==="MessagePort"}function H(n){Q(n)&&n.close()}function Z(n,e){return M(n,[],e)}function C(n){if(n)throw new Error("Proxy has been released and is not useable")}function M(n,e=[],a=function(){}){let o=!1;const t=new Proxy(a,{get(r,s){if(C(o),s===Y)return()=>A(n,{type:"RELEASE",path:e.map(g=>g.toString())}).then(()=>{H(n),o=!0});if(s==="then"){if(e.length===0)return{then:()=>t};const g=A(n,{type:"GET",path:e.map(_=>_.toString())}).then(S);return g.then.bind(g)}return M(n,[...e,s])},set(r,s,g){C(o);const[_,f]=W(g);return A(n,{type:"SET",path:[...e,s].map(v=>v.toString()),value:_},f).then(S)},apply(r,s,g){C(o);const _=e[e.length-1];if(_===G)return A(n,{type:"ENDPOINT"}).then(S);if(_==="bind")return M(n,e.slice(0,-1));const[f,v]=z(g);return A(n,{type:"APPLY",path:e.map(l=>l.toString()),argumentList:f},v).then(S)},construct(r,s){C(o);const[g,_]=z(s);return A(n,{type:"CONSTRUCT",path:e.map(f=>f.toString()),argumentList:g},_).then(S)}});return t}function ee(n){return Array.prototype.concat.apply([],n)}function z(n){const e=n.map(W);return[e.map(a=>a[0]),ee(e.map(a=>a[1]))]}const B=new WeakMap;function te(n,e){return B.set(n,e),n}function ne(n){return Object.assign(n,{[V]:!0})}function W(n){for(const[e,a]of D)if(a.canHandle(n)){const[o,t]=a.serialize(n);return[{type:"HANDLER",name:e,value:o},t]}return[{type:"RAW",value:n},B.get(n)||[]]}function S(n){switch(n.type){case"HANDLER":return D.get(n.name).deserialize(n.value);case"RAW":return n.value}}function A(n,e,a){return new Promise(o=>{const t=re();n.addEventListener("message",function r(s){!s.data||!s.data.id||s.data.id!==t||(n.removeEventListener("message",r),o(s.data))}),n.start&&n.start(),n.postMessage(Object.assign({id:t},e),a)})}function re(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}let u,$=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});$.decode();let k=null;function E(){return(k===null||k.buffer!==u.memory.buffer)&&(k=new Uint8Array(u.memory.buffer)),k}function x(n,e){return $.decode(E().subarray(n,n+e))}const h=new Array(32).fill(void 0);h.push(void 0,null,!0,!1);let T=h.length;function i(n){T===h.length&&h.push(h.length+1);const e=T;return T=h[e],h[e]=n,e}function c(n){return h[n]}function ae(n){n<36||(h[n]=T,T=n)}function w(n){const e=c(n);return ae(n),e}let d=0,F=new TextEncoder("utf-8");const se=typeof F.encodeInto=="function"?function(n,e){return F.encodeInto(n,e)}:function(n,e){const a=F.encode(n);return e.set(a),{read:n.length,written:a.length}};function y(n,e,a){if(a===void 0){const g=F.encode(n),_=e(g.length);return E().subarray(_,_+g.length).set(g),d=g.length,_}let o=n.length,t=e(o);const r=E();let s=0;for(;s<o;s++){const g=n.charCodeAt(s);if(g>127)break;r[t+s]=g}if(s!==o){s!==0&&(n=n.slice(s)),t=a(t,o,o=s+n.length*3);const g=E().subarray(t+s,t+o),_=se(n,g);s+=_.written}return d=s,t}let j=null;function p(){return(j===null||j.buffer!==u.memory.buffer)&&(j=new Int32Array(u.memory.buffer)),j}function m(n){return n==null}function N(n){const e=typeof n;if(e=="number"||e=="boolean"||n==null)return`${n}`;if(e=="string")return`"${n}"`;if(e=="symbol"){const t=n.description;return t==null?"Symbol":`Symbol(${t})`}if(e=="function"){const t=n.name;return typeof t=="string"&&t.length>0?`Function(${t})`:"Function"}if(Array.isArray(n)){const t=n.length;let r="[";t>0&&(r+=N(n[0]));for(let s=1;s<t;s++)r+=", "+N(n[s]);return r+="]",r}const a=/\[object ([^\]]+)\]/.exec(toString.call(n));let o;if(a.length>1)o=a[1];else return toString.call(n);if(o=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:o}function oe(n){var e=y(n,u.__wbindgen_malloc,u.__wbindgen_realloc),a=d,o=u.init_logger(e,a);return o!==0}function b(n,e){try{return n.apply(this,e)}catch(a){u.__wbindgen_exn_store(i(a))}}function ie(n,e){return E().subarray(n/1,n/1+e)}class O{static __wrap(e){const a=Object.create(O.prototype);return a.ptr=e,a}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();u.__wbg_wasmsdscontext_free(e)}constructor(){var e=u.wasmsdscontext_default();return O.__wrap(e)}clear(){u.wasmsdscontext_clear(this.ptr)}setSensitiveData(e,a){var o=y(e,u.__wbindgen_malloc,u.__wbindgen_realloc),t=d;u.wasmsdscontext_setSensitiveData(this.ptr,o,t,i(a))}sensitiveAggregateStatistics(e,a,o){var t=u.wasmsdscontext_sensitiveAggregateStatistics(this.ptr,e,a,i(o));return w(t)}generateUnseeded(e,a){u.wasmsdscontext_generateUnseeded(this.ptr,i(e),i(a))}generateRowSeeded(e,a){u.wasmsdscontext_generateRowSeeded(this.ptr,i(e),i(a))}generateValueSeeded(e,a,o,t){u.wasmsdscontext_generateValueSeeded(this.ptr,i(e),a,m(o)?0:i(o),i(t))}generateAggregateSeeded(e,a,o,t,r){u.wasmsdscontext_generateAggregateSeeded(this.ptr,i(e),a,o,!m(t),m(t)?0:t,i(r))}generateDp(e,a,o,t,r,s,g){u.wasmsdscontext_generateDp(this.ptr,i(e),a,i(o),i(t),r,!m(s),m(s)?0:s,i(g))}evaluate(e,a){u.wasmsdscontext_evaluate(this.ptr,e,i(a))}navigate(){u.wasmsdscontext_navigate(this.ptr)}selectAttributes(e){u.wasmsdscontext_selectAttributes(this.ptr,i(e))}attributesIntersectionsByColumn(e){var a=u.wasmsdscontext_attributesIntersectionsByColumn(this.ptr,i(e));return w(a)}generateResultToJs(e,a){var o=u.wasmsdscontext_generateResultToJs(this.ptr,e,a);return w(o)}evaluateResultToJs(){var e=u.wasmsdscontext_evaluateResultToJs(this.ptr);return w(e)}sensitiveAggregateResultToJs(e,a,o){var t=y(a,u.__wbindgen_malloc,u.__wbindgen_realloc),r=d,s=u.wasmsdscontext_sensitiveAggregateResultToJs(this.ptr,e.codePointAt(0),t,r,m(o)?16777215:o?1:0);return w(s)}reportableAggregateResultToJs(e,a,o){var t=y(a,u.__wbindgen_malloc,u.__wbindgen_realloc),r=d,s=u.wasmsdscontext_reportableAggregateResultToJs(this.ptr,e.codePointAt(0),t,r,m(o)?16777215:o?1:0);return w(s)}syntheticAggregateResultToJs(e,a,o){var t=y(a,u.__wbindgen_malloc,u.__wbindgen_realloc),r=d,s=u.wasmsdscontext_syntheticAggregateResultToJs(this.ptr,e.codePointAt(0),t,r,m(o)?16777215:o?1:0);return w(s)}navigateResultToJs(){var e=u.wasmsdscontext_navigateResultToJs(this.ptr);return w(e)}}async function ce(n,e){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,e)}catch(o){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",o);else throw o}const a=await n.arrayBuffer();return await WebAssembly.instantiate(a,e)}else{const a=await WebAssembly.instantiate(n,e);return a instanceof WebAssembly.Instance?{instance:a,module:n}:a}}async function q(n){typeof n>"u"&&(n=new URL("/synthetic-data-showcase/assets/sds_wasm_bg-41e0b693.wasm",self.location));const e={};e.wbg={},e.wbg.__wbindgen_string_new=function(t,r){var s=x(t,r);return i(s)},e.wbg.__wbindgen_object_drop_ref=function(t){w(t)},e.wbg.__wbindgen_json_parse=function(t,r){var s=JSON.parse(x(t,r));return i(s)},e.wbg.__wbindgen_json_serialize=function(t,r){const s=c(r);var g=JSON.stringify(s===void 0?null:s),_=y(g,u.__wbindgen_malloc,u.__wbindgen_realloc),f=d;p()[t/4+1]=f,p()[t/4+0]=_},e.wbg.__wbindgen_number_new=function(t){var r=t;return i(r)},e.wbg.__wbindgen_boolean_get=function(t){const r=c(t);var s=typeof r=="boolean"?r?1:0:2;return s},e.wbg.__wbindgen_is_function=function(t){var r=typeof c(t)=="function";return r},e.wbg.__wbindgen_string_get=function(t,r){const s=c(r);var g=typeof s=="string"?s:void 0,_=m(g)?0:y(g,u.__wbindgen_malloc,u.__wbindgen_realloc),f=d;p()[t/4+1]=f,p()[t/4+0]=_},e.wbg.__wbindgen_bigint_new=function(t,r){var s=BigInt(x(t,r));return i(s)},e.wbg.__wbg_new_693216e109162396=function(){var t=new Error;return i(t)},e.wbg.__wbg_stack_0ddaca5d1abfb52f=function(t,r){var s=c(r).stack,g=y(s,u.__wbindgen_malloc,u.__wbindgen_realloc),_=d;p()[t/4+1]=_,p()[t/4+0]=g},e.wbg.__wbg_error_09919627ac0992f5=function(t,r){try{console.error(x(t,r))}finally{u.__wbindgen_free(t,r)}},e.wbg.__wbg_log_3445347661d4505e=function(t){console.log(c(t))},e.wbg.__wbg_now_559193109055ebad=function(t){var r=c(t).now();return r},e.wbg.__wbg_randomFillSync_64cc7d048f228ca8=function(){return b(function(t,r,s){c(t).randomFillSync(ie(r,s))},arguments)},e.wbg.__wbg_getRandomValues_98117e9a7e993920=function(){return b(function(t,r){c(t).getRandomValues(c(r))},arguments)},e.wbg.__wbg_process_2f24d6544ea7b200=function(t){var r=c(t).process;return i(r)},e.wbg.__wbindgen_is_object=function(t){const r=c(t);var s=typeof r=="object"&&r!==null;return s},e.wbg.__wbg_versions_6164651e75405d4a=function(t){var r=c(t).versions;return i(r)},e.wbg.__wbg_node_4b517d861cbcb3bc=function(t){var r=c(t).node;return i(r)},e.wbg.__wbindgen_is_string=function(t){var r=typeof c(t)=="string";return r},e.wbg.__wbg_crypto_98fc271021c7d2ad=function(t){var r=c(t).crypto;return i(r)},e.wbg.__wbg_msCrypto_a2cdb043d2bfe57f=function(t){var r=c(t).msCrypto;return i(r)},e.wbg.__wbg_modulerequire_3440a4bcf44437db=function(){return b(function(t,r){var s=o.require(x(t,r));return i(s)},arguments)},e.wbg.__wbg_get_67189fe0b323d288=function(t,r){var s=c(t)[r>>>0];return i(s)},e.wbg.__wbg_new_949bbc1147195c4e=function(){var t=new Array;return i(t)},e.wbg.__wbg_newnoargs_be86524d73f67598=function(t,r){var s=new Function(x(t,r));return i(s)},e.wbg.__wbg_next_7720502039b96d00=function(){return b(function(t){var r=c(t).next();return i(r)},arguments)},e.wbg.__wbg_done_b06cf0578e89ff68=function(t){var r=c(t).done;return r},e.wbg.__wbg_value_e74a542443d92451=function(t){var r=c(t).value;return i(r)},e.wbg.__wbg_get_4d0f21c2f823742e=function(){return b(function(t,r){var s=Reflect.get(c(t),c(r));return i(s)},arguments)},e.wbg.__wbg_call_888d259a5fefc347=function(){return b(function(t,r){var s=c(t).call(c(r));return i(s)},arguments)},e.wbg.__wbg_new_0b83d3df67ecb33e=function(){var t=new Object;return i(t)},e.wbg.__wbindgen_object_clone_ref=function(t){var r=c(t);return i(r)},e.wbg.__wbg_self_c6fbdfc2918d5e58=function(){return b(function(){var t=self.self;return i(t)},arguments)},e.wbg.__wbg_window_baec038b5ab35c54=function(){return b(function(){var t=window.window;return i(t)},arguments)},e.wbg.__wbg_globalThis_3f735a5746d41fbd=function(){return b(function(){var t=globalThis.globalThis;return i(t)},arguments)},e.wbg.__wbg_global_1bc0b39582740e95=function(){return b(function(){var t=global.global;return i(t)},arguments)},e.wbg.__wbindgen_is_undefined=function(t){var r=c(t)===void 0;return r},e.wbg.__wbg_isArray_eb7ad55f2da67dde=function(t){var r=Array.isArray(c(t));return r},e.wbg.__wbg_push_284486ca27c6aa8b=function(t,r){var s=c(t).push(c(r));return s},e.wbg.__wbg_values_364ae56c608e6824=function(t){var r=c(t).values();return i(r)},e.wbg.__wbg_call_346669c262382ad7=function(){return b(function(t,r,s){var g=c(t).call(c(r),c(s));return i(g)},arguments)},e.wbg.__wbg_instanceof_Object_66786225e0dbc8ba=function(t){var r=c(t)instanceof Object;return r},e.wbg.__wbg_entries_aadf9c3f38203a12=function(t){var r=Object.entries(c(t));return i(r)},e.wbg.__wbg_instanceof_Set_cc7c664ae80b00ae=function(t){var r=c(t)instanceof Set;return r},e.wbg.__wbg_keys_dad0044163aa4376=function(t){var r=c(t).keys();return i(r)},e.wbg.__wbg_buffer_397eaa4d72ee94dd=function(t){var r=c(t).buffer;return i(r)},e.wbg.__wbg_new_a7ce447f15ff496f=function(t){var r=new Uint8Array(c(t));return i(r)},e.wbg.__wbg_set_969ad0a60e51d320=function(t,r,s){c(t).set(c(r),s>>>0)},e.wbg.__wbg_length_1eb8fc608a0d4cdb=function(t){var r=c(t).length;return r},e.wbg.__wbg_newwithlength_929232475839a482=function(t){var r=new Uint8Array(t>>>0);return i(r)},e.wbg.__wbg_subarray_8b658422a224f479=function(t,r,s){var g=c(t).subarray(r>>>0,s>>>0);return i(g)},e.wbg.__wbg_set_82a4e8a85e31ac42=function(){return b(function(t,r,s){var g=Reflect.set(c(t),c(r),c(s));return g},arguments)},e.wbg.__wbindgen_debug_string=function(t,r){var s=N(c(r)),g=y(s,u.__wbindgen_malloc,u.__wbindgen_realloc),_=d;p()[t/4+1]=_,p()[t/4+0]=g},e.wbg.__wbindgen_throw=function(t,r){throw new Error(x(t,r))},e.wbg.__wbindgen_rethrow=function(t){throw w(t)},e.wbg.__wbindgen_memory=function(){var t=u.memory;return i(t)},(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:a,module:o}=await ce(await n,e);return u=a.exports,q.__wbindgen_wasm_module=o,u}var ue="/synthetic-data-showcase/assets/sds_wasm_bg-41e0b693.wasm";function ge(){return"warn"}class _e{constructor(e){this._context=null,this._name=e}async init(){await q(ue),oe(ge()),this._context=new O}async terminate(){this._context?.free()}getContext(){if(this._context===null)throw new Error(`"${this._name}" worker has not been properly initialized, did you call init?`);return this._context}}var L=(n=>(n.Sensitive="sensitive",n.Aggregated="aggregate",n.Synthetic="synthetic",n))(L||{}),R=(n=>(n.Unseeded="Unseeded",n.RowSeeded="Row Seeded",n.ValueSeeded="Value Seeded",n.AggregateSeeded="Aggregate Seeded",n.DP="Differential Privacy",n))(R||{});class fe extends _e{async generateAndEvaluate(e,a,o){const t=this.getContext();await o?.(0);const r=g=>(o?.(.5*g),!0),s=g=>(o?.(50+.5*g),!0);switch(t.setSensitiveData(e,a.csvDataParameters),a.mode){case R.Unseeded:this.generateUnseeded(a,r);break;case R.RowSeeded:this.generateRowSeeded(a,r);break;case R.ValueSeeded:this.generateValueSeeded(a,r);break;case R.AggregateSeeded:this.generateAggregateSeeded(a,r);break;case R.DP:this.generateDp(a,r);break}t.evaluate(a.reportingLength,s)}async navigate(){return this.getContext().navigate()}async selectAttributes(e){this.getContext().selectAttributes(e)}async attributesIntersectionsByColumn(e){return this.getContext().attributesIntersectionsByColumn(e)}async getAggregateResult(e,a,o,t=!1){const r=this.getContext();switch(e){case L.Sensitive:return r.sensitiveAggregateResultToJs(a,o,t);case L.Aggregated:return r.reportableAggregateResultToJs(a,o,t);case L.Synthetic:return r.syntheticAggregateResultToJs(a,o,t)}}async getGenerateResult(e,a=!1){return this.getContext().generateResultToJs(e,a)}async getEvaluateResult(){return this.getContext().evaluateResultToJs()}async getNavigateResult(){return this.getContext().navigateResultToJs()}generateUnseeded(e,a){this.getContext().generateUnseeded(e.baseSynthesisParameters,a)}generateRowSeeded(e,a){this.getContext().generateRowSeeded(e.baseSynthesisParameters,a)}generateValueSeeded(e,a){this.getContext().generateValueSeeded(e.baseSynthesisParameters,e.reportingLength,e.oversampling,a)}generateAggregateSeeded(e,a){this.getContext().generateAggregateSeeded(e.baseSynthesisParameters,e.reportingLength,e.useSyntheticCounts,e.weightSelectionPercentile,a)}generateDp(e,a){this.getContext().generateDp(e.baseSynthesisParameters,e.reportingLength,e.dpParameters,e.noiseThreshold,e.useSyntheticCounts,e.weightSelectionPercentile,a)}}U(fe)})();
//# sourceMappingURL=WasmSynthesizer-06b4fef9.js.map
//# sourceMappingURL=WasmSynthesizer-06b4fef9.js.map