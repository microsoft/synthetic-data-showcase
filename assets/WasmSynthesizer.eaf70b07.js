(function(){"use strict";const V=Symbol("Comlink.proxy"),G=Symbol("Comlink.endpoint"),Y=Symbol("Comlink.releaseProxy"),U=Symbol("Comlink.thrown"),D=n=>typeof n=="object"&&n!==null||typeof n=="function",X={canHandle:n=>D(n)&&n[V],serialize(n){const{port1:e,port2:s}=new MessageChannel;return M(n,e),[s,[s]]},deserialize(n){return n.start(),Z(n)}},K={canHandle:n=>D(n)&&U in n,serialize({value:n}){let e;return n instanceof Error?e={isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:e={isError:!1,value:n},[e,[]]},deserialize(n){throw n.isError?Object.assign(new Error(n.value.message),n.value):n.value}},F=new Map([["proxy",X],["throw",K]]);function M(n,e=self){e.addEventListener("message",function s(o){if(!o||!o.data)return;const{id:t,type:r,path:a}=Object.assign({path:[]},o.data),g=(o.data.argumentList||[]).map(p);let _;try{const b=a.slice(0,-1).reduce((l,P)=>l[P],n),m=a.reduce((l,P)=>l[P],n);switch(r){case"GET":_=m;break;case"SET":b[a.slice(-1)[0]]=p(o.data.value),_=!0;break;case"APPLY":_=m.apply(b,g);break;case"CONSTRUCT":{const l=new m(...g);_=ne(l)}break;case"ENDPOINT":{const{port1:l,port2:P}=new MessageChannel;M(n,P),_=te(l,[l])}break;case"RELEASE":_=void 0;break;default:return}}catch(b){_={value:b,[U]:0}}Promise.resolve(_).catch(b=>({value:b,[U]:0})).then(b=>{const[m,l]=I(b);e.postMessage(Object.assign(Object.assign({},m),{id:t}),l),r==="RELEASE"&&(e.removeEventListener("message",s),H(e))})}),e.start&&e.start()}function Q(n){return n.constructor.name==="MessagePort"}function H(n){Q(n)&&n.close()}function Z(n,e){return W(n,[],e)}function C(n){if(n)throw new Error("Proxy has been released and is not useable")}function W(n,e=[],s=function(){}){let o=!1;const t=new Proxy(s,{get(r,a){if(C(o),a===Y)return()=>A(n,{type:"RELEASE",path:e.map(g=>g.toString())}).then(()=>{H(n),o=!0});if(a==="then"){if(e.length===0)return{then:()=>t};const g=A(n,{type:"GET",path:e.map(_=>_.toString())}).then(p);return g.then.bind(g)}return W(n,[...e,a])},set(r,a,g){C(o);const[_,b]=I(g);return A(n,{type:"SET",path:[...e,a].map(m=>m.toString()),value:_},b).then(p)},apply(r,a,g){C(o);const _=e[e.length-1];if(_===G)return A(n,{type:"ENDPOINT"}).then(p);if(_==="bind")return W(n,e.slice(0,-1));const[b,m]=z(g);return A(n,{type:"APPLY",path:e.map(l=>l.toString()),argumentList:b},m).then(p)},construct(r,a){C(o);const[g,_]=z(a);return A(n,{type:"CONSTRUCT",path:e.map(b=>b.toString()),argumentList:g},_).then(p)}});return t}function ee(n){return Array.prototype.concat.apply([],n)}function z(n){const e=n.map(I);return[e.map(s=>s[0]),ee(e.map(s=>s[1]))]}const B=new WeakMap;function te(n,e){return B.set(n,e),n}function ne(n){return Object.assign(n,{[V]:!0})}function I(n){for(const[e,s]of F)if(s.canHandle(n)){const[o,t]=s.serialize(n);return[{type:"HANDLER",name:e,value:o},t]}return[{type:"RAW",value:n},B.get(n)||[]]}function p(n){switch(n.type){case"HANDLER":return F.get(n.name).deserialize(n.value);case"RAW":return n.value}}function A(n,e,s){return new Promise(o=>{const t=re();n.addEventListener("message",function r(a){!a.data||!a.data.id||a.data.id!==t||(n.removeEventListener("message",r),o(a.data))}),n.start&&n.start(),n.postMessage(Object.assign({id:t},e),s)})}function re(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}let u,$=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});$.decode();let k=null;function E(){return(k===null||k.buffer!==u.memory.buffer)&&(k=new Uint8Array(u.memory.buffer)),k}function S(n,e){return $.decode(E().subarray(n,n+e))}const h=new Array(32).fill(void 0);h.push(void 0,null,!0,!1);let T=h.length;function i(n){T===h.length&&h.push(h.length+1);const e=T;return T=h[e],h[e]=n,e}function c(n){return h[n]}function se(n){n<36||(h[n]=T,T=n)}function w(n){const e=c(n);return se(n),e}let d=0,O=new TextEncoder("utf-8");const ae=typeof O.encodeInto=="function"?function(n,e){return O.encodeInto(n,e)}:function(n,e){const s=O.encode(n);return e.set(s),{read:n.length,written:s.length}};function y(n,e,s){if(s===void 0){const g=O.encode(n),_=e(g.length);return E().subarray(_,_+g.length).set(g),d=g.length,_}let o=n.length,t=e(o);const r=E();let a=0;for(;a<o;a++){const g=n.charCodeAt(a);if(g>127)break;r[t+a]=g}if(a!==o){a!==0&&(n=n.slice(a)),t=s(t,o,o=a+n.length*3);const g=E().subarray(t+a,t+o);a+=ae(n,g).written}return d=a,t}function x(n){return n==null}let j=null;function v(){return(j===null||j.buffer!==u.memory.buffer)&&(j=new Int32Array(u.memory.buffer)),j}function N(n){const e=typeof n;if(e=="number"||e=="boolean"||n==null)return`${n}`;if(e=="string")return`"${n}"`;if(e=="symbol"){const t=n.description;return t==null?"Symbol":`Symbol(${t})`}if(e=="function"){const t=n.name;return typeof t=="string"&&t.length>0?`Function(${t})`:"Function"}if(Array.isArray(n)){const t=n.length;let r="[";t>0&&(r+=N(n[0]));for(let a=1;a<t;a++)r+=", "+N(n[a]);return r+="]",r}const s=/\[object ([^\]]+)\]/.exec(toString.call(n));let o;if(s.length>1)o=s[1];else return toString.call(n);if(o=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:o}function oe(n){var e=y(n,u.__wbindgen_malloc,u.__wbindgen_realloc),s=d,o=u.init_logger(e,s);return o!==0}function f(n,e){try{return n.apply(this,e)}catch(s){u.__wbindgen_exn_store(i(s))}}function ie(n,e){return E().subarray(n/1,n/1+e)}class L{static __wrap(e){const s=Object.create(L.prototype);return s.ptr=e,s}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();u.__wbg_wasmsdscontext_free(e)}constructor(){var e=u.wasmsdscontext_default();return L.__wrap(e)}clear(){u.wasmsdscontext_clear(this.ptr)}setSensitiveData(e,s){var o=y(e,u.__wbindgen_malloc,u.__wbindgen_realloc),t=d;u.wasmsdscontext_setSensitiveData(this.ptr,o,t,i(s))}sensitiveAggregateStatistics(e,s,o){var t=u.wasmsdscontext_sensitiveAggregateStatistics(this.ptr,e,s,i(o));return w(t)}generateUnseeded(e,s){u.wasmsdscontext_generateUnseeded(this.ptr,i(e),i(s))}generateRowSeeded(e,s){u.wasmsdscontext_generateRowSeeded(this.ptr,i(e),i(s))}generateValueSeeded(e,s,o,t){u.wasmsdscontext_generateValueSeeded(this.ptr,i(e),s,x(o)?0:i(o),i(t))}generateAggregateSeeded(e,s,o,t,r){u.wasmsdscontext_generateAggregateSeeded(this.ptr,i(e),s,o,!x(t),x(t)?0:t,i(r))}generateDp(e,s,o,t,r,a,g){u.wasmsdscontext_generateDp(this.ptr,i(e),s,i(o),i(t),r,!x(a),x(a)?0:a,i(g))}evaluate(e,s){u.wasmsdscontext_evaluate(this.ptr,e,i(s))}navigate(){u.wasmsdscontext_navigate(this.ptr)}selectAttributes(e){u.wasmsdscontext_selectAttributes(this.ptr,i(e))}attributesIntersectionsByColumn(e){var s=u.wasmsdscontext_attributesIntersectionsByColumn(this.ptr,i(e));return w(s)}generateResultToJs(e,s){var o=u.wasmsdscontext_generateResultToJs(this.ptr,e,s);return w(o)}evaluateResultToJs(){var e=u.wasmsdscontext_evaluateResultToJs(this.ptr);return w(e)}sensitiveAggregateResultToJs(e,s){var o=y(s,u.__wbindgen_malloc,u.__wbindgen_realloc),t=d,r=u.wasmsdscontext_sensitiveAggregateResultToJs(this.ptr,e.codePointAt(0),o,t);return w(r)}reportableAggregateResultToJs(e,s){var o=y(s,u.__wbindgen_malloc,u.__wbindgen_realloc),t=d,r=u.wasmsdscontext_reportableAggregateResultToJs(this.ptr,e.codePointAt(0),o,t);return w(r)}syntheticAggregateResultToJs(e,s){var o=y(s,u.__wbindgen_malloc,u.__wbindgen_realloc),t=d,r=u.wasmsdscontext_syntheticAggregateResultToJs(this.ptr,e.codePointAt(0),o,t);return w(r)}navigateResultToJs(){var e=u.wasmsdscontext_navigateResultToJs(this.ptr);return w(e)}}async function ce(n,e){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,e)}catch(o){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",o);else throw o}const s=await n.arrayBuffer();return await WebAssembly.instantiate(s,e)}else{const s=await WebAssembly.instantiate(n,e);return s instanceof WebAssembly.Instance?{instance:s,module:n}:s}}async function q(n){typeof n>"u"&&(n=new URL("/synthetic-data-showcase/assets/sds_wasm_bg.03a9714a.wasm",self.location));const e={};e.wbg={},e.wbg.__wbindgen_string_new=function(t,r){var a=S(t,r);return i(a)},e.wbg.__wbindgen_json_parse=function(t,r){var a=JSON.parse(S(t,r));return i(a)},e.wbg.__wbindgen_object_drop_ref=function(t){w(t)},e.wbg.__wbindgen_is_function=function(t){var r=typeof c(t)=="function";return r},e.wbg.__wbindgen_string_get=function(t,r){const a=c(r);var g=typeof a=="string"?a:void 0,_=x(g)?0:y(g,u.__wbindgen_malloc,u.__wbindgen_realloc),b=d;v()[t/4+1]=b,v()[t/4+0]=_},e.wbg.__wbindgen_json_serialize=function(t,r){const a=c(r);var g=JSON.stringify(a===void 0?null:a),_=y(g,u.__wbindgen_malloc,u.__wbindgen_realloc),b=d;v()[t/4+1]=b,v()[t/4+0]=_},e.wbg.__wbindgen_number_new=function(t){var r=t;return i(r)},e.wbg.__wbindgen_bigint_new=function(t,r){var a=BigInt(S(t,r));return i(a)},e.wbg.__wbindgen_boolean_get=function(t){const r=c(t);var a=typeof r=="boolean"?r?1:0:2;return a},e.wbg.__wbg_new_693216e109162396=function(){var t=new Error;return i(t)},e.wbg.__wbg_stack_0ddaca5d1abfb52f=function(t,r){var a=c(r).stack,g=y(a,u.__wbindgen_malloc,u.__wbindgen_realloc),_=d;v()[t/4+1]=_,v()[t/4+0]=g},e.wbg.__wbg_error_09919627ac0992f5=function(t,r){try{console.error(S(t,r))}finally{u.__wbindgen_free(t,r)}},e.wbg.__wbg_log_3445347661d4505e=function(t){console.log(c(t))},e.wbg.__wbg_now_559193109055ebad=function(t){var r=c(t).now();return r},e.wbg.__wbg_randomFillSync_64cc7d048f228ca8=function(){return f(function(t,r,a){c(t).randomFillSync(ie(r,a))},arguments)},e.wbg.__wbg_getRandomValues_98117e9a7e993920=function(){return f(function(t,r){c(t).getRandomValues(c(r))},arguments)},e.wbg.__wbg_process_2f24d6544ea7b200=function(t){var r=c(t).process;return i(r)},e.wbg.__wbindgen_is_object=function(t){const r=c(t);var a=typeof r=="object"&&r!==null;return a},e.wbg.__wbg_versions_6164651e75405d4a=function(t){var r=c(t).versions;return i(r)},e.wbg.__wbg_node_4b517d861cbcb3bc=function(t){var r=c(t).node;return i(r)},e.wbg.__wbindgen_is_string=function(t){var r=typeof c(t)=="string";return r},e.wbg.__wbg_modulerequire_3440a4bcf44437db=function(){return f(function(t,r){var a=o.require(S(t,r));return i(a)},arguments)},e.wbg.__wbg_crypto_98fc271021c7d2ad=function(t){var r=c(t).crypto;return i(r)},e.wbg.__wbg_msCrypto_a2cdb043d2bfe57f=function(t){var r=c(t).msCrypto;return i(r)},e.wbg.__wbg_get_67189fe0b323d288=function(t,r){var a=c(t)[r>>>0];return i(a)},e.wbg.__wbg_new_949bbc1147195c4e=function(){var t=new Array;return i(t)},e.wbg.__wbg_newnoargs_be86524d73f67598=function(t,r){var a=new Function(S(t,r));return i(a)},e.wbg.__wbg_next_7720502039b96d00=function(){return f(function(t){var r=c(t).next();return i(r)},arguments)},e.wbg.__wbg_done_b06cf0578e89ff68=function(t){var r=c(t).done;return r},e.wbg.__wbg_value_e74a542443d92451=function(t){var r=c(t).value;return i(r)},e.wbg.__wbg_get_4d0f21c2f823742e=function(){return f(function(t,r){var a=Reflect.get(c(t),c(r));return i(a)},arguments)},e.wbg.__wbg_call_888d259a5fefc347=function(){return f(function(t,r){var a=c(t).call(c(r));return i(a)},arguments)},e.wbg.__wbg_new_0b83d3df67ecb33e=function(){var t=new Object;return i(t)},e.wbg.__wbindgen_object_clone_ref=function(t){var r=c(t);return i(r)},e.wbg.__wbg_self_c6fbdfc2918d5e58=function(){return f(function(){var t=self.self;return i(t)},arguments)},e.wbg.__wbg_window_baec038b5ab35c54=function(){return f(function(){var t=window.window;return i(t)},arguments)},e.wbg.__wbg_globalThis_3f735a5746d41fbd=function(){return f(function(){var t=globalThis.globalThis;return i(t)},arguments)},e.wbg.__wbg_global_1bc0b39582740e95=function(){return f(function(){var t=global.global;return i(t)},arguments)},e.wbg.__wbindgen_is_undefined=function(t){var r=c(t)===void 0;return r},e.wbg.__wbg_isArray_eb7ad55f2da67dde=function(t){var r=Array.isArray(c(t));return r},e.wbg.__wbg_push_284486ca27c6aa8b=function(t,r){var a=c(t).push(c(r));return a},e.wbg.__wbg_values_364ae56c608e6824=function(t){var r=c(t).values();return i(r)},e.wbg.__wbg_call_346669c262382ad7=function(){return f(function(t,r,a){var g=c(t).call(c(r),c(a));return i(g)},arguments)},e.wbg.__wbg_instanceof_Object_66786225e0dbc8ba=function(t){var r=c(t)instanceof Object;return r},e.wbg.__wbg_entries_aadf9c3f38203a12=function(t){var r=Object.entries(c(t));return i(r)},e.wbg.__wbg_instanceof_Set_cc7c664ae80b00ae=function(t){var r=c(t)instanceof Set;return r},e.wbg.__wbg_keys_dad0044163aa4376=function(t){var r=c(t).keys();return i(r)},e.wbg.__wbg_buffer_397eaa4d72ee94dd=function(t){var r=c(t).buffer;return i(r)},e.wbg.__wbg_new_a7ce447f15ff496f=function(t){var r=new Uint8Array(c(t));return i(r)},e.wbg.__wbg_set_969ad0a60e51d320=function(t,r,a){c(t).set(c(r),a>>>0)},e.wbg.__wbg_length_1eb8fc608a0d4cdb=function(t){var r=c(t).length;return r},e.wbg.__wbg_newwithlength_929232475839a482=function(t){var r=new Uint8Array(t>>>0);return i(r)},e.wbg.__wbg_subarray_8b658422a224f479=function(t,r,a){var g=c(t).subarray(r>>>0,a>>>0);return i(g)},e.wbg.__wbg_set_82a4e8a85e31ac42=function(){return f(function(t,r,a){var g=Reflect.set(c(t),c(r),c(a));return g},arguments)},e.wbg.__wbindgen_debug_string=function(t,r){var a=N(c(r)),g=y(a,u.__wbindgen_malloc,u.__wbindgen_realloc),_=d;v()[t/4+1]=_,v()[t/4+0]=g},e.wbg.__wbindgen_throw=function(t,r){throw new Error(S(t,r))},e.wbg.__wbindgen_rethrow=function(t){throw w(t)},e.wbg.__wbindgen_memory=function(){var t=u.memory;return i(t)},(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:s,module:o}=await ce(await n,e);return u=s.exports,q.__wbindgen_wasm_module=o,u}var ue="/synthetic-data-showcase/assets/sds_wasm_bg.03a9714a.wasm";/*!
 * Copyright (c) Microsoft. All rights reserved.
 * Licensed under the MIT license. See LICENSE file in the project.
 */function ge(){return"warn"}/*!
 * Copyright (c) Microsoft. All rights reserved.
 * Licensed under the MIT license. See LICENSE file in the project.
 */class _e{constructor(e){this._context=null,this._name=e}async init(){await q(ue),oe(ge()),this._context=new L}async terminate(){this._context?.free()}getContext(){if(this._context===null)throw new Error(`"${this._name}" worker has not been properly initialized, did you call init?`);return this._context}}/*!
 * Copyright (c) Microsoft. All rights reserved.
 * Licensed under the MIT license. See LICENSE file in the project.
 */var J=(n=>(n.Sensitive="sensitive",n.Aggregated="aggregate",n.Synthetic="synthetic",n))(J||{});/*!
 * Copyright (c) Microsoft. All rights reserved.
 * Licensed under the MIT license. See LICENSE file in the project.
 */var R=(n=>(n.Unseeded="Unseeded",n.RowSeeded="Row Seeded",n.ValueSeeded="Value Seeded",n.AggregateSeeded="Aggregate Seeded",n.DP="Differential Privacy",n))(R||{});/*!
 * Copyright (c) Microsoft. All rights reserved.
 * Licensed under the MIT license. See LICENSE file in the project.
 */class be extends _e{async generateAndEvaluate(e,s,o){const t=this.getContext();await o?.(0);const r=g=>(o?.(.5*g),!0),a=g=>(o?.(50+.5*g),!0);switch(t.setSensitiveData(e,s.csvDataParameters),s.mode){case R.Unseeded:this.generateUnseeded(s,r);break;case R.RowSeeded:this.generateRowSeeded(s,r);break;case R.ValueSeeded:this.generateValueSeeded(s,r);break;case R.AggregateSeeded:this.generateAggregateSeeded(s,r);break;case R.DP:this.generateDp(s,r);break}t.evaluate(s.reportingLength,a)}async navigate(){return this.getContext().navigate()}async selectAttributes(e){this.getContext().selectAttributes(e)}async attributesIntersectionsByColumn(e){return this.getContext().attributesIntersectionsByColumn(e)}async getAggregateResult(e,s,o){const t=this.getContext();switch(e){case J.Sensitive:return t.sensitiveAggregateResultToJs(s,o);case J.Aggregated:return t.reportableAggregateResultToJs(s,o);case J.Synthetic:return t.syntheticAggregateResultToJs(s,o)}}async getGenerateResult(e,s=!1){return this.getContext().generateResultToJs(e,s)}async getEvaluateResult(){return this.getContext().evaluateResultToJs()}async getNavigateResult(){return this.getContext().navigateResultToJs()}generateUnseeded(e,s){this.getContext().generateUnseeded(e.baseSynthesisParameters,s)}generateRowSeeded(e,s){this.getContext().generateRowSeeded(e.baseSynthesisParameters,s)}generateValueSeeded(e,s){this.getContext().generateValueSeeded(e.baseSynthesisParameters,e.reportingLength,e.oversampling,s)}generateAggregateSeeded(e,s){this.getContext().generateAggregateSeeded(e.baseSynthesisParameters,e.reportingLength,e.useSyntheticCounts,e.weightSelectionPercentile,s)}generateDp(e,s){this.getContext().generateDp(e.baseSynthesisParameters,e.reportingLength,e.dpParameters,e.noiseThreshold,e.useSyntheticCounts,e.weightSelectionPercentile,s)}}M(be)})();
//# sourceMappingURL=WasmSynthesizer.eaf70b07.js.map