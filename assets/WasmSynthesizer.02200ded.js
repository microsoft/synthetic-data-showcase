var le=Object.defineProperty;var de=(S,h,A)=>h in S?le(S,h,{enumerable:!0,configurable:!0,writable:!0,value:A}):S[h]=A;var H=(S,h,A)=>(de(S,typeof h!="symbol"?h+"":h,A),A);(function(){"use strict";const S=Symbol("Comlink.proxy"),h=Symbol("Comlink.endpoint"),A=Symbol("Comlink.releaseProxy"),W=Symbol("Comlink.thrown"),z=n=>typeof n=="object"&&n!==null||typeof n=="function",K={canHandle:n=>z(n)&&n[S],serialize(n){const{port1:e,port2:a}=new MessageChannel;return N(n,e),[a,[a]]},deserialize(n){return n.start(),ee(n)}},Q={canHandle:n=>z(n)&&W in n,serialize({value:n}){let e;return n instanceof Error?e={isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:e={isError:!1,value:n},[e,[]]},deserialize(n){throw n.isError?Object.assign(new Error(n.value.message),n.value):n.value}},B=new Map([["proxy",K],["throw",Q]]);function N(n,e=self){e.addEventListener("message",function a(o){if(!o||!o.data)return;const{id:t,type:r,path:s}=Object.assign({path:[]},o.data),g=(o.data.argumentList||[]).map(R);let _;try{const f=s.slice(0,-1).reduce((l,F)=>l[F],n),p=s.reduce((l,F)=>l[F],n);switch(r){case"GET":_=p;break;case"SET":f[s.slice(-1)[0]]=R(o.data.value),_=!0;break;case"APPLY":_=p.apply(f,g);break;case"CONSTRUCT":{const l=new p(...g);_=re(l)}break;case"ENDPOINT":{const{port1:l,port2:F}=new MessageChannel;N(n,F),_=ne(l,[l])}break;case"RELEASE":_=void 0;break;default:return}}catch(f){_={value:f,[W]:0}}Promise.resolve(_).catch(f=>({value:f,[W]:0})).then(f=>{const[p,l]=I(f);e.postMessage(Object.assign(Object.assign({},p),{id:t}),l),r==="RELEASE"&&(e.removeEventListener("message",a),$(e))})}),e.start&&e.start()}function Z(n){return n.constructor.name==="MessagePort"}function $(n){Z(n)&&n.close()}function ee(n,e){return V(n,[],e)}function j(n){if(n)throw new Error("Proxy has been released and is not useable")}function V(n,e=[],a=function(){}){let o=!1;const t=new Proxy(a,{get(r,s){if(j(o),s===A)return()=>T(n,{type:"RELEASE",path:e.map(g=>g.toString())}).then(()=>{$(n),o=!0});if(s==="then"){if(e.length===0)return{then:()=>t};const g=T(n,{type:"GET",path:e.map(_=>_.toString())}).then(R);return g.then.bind(g)}return V(n,[...e,s])},set(r,s,g){j(o);const[_,f]=I(g);return T(n,{type:"SET",path:[...e,s].map(p=>p.toString()),value:_},f).then(R)},apply(r,s,g){j(o);const _=e[e.length-1];if(_===h)return T(n,{type:"ENDPOINT"}).then(R);if(_==="bind")return V(n,e.slice(0,-1));const[f,p]=q(g);return T(n,{type:"APPLY",path:e.map(l=>l.toString()),argumentList:f},p).then(R)},construct(r,s){j(o);const[g,_]=q(s);return T(n,{type:"CONSTRUCT",path:e.map(f=>f.toString()),argumentList:g},_).then(R)}});return t}function te(n){return Array.prototype.concat.apply([],n)}function q(n){const e=n.map(I);return[e.map(a=>a[0]),te(e.map(a=>a[1]))]}const G=new WeakMap;function ne(n,e){return G.set(n,e),n}function re(n){return Object.assign(n,{[S]:!0})}function I(n){for(const[e,a]of B)if(a.canHandle(n)){const[o,t]=a.serialize(n);return[{type:"HANDLER",name:e,value:o},t]}return[{type:"RAW",value:n},G.get(n)||[]]}function R(n){switch(n.type){case"HANDLER":return B.get(n.name).deserialize(n.value);case"RAW":return n.value}}function T(n,e,a){return new Promise(o=>{const t=ae();n.addEventListener("message",function r(s){!s.data||!s.data.id||s.data.id!==t||(n.removeEventListener("message",r),o(s.data))}),n.start&&n.start(),n.postMessage(Object.assign({id:t},e),a)})}function ae(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}let u,Y=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});Y.decode();let O=null;function C(){return(O===null||O.buffer!==u.memory.buffer)&&(O=new Uint8Array(u.memory.buffer)),O}function E(n,e){return Y.decode(C().subarray(n,n+e))}const y=new Array(32).fill(void 0);y.push(void 0,null,!0,!1);let k=y.length;function i(n){k===y.length&&y.push(y.length+1);const e=k;return k=y[e],y[e]=n,e}function c(n){return y[n]}function se(n){n<36||(y[n]=k,k=n)}function w(n){const e=c(n);return se(n),e}let d=0,L=new TextEncoder("utf-8");const oe=typeof L.encodeInto=="function"?function(n,e){return L.encodeInto(n,e)}:function(n,e){const a=L.encode(n);return e.set(a),{read:n.length,written:a.length}};function m(n,e,a){if(a===void 0){const g=L.encode(n),_=e(g.length);return C().subarray(_,_+g.length).set(g),d=g.length,_}let o=n.length,t=e(o);const r=C();let s=0;for(;s<o;s++){const g=n.charCodeAt(s);if(g>127)break;r[t+s]=g}if(s!==o){s!==0&&(n=n.slice(s)),t=a(t,o,o=s+n.length*3);const g=C().subarray(t+s,t+o);s+=oe(n,g).written}return d=s,t}function v(n){return n==null}let J=null;function x(){return(J===null||J.buffer!==u.memory.buffer)&&(J=new Int32Array(u.memory.buffer)),J}function D(n){const e=typeof n;if(e=="number"||e=="boolean"||n==null)return`${n}`;if(e=="string")return`"${n}"`;if(e=="symbol"){const t=n.description;return t==null?"Symbol":`Symbol(${t})`}if(e=="function"){const t=n.name;return typeof t=="string"&&t.length>0?`Function(${t})`:"Function"}if(Array.isArray(n)){const t=n.length;let r="[";t>0&&(r+=D(n[0]));for(let s=1;s<t;s++)r+=", "+D(n[s]);return r+="]",r}const a=/\[object ([^\]]+)\]/.exec(toString.call(n));let o;if(a.length>1)o=a[1];else return toString.call(n);if(o=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:o}function ie(n){var e=m(n,u.__wbindgen_malloc,u.__wbindgen_realloc),a=d,o=u.init_logger(e,a);return o!==0}function b(n,e){try{return n.apply(this,e)}catch(a){u.__wbindgen_exn_store(i(a))}}function ce(n,e){return C().subarray(n/1,n/1+e)}class U{static __wrap(e){const a=Object.create(U.prototype);return a.ptr=e,a}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();u.__wbg_wasmsdscontext_free(e)}constructor(){var e=u.wasmsdscontext_default();return U.__wrap(e)}clear(){u.wasmsdscontext_clear(this.ptr)}setSensitiveData(e,a){var o=m(e,u.__wbindgen_malloc,u.__wbindgen_realloc),t=d;u.wasmsdscontext_setSensitiveData(this.ptr,o,t,i(a))}sensitiveAggregateStatistics(e,a,o){var t=u.wasmsdscontext_sensitiveAggregateStatistics(this.ptr,e,a,i(o));return w(t)}generateUnseeded(e,a){u.wasmsdscontext_generateUnseeded(this.ptr,i(e),i(a))}generateRowSeeded(e,a){u.wasmsdscontext_generateRowSeeded(this.ptr,i(e),i(a))}generateValueSeeded(e,a,o,t){u.wasmsdscontext_generateValueSeeded(this.ptr,i(e),a,v(o)?0:i(o),i(t))}generateAggregateSeeded(e,a,o,t,r){u.wasmsdscontext_generateAggregateSeeded(this.ptr,i(e),a,o,!v(t),v(t)?0:t,i(r))}generateDp(e,a,o,t,r,s,g){u.wasmsdscontext_generateDp(this.ptr,i(e),a,i(o),i(t),r,!v(s),v(s)?0:s,i(g))}evaluate(e,a){u.wasmsdscontext_evaluate(this.ptr,e,i(a))}navigate(){u.wasmsdscontext_navigate(this.ptr)}selectAttributes(e){u.wasmsdscontext_selectAttributes(this.ptr,i(e))}attributesIntersectionsByColumn(e){var a=u.wasmsdscontext_attributesIntersectionsByColumn(this.ptr,i(e));return w(a)}generateResultToJs(e,a){var o=u.wasmsdscontext_generateResultToJs(this.ptr,e,a);return w(o)}evaluateResultToJs(){var e=u.wasmsdscontext_evaluateResultToJs(this.ptr);return w(e)}sensitiveAggregateResultToJs(e,a,o){var t=m(a,u.__wbindgen_malloc,u.__wbindgen_realloc),r=d,s=u.wasmsdscontext_sensitiveAggregateResultToJs(this.ptr,e.codePointAt(0),t,r,v(o)?16777215:o?1:0);return w(s)}reportableAggregateResultToJs(e,a,o){var t=m(a,u.__wbindgen_malloc,u.__wbindgen_realloc),r=d,s=u.wasmsdscontext_reportableAggregateResultToJs(this.ptr,e.codePointAt(0),t,r,v(o)?16777215:o?1:0);return w(s)}syntheticAggregateResultToJs(e,a,o){var t=m(a,u.__wbindgen_malloc,u.__wbindgen_realloc),r=d,s=u.wasmsdscontext_syntheticAggregateResultToJs(this.ptr,e.codePointAt(0),t,r,v(o)?16777215:o?1:0);return w(s)}navigateResultToJs(){var e=u.wasmsdscontext_navigateResultToJs(this.ptr);return w(e)}}async function ue(n,e){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,e)}catch(o){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",o);else throw o}const a=await n.arrayBuffer();return await WebAssembly.instantiate(a,e)}else{const a=await WebAssembly.instantiate(n,e);return a instanceof WebAssembly.Instance?{instance:a,module:n}:a}}async function X(n){typeof n>"u"&&(n=new URL("/synthetic-data-showcase/assets/sds_wasm_bg.7c267379.wasm",self.location));const e={};e.wbg={},e.wbg.__wbindgen_string_new=function(t,r){var s=E(t,r);return i(s)},e.wbg.__wbindgen_json_parse=function(t,r){var s=JSON.parse(E(t,r));return i(s)},e.wbg.__wbindgen_object_drop_ref=function(t){w(t)},e.wbg.__wbindgen_is_function=function(t){var r=typeof c(t)=="function";return r},e.wbg.__wbindgen_string_get=function(t,r){const s=c(r);var g=typeof s=="string"?s:void 0,_=v(g)?0:m(g,u.__wbindgen_malloc,u.__wbindgen_realloc),f=d;x()[t/4+1]=f,x()[t/4+0]=_},e.wbg.__wbindgen_json_serialize=function(t,r){const s=c(r);var g=JSON.stringify(s===void 0?null:s),_=m(g,u.__wbindgen_malloc,u.__wbindgen_realloc),f=d;x()[t/4+1]=f,x()[t/4+0]=_},e.wbg.__wbindgen_number_new=function(t){var r=t;return i(r)},e.wbg.__wbindgen_bigint_new=function(t,r){var s=BigInt(E(t,r));return i(s)},e.wbg.__wbindgen_boolean_get=function(t){const r=c(t);var s=typeof r=="boolean"?r?1:0:2;return s},e.wbg.__wbg_new_693216e109162396=function(){var t=new Error;return i(t)},e.wbg.__wbg_stack_0ddaca5d1abfb52f=function(t,r){var s=c(r).stack,g=m(s,u.__wbindgen_malloc,u.__wbindgen_realloc),_=d;x()[t/4+1]=_,x()[t/4+0]=g},e.wbg.__wbg_error_09919627ac0992f5=function(t,r){try{console.error(E(t,r))}finally{u.__wbindgen_free(t,r)}},e.wbg.__wbg_log_3445347661d4505e=function(t){console.log(c(t))},e.wbg.__wbg_now_559193109055ebad=function(t){var r=c(t).now();return r},e.wbg.__wbg_randomFillSync_64cc7d048f228ca8=function(){return b(function(t,r,s){c(t).randomFillSync(ce(r,s))},arguments)},e.wbg.__wbg_getRandomValues_98117e9a7e993920=function(){return b(function(t,r){c(t).getRandomValues(c(r))},arguments)},e.wbg.__wbg_process_2f24d6544ea7b200=function(t){var r=c(t).process;return i(r)},e.wbg.__wbindgen_is_object=function(t){const r=c(t);var s=typeof r=="object"&&r!==null;return s},e.wbg.__wbg_versions_6164651e75405d4a=function(t){var r=c(t).versions;return i(r)},e.wbg.__wbg_node_4b517d861cbcb3bc=function(t){var r=c(t).node;return i(r)},e.wbg.__wbindgen_is_string=function(t){var r=typeof c(t)=="string";return r},e.wbg.__wbg_modulerequire_3440a4bcf44437db=function(){return b(function(t,r){var s=o.require(E(t,r));return i(s)},arguments)},e.wbg.__wbg_crypto_98fc271021c7d2ad=function(t){var r=c(t).crypto;return i(r)},e.wbg.__wbg_msCrypto_a2cdb043d2bfe57f=function(t){var r=c(t).msCrypto;return i(r)},e.wbg.__wbg_get_67189fe0b323d288=function(t,r){var s=c(t)[r>>>0];return i(s)},e.wbg.__wbg_new_949bbc1147195c4e=function(){var t=new Array;return i(t)},e.wbg.__wbg_newnoargs_be86524d73f67598=function(t,r){var s=new Function(E(t,r));return i(s)},e.wbg.__wbg_next_7720502039b96d00=function(){return b(function(t){var r=c(t).next();return i(r)},arguments)},e.wbg.__wbg_done_b06cf0578e89ff68=function(t){var r=c(t).done;return r},e.wbg.__wbg_value_e74a542443d92451=function(t){var r=c(t).value;return i(r)},e.wbg.__wbg_get_4d0f21c2f823742e=function(){return b(function(t,r){var s=Reflect.get(c(t),c(r));return i(s)},arguments)},e.wbg.__wbg_call_888d259a5fefc347=function(){return b(function(t,r){var s=c(t).call(c(r));return i(s)},arguments)},e.wbg.__wbg_new_0b83d3df67ecb33e=function(){var t=new Object;return i(t)},e.wbg.__wbindgen_object_clone_ref=function(t){var r=c(t);return i(r)},e.wbg.__wbg_self_c6fbdfc2918d5e58=function(){return b(function(){var t=self.self;return i(t)},arguments)},e.wbg.__wbg_window_baec038b5ab35c54=function(){return b(function(){var t=window.window;return i(t)},arguments)},e.wbg.__wbg_globalThis_3f735a5746d41fbd=function(){return b(function(){var t=globalThis.globalThis;return i(t)},arguments)},e.wbg.__wbg_global_1bc0b39582740e95=function(){return b(function(){var t=global.global;return i(t)},arguments)},e.wbg.__wbindgen_is_undefined=function(t){var r=c(t)===void 0;return r},e.wbg.__wbg_isArray_eb7ad55f2da67dde=function(t){var r=Array.isArray(c(t));return r},e.wbg.__wbg_push_284486ca27c6aa8b=function(t,r){var s=c(t).push(c(r));return s},e.wbg.__wbg_values_364ae56c608e6824=function(t){var r=c(t).values();return i(r)},e.wbg.__wbg_call_346669c262382ad7=function(){return b(function(t,r,s){var g=c(t).call(c(r),c(s));return i(g)},arguments)},e.wbg.__wbg_instanceof_Object_66786225e0dbc8ba=function(t){var r=c(t)instanceof Object;return r},e.wbg.__wbg_entries_aadf9c3f38203a12=function(t){var r=Object.entries(c(t));return i(r)},e.wbg.__wbg_instanceof_Set_cc7c664ae80b00ae=function(t){var r=c(t)instanceof Set;return r},e.wbg.__wbg_keys_dad0044163aa4376=function(t){var r=c(t).keys();return i(r)},e.wbg.__wbg_buffer_397eaa4d72ee94dd=function(t){var r=c(t).buffer;return i(r)},e.wbg.__wbg_new_a7ce447f15ff496f=function(t){var r=new Uint8Array(c(t));return i(r)},e.wbg.__wbg_set_969ad0a60e51d320=function(t,r,s){c(t).set(c(r),s>>>0)},e.wbg.__wbg_length_1eb8fc608a0d4cdb=function(t){var r=c(t).length;return r},e.wbg.__wbg_newwithlength_929232475839a482=function(t){var r=new Uint8Array(t>>>0);return i(r)},e.wbg.__wbg_subarray_8b658422a224f479=function(t,r,s){var g=c(t).subarray(r>>>0,s>>>0);return i(g)},e.wbg.__wbg_set_82a4e8a85e31ac42=function(){return b(function(t,r,s){var g=Reflect.set(c(t),c(r),c(s));return g},arguments)},e.wbg.__wbindgen_debug_string=function(t,r){var s=D(c(r)),g=m(s,u.__wbindgen_malloc,u.__wbindgen_realloc),_=d;x()[t/4+1]=_,x()[t/4+0]=g},e.wbg.__wbindgen_throw=function(t,r){throw new Error(E(t,r))},e.wbg.__wbindgen_rethrow=function(t){throw w(t)},e.wbg.__wbindgen_memory=function(){var t=u.memory;return i(t)},(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:a,module:o}=await ue(await n,e);return u=a.exports,X.__wbindgen_wasm_module=o,u}var ge="/synthetic-data-showcase/assets/sds_wasm_bg.7c267379.wasm";/*!
 * Copyright (c) Microsoft. All rights reserved.
 * Licensed under the MIT license. See LICENSE file in the project.
 */function _e(){return"warn"}/*!
 * Copyright (c) Microsoft. All rights reserved.
 * Licensed under the MIT license. See LICENSE file in the project.
 */class fe{constructor(e){H(this,"_context");H(this,"_name");this._context=null,this._name=e}async init(){await X(ge),ie(_e()),this._context=new U}async terminate(){this._context?.free()}getContext(){if(this._context===null)throw new Error(`"${this._name}" worker has not been properly initialized, did you call init?`);return this._context}}/*!
 * Copyright (c) Microsoft. All rights reserved.
 * Licensed under the MIT license. See LICENSE file in the project.
 */var M=(n=>(n.Sensitive="sensitive",n.Aggregated="aggregate",n.Synthetic="synthetic",n))(M||{});/*!
 * Copyright (c) Microsoft. All rights reserved.
 * Licensed under the MIT license. See LICENSE file in the project.
 */var P=(n=>(n.Unseeded="Unseeded",n.RowSeeded="Row Seeded",n.ValueSeeded="Value Seeded",n.AggregateSeeded="Aggregate Seeded",n.DP="Differential Privacy",n))(P||{});/*!
 * Copyright (c) Microsoft. All rights reserved.
 * Licensed under the MIT license. See LICENSE file in the project.
 */class be extends fe{async generateAndEvaluate(e,a,o){const t=this.getContext();await o?.(0);const r=g=>(o?.(.5*g),!0),s=g=>(o?.(50+.5*g),!0);switch(t.setSensitiveData(e,a.csvDataParameters),a.mode){case P.Unseeded:this.generateUnseeded(a,r);break;case P.RowSeeded:this.generateRowSeeded(a,r);break;case P.ValueSeeded:this.generateValueSeeded(a,r);break;case P.AggregateSeeded:this.generateAggregateSeeded(a,r);break;case P.DP:this.generateDp(a,r);break}t.evaluate(a.reportingLength,s)}async navigate(){return this.getContext().navigate()}async selectAttributes(e){this.getContext().selectAttributes(e)}async attributesIntersectionsByColumn(e){return this.getContext().attributesIntersectionsByColumn(e)}async getAggregateResult(e,a,o,t=!1){const r=this.getContext();switch(e){case M.Sensitive:return r.sensitiveAggregateResultToJs(a,o,t);case M.Aggregated:return r.reportableAggregateResultToJs(a,o,t);case M.Synthetic:return r.syntheticAggregateResultToJs(a,o,t)}}async getGenerateResult(e,a=!1){return this.getContext().generateResultToJs(e,a)}async getEvaluateResult(){return this.getContext().evaluateResultToJs()}async getNavigateResult(){return this.getContext().navigateResultToJs()}generateUnseeded(e,a){this.getContext().generateUnseeded(e.baseSynthesisParameters,a)}generateRowSeeded(e,a){this.getContext().generateRowSeeded(e.baseSynthesisParameters,a)}generateValueSeeded(e,a){this.getContext().generateValueSeeded(e.baseSynthesisParameters,e.reportingLength,e.oversampling,a)}generateAggregateSeeded(e,a){this.getContext().generateAggregateSeeded(e.baseSynthesisParameters,e.reportingLength,e.useSyntheticCounts,e.weightSelectionPercentile,a)}generateDp(e,a){this.getContext().generateDp(e.baseSynthesisParameters,e.reportingLength,e.dpParameters,e.noiseThreshold,e.useSyntheticCounts,e.weightSelectionPercentile,a)}}N(be)})();
//# sourceMappingURL=WasmSynthesizer.02200ded.js.map