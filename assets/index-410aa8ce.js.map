{"version":3,"file":"index-410aa8ce.js","sources":["../../src/pages/Select/AggregateStatistics/AggregateStatistics.hooks.ts","../../src/pages/Select/AggregateStatistics/AggregateStatistics.styles.ts","../../src/pages/Select/AggregateStatistics/ContributionChart.styles.ts","../../src/pages/Select/AggregateStatistics/ContributionChart.tsx","../../src/pages/Select/AggregateStatistics/AggregateStatistics.tsx","../../src/pages/Select/InfoBar/InfoBar.tsx","../../src/pages/Select/SelectCommands/AggregationControls/AggregationControls.tsx","../../src/pages/Select/SelectCommands/MultiValueColumns/MultiValueColumns.tsx","../../src/pages/Select/SelectCommands/SelectColumns/SelectColumns.hooks.ts","../../src/pages/Select/SelectCommands/SelectColumns/SelectColumns.tsx","../../src/pages/Select/SelectCommands/SensitiveZeros/SensitiveZeros.hooks.tsx","../../src/pages/Select/SelectCommands/SensitiveZeros/SensitiveZeros.tsx","../../src/pages/Select/SelectCommands/SubjectId/SubjectId.tsx","../../src/pages/Select/SelectCommands/SelectCommands.tsx","../../src/pages/Select/TablePreview/TablePreview.tsx","../../src/pages/Select/SelectPage.tsx"],"sourcesContent":["/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { IAggregateStatistics } from '@essex/sds-core'\nimport type { Remote } from 'comlink'\nimport { useCallback } from 'react'\n\nimport type { ICsvContent } from '~models'\nimport { useSdsManagerInstance, useSensitiveContent } from '~states'\nimport { usableHeaders, usableMultiValueColumns } from '~utils'\nimport type { ICancelablePromise } from '~workers/types'\n\nexport function useGetAggregateStatistics(): (\n\tsensitiveContent: ICsvContent,\n\trecordLimit: number,\n\treportingLength: number,\n\tresolution: number,\n) => Promise<\n\tRemote<ICancelablePromise<IAggregateStatistics | null>> | undefined\n> {\n\tconst [managerInstance] = useSdsManagerInstance()\n\n\treturn useCallback(\n\t\tasync (\n\t\t\tsensitiveContent: ICsvContent,\n\t\t\trecordLimit: number,\n\t\t\treportingLength: number,\n\t\t\tresolution: number,\n\t\t) => {\n\t\t\tif (managerInstance) {\n\t\t\t\tconst headers = usableHeaders(sensitiveContent).map(h => h.name)\n\t\t\t\tconst instance = await managerInstance.instance\n\n\t\t\t\treturn instance.generateAggregateStatistics(\n\t\t\t\t\tsensitiveContent.table.toCSV({\n\t\t\t\t\t\tdelimiter: sensitiveContent.delimiter,\n\t\t\t\t\t}),\n\t\t\t\t\t{\n\t\t\t\t\t\tdelimiter: sensitiveContent.delimiter,\n\t\t\t\t\t\tsubjectId: sensitiveContent.subjectId,\n\t\t\t\t\t\tuseColumns: headers,\n\t\t\t\t\t\tsensitiveZeros: sensitiveContent.headers\n\t\t\t\t\t\t\t.filter(h => h.hasSensitiveZeros)\n\t\t\t\t\t\t\t.map(h => h.name),\n\t\t\t\t\t\trecordLimit,\n\t\t\t\t\t\tmultiValueColumns: usableMultiValueColumns(sensitiveContent),\n\t\t\t\t\t},\n\t\t\t\t\treportingLength,\n\t\t\t\t\tresolution,\n\t\t\t\t)\n\t\t\t}\n\t\t},\n\t\t[managerInstance],\n\t)\n}\n\nexport function useOnRemoveColumn(): (column: string) => void {\n\tconst [sensitiveContent, setSensitiveContent] = useSensitiveContent()\n\n\treturn useCallback(\n\t\tcolumn => {\n\t\t\tconst index = sensitiveContent.headers.findIndex(h => h.name === column)\n\n\t\t\tif (index >= 0) {\n\t\t\t\tsetSensitiveContent(previous => ({\n\t\t\t\t\t...previous,\n\t\t\t\t\theaders: [\n\t\t\t\t\t\t...previous.headers.slice(0, index),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...previous.headers[index],\n\t\t\t\t\t\t\tuse: !previous.headers[index].use,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t...previous.headers.slice(index + 1),\n\t\t\t\t\t],\n\t\t\t\t}))\n\t\t\t}\n\t\t},\n\t\t[sensitiveContent, setSensitiveContent],\n\t)\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { FlexContainer, FlexItem } from '@sds/components'\nimport styled from 'styled-components'\n\nexport const Container = styled(FlexContainer)`\n\twidth: 100%;\n\tpadding: ${p => p.theme.spacing.m};\n\tfont-size: ${p => p.theme.fonts.large.fontSize};\n`\n\nexport const StyledReport = styled.div`\n\tmargin-bottom: ${p => p.theme.spacing.m};\n\ttext-align: center;\n`\n\nexport const ChartsContainer = styled(FlexContainer)`\n\twidth: 100%;\n`\n\nexport const ChartItem = styled(FlexItem)`\n\twidth: calc(50% - ${p => p.theme.spacing.s1});\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { FlexItem } from '@sds/components'\nimport styled from 'styled-components'\n\nexport const ChartContainer = styled(FlexItem)`\n\toverflow-y: auto;\n\toverflow-x: hidden;\n\tpadding: ${p => p.theme.spacing.s1};\n\tdirection: ltr;\n\t& > div {\n\t\tdirection: ltr;\n\t}\n\t&::-webkit-scrollbar {\n\t\twidth: 4px;\n\t\tbackground: ${p => p.theme.palette.neutralLight};\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color: ${p => p.theme.palette.themePrimary};\n\t\tborder-radius: 20px;\n\t}\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { FlexContainer, FlexItem } from '@sds/components'\nimport { useThematic } from '@thematic/react'\nimport type { Plugin } from 'chart.js'\nimport ChartDataLabels from 'chartjs-plugin-datalabels'\nimport _ from 'lodash'\nimport type { FC } from 'react'\nimport { memo, useCallback, useMemo } from 'react'\nimport { Bar } from 'react-chartjs-2'\n\nimport { useNominalBoldScale, useNominalScale } from '~utils'\n\nimport { ChartContainer } from './ContributionChart.styles.js'\nimport type { ContributionChartProps } from './ContributionChart.types.js'\n\nexport const ContributionChart: FC<ContributionChartProps> = memo(\n\tfunction ContributionChart({\n\t\tselectedKey,\n\t\tvaluePerKey,\n\t\tlabel,\n\t\tcontainerHeight,\n\t\tbarHeight,\n\t\ttooltipFormatter,\n\t\tonClick,\n\t}) {\n\t\tconst labels = useMemo(\n\t\t\t() =>\n\t\t\t\t_(valuePerKey)\n\t\t\t\t\t.keys()\n\t\t\t\t\t.sortBy(k => -valuePerKey[k])\n\t\t\t\t\t.value(),\n\t\t\t[valuePerKey],\n\t\t)\n\t\tconst data = useMemo(\n\t\t\t() => labels.map(k => valuePerKey[k].toFixed(2)),\n\t\t\t[labels, valuePerKey],\n\t\t)\n\t\tconst handleClick = useCallback(\n\t\t\t(evt, elements, chart) => {\n\t\t\t\t// either bar click fires off the same item\n\t\t\t\tconst clicked = elements && elements[0]\n\t\t\t\tconst key = clicked ? labels[clicked.index] : undefined\n\t\t\t\t// only triggers the event if we clicked a bar\n\t\t\t\tkey && onClick?.(key)\n\t\t\t},\n\t\t\t[labels, onClick],\n\t\t)\n\t\tconst thematic = useThematic()\n\t\tconst nominalScale = useNominalScale()\n\t\tconst nominalBoldScale = useNominalBoldScale()\n\t\tconst backgroundColor = useMemo(() => {\n\t\t\tconst normalColor = nominalScale[0]\n\t\t\tconst selectedColor = nominalBoldScale[0]\n\n\t\t\treturn labels.map(l => (l === selectedKey ? selectedColor : normalColor))\n\t\t}, [labels, nominalScale, nominalBoldScale, selectedKey])\n\t\tconst labelColors = useMemo(() => {\n\t\t\tconst greys = thematic.scales().greys().toArray()\n\n\t\t\treturn labels.map(l => (selectedKey === l ? greys[0] : greys[80]))\n\t\t}, [labels, thematic, selectedKey])\n\n\t\treturn (\n\t\t\t<FlexContainer vertical justify=\"center\">\n\t\t\t\t<FlexItem align=\"center\">{label}</FlexItem>\n\t\t\t\t<ChartContainer\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tmaxHeight: containerHeight,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\theight: Math.max(barHeight * data.length, barHeight),\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Bar\n\t\t\t\t\t\t\tdata={{\n\t\t\t\t\t\t\t\tlabels: labels,\n\t\t\t\t\t\t\t\tdatasets: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tlabel: label,\n\t\t\t\t\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\t\t\t\t\txAxisID: 'xAxis',\n\t\t\t\t\t\t\t\t\t\tyAxisID: 'yAxis',\n\t\t\t\t\t\t\t\t\t\tbackgroundColor,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tplugins={[\n\t\t\t\t\t\t\t\tChartDataLabels as Plugin<'bar'>,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tid: 'event-catcher',\n\t\t\t\t\t\t\t\t\tbeforeEvent(chart, args, _pluginOptions) {\n\t\t\t\t\t\t\t\t\t\t// on hover at options will not handle well the case\n\t\t\t\t\t\t\t\t\t\t// where the mouse leaves the bar\n\t\t\t\t\t\t\t\t\t\tif (args.event.type === 'mousemove') {\n\t\t\t\t\t\t\t\t\t\t\tconst elements = chart.getActiveElements()\n\t\t\t\t\t\t\t\t\t\t\tchart.canvas.style.cursor =\n\t\t\t\t\t\t\t\t\t\t\t\telements && elements[0] ? 'pointer' : 'default'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\toptions={{\n\t\t\t\t\t\t\t\tresponsive: true,\n\t\t\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\t\t\tplugins: {\n\t\t\t\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\t\t\t\tdisplay: false,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tdatalabels: {\n\t\t\t\t\t\t\t\t\t\tanchor: 'start',\n\t\t\t\t\t\t\t\t\t\talign: 'end',\n\t\t\t\t\t\t\t\t\t\toffset: 5,\n\t\t\t\t\t\t\t\t\t\tformatter: value => `${value} %`,\n\t\t\t\t\t\t\t\t\t\tcolor: labelColors,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\ttooltip: {\n\t\t\t\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\t\t\t\tlabel: tooltipFormatter,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tindexAxis: 'y',\n\t\t\t\t\t\t\t\tscales: {\n\t\t\t\t\t\t\t\t\txAxis: {\n\t\t\t\t\t\t\t\t\t\tdisplay: false,\n\t\t\t\t\t\t\t\t\t\tgrid: {\n\t\t\t\t\t\t\t\t\t\t\tdisplay: false,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tyAxis: {\n\t\t\t\t\t\t\t\t\t\tgrid: {\n\t\t\t\t\t\t\t\t\t\t\tdisplay: false,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tonClick: handleClick,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</ChartContainer>\n\t\t\t</FlexContainer>\n\t\t)\n\t},\n)\nContributionChart.displayName = 'ContributionChart'\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { IAggregateStatistics } from '@essex/sds-core'\nimport { Spinner } from '@fluentui/react'\nimport type { FC } from 'react'\nimport { memo, useCallback, useEffect, useRef, useState } from 'react'\n\nimport {\n\tuseGlobalErrorMessage,\n\tuseRawSynthesisParameters,\n\tuseSdsManagerInstance,\n\tuseSensitiveContent,\n} from '~states'\n\nimport { useGetAggregateStatistics } from './AggregateStatistics.hooks.js'\nimport {\n\tChartItem,\n\tChartsContainer,\n\tContainer,\n\tStyledReport,\n} from './AggregateStatistics.styles.js'\nimport { ContributionChart } from './ContributionChart.js'\n\nexport const AggregateStatistics: FC = memo(function AggregateStatistics() {\n\tconst currentAggregationId = useRef<string | undefined>('')\n\tconst [managerInstance] = useSdsManagerInstance()\n\tconst [sensitiveContent] = useSensitiveContent()\n\tconst [statistics, setStatistics] = useState<IAggregateStatistics | null>(\n\t\tnull,\n\t)\n\tconst [isLoading, setIsLoading] = useState(false)\n\tconst [, setGlobalErrorMessage] = useGlobalErrorMessage()\n\tconst [rawSynthesisParams] = useRawSynthesisParameters()\n\tconst getAggregateStatistics = useGetAggregateStatistics()\n\tconst columnTooltipFormatter = useCallback(\n\t\titem => {\n\t\t\treturn `The attributes of this column make ${statistics?.percentageOfRecordsWithRareCombinationsPerColumn[\n\t\t\t\titem.label\n\t\t\t].toFixed(2)}% of their containing records linkable, on average`\n\t\t},\n\t\t[statistics],\n\t)\n\tconst attributeTooltipFormatter = useCallback(\n\t\titem => {\n\t\t\treturn `This attribute makes ${statistics?.percentageOfRecordsWithRareCombinationsPerAttribute[\n\t\t\t\titem.label\n\t\t\t].toFixed(2)}% of its containing records linkable`\n\t\t},\n\t\t[statistics],\n\t)\n\n\tuseEffect(() => {\n\t\tsetIsLoading(true)\n\t\tsetGlobalErrorMessage(undefined)\n\n\t\tgetAggregateStatistics(\n\t\t\tsensitiveContent,\n\t\t\trawSynthesisParams.recordLimit,\n\t\t\trawSynthesisParams.reportingLength,\n\t\t\trawSynthesisParams.resolution,\n\t\t).then(async aggregateStatisticsGetter => {\n\t\t\tconst id = await aggregateStatisticsGetter?.id\n\n\t\t\tcurrentAggregationId.current = id\n\n\t\t\ttry {\n\t\t\t\tconst result = (await await aggregateStatisticsGetter?.promise) ?? null\n\n\t\t\t\t// only update if this was the last request made\n\t\t\t\tif (id === currentAggregationId.current) {\n\t\t\t\t\tsetStatistics(result)\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tif (currentAggregationId.current !== '') {\n\t\t\t\t\tsetGlobalErrorMessage(err as string)\n\t\t\t\t\tsetStatistics(null)\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (currentAggregationId.current !== '') {\n\t\t\t\t\tsetIsLoading(false)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}, [getAggregateStatistics, sensitiveContent, rawSynthesisParams.recordLimit, rawSynthesisParams.reportingLength, rawSynthesisParams.resolution, setStatistics, setIsLoading, setGlobalErrorMessage])\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\t// cancel any pending execution on unmount\n\t\t\tmanagerInstance?.instance.forceAggregateStatisticsWorkerToTerminate()\n\t\t\tcurrentAggregationId.current = ''\n\t\t}\n\t}, [managerInstance])\n\n\treturn (\n\t\t<Container vertical align=\"center\">\n\t\t\t{isLoading ? (\n\t\t\t\t<Spinner />\n\t\t\t) : statistics && statistics.numberOfRecordsWithRareCombinations > 0 ? (\n\t\t\t\t<>\n\t\t\t\t\t<StyledReport>\n\t\t\t\t\t\t<b>{`Considering all combinations of attributes up to length ${\n\t\t\t\t\t\t\trawSynthesisParams.reportingLength\n\t\t\t\t\t\t} (Aggregation Limit), ${(\n\t\t\t\t\t\t\t(statistics.numberOfRecordsWithRareCombinations * 100.0) /\n\t\t\t\t\t\t\tstatistics.numberOfRecords\n\t\t\t\t\t\t).toFixed(0)}% of subjects (${\n\t\t\t\t\t\t\tstatistics.numberOfRecordsWithRareCombinations\n\t\t\t\t\t\t}/${\n\t\t\t\t\t\t\tstatistics.numberOfRecords\n\t\t\t\t\t\t}) are linkable via rare attribute combinations below ${\n\t\t\t\t\t\t\trawSynthesisParams.resolution\n\t\t\t\t\t\t} (Privacy Resolution)`}</b>\n\t\t\t\t\t</StyledReport>\n\t\t\t\t\t<ChartsContainer justify=\"space-between\">\n\t\t\t\t\t\t<ChartItem>\n\t\t\t\t\t\t\t<ContributionChart\n\t\t\t\t\t\t\t\tvaluePerKey={\n\t\t\t\t\t\t\t\t\tstatistics.percentageOfRecordsWithRareCombinationsPerColumn\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlabel={'Most linkable columns'}\n\t\t\t\t\t\t\t\tcontainerHeight={220}\n\t\t\t\t\t\t\t\tbarHeight={30}\n\t\t\t\t\t\t\t\ttooltipFormatter={columnTooltipFormatter}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ChartItem>\n\t\t\t\t\t\t<ChartItem>\n\t\t\t\t\t\t\t<ContributionChart\n\t\t\t\t\t\t\t\tvaluePerKey={\n\t\t\t\t\t\t\t\t\tstatistics.percentageOfRecordsWithRareCombinationsPerAttribute\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlabel={'Most linkable attributes'}\n\t\t\t\t\t\t\t\tcontainerHeight={220}\n\t\t\t\t\t\t\t\tbarHeight={30}\n\t\t\t\t\t\t\t\ttooltipFormatter={attributeTooltipFormatter}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ChartItem>\n\t\t\t\t\t</ChartsContainer>\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<StyledReport>\n\t\t\t\t\tNo rare attribute combinations (below the privacy resolution) based on\n\t\t\t\t\tthe current parameters\n\t\t\t\t</StyledReport>\n\t\t\t)}\n\t\t</Container>\n\t)\n})\nAggregateStatistics.displayName = 'AggregateStatistics'\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { FlexContainer } from '@sds/components'\nimport type { FC } from 'react'\nimport { memo, useMemo } from 'react'\nimport styled from 'styled-components'\n\nimport { useSensitiveContent } from '~states'\n\nexport const InfoBar: FC = memo(function InfoBar() {\n\tconst [sensitiveContent] = useSensitiveContent()\n\n\tconst stats = useMemo(() => {\n\t\tconst subjectId = sensitiveContent.subjectId\n\t\tconst rowCount = sensitiveContent.table.numRows()\n\t\tconst data = sensitiveContent.headers.reduce(\n\t\t\t(acc, cur) => {\n\t\t\t\tconst colStats = sensitiveContent.metadata?.columns[cur.name]\n\t\t\t\tif (cur.use && colStats && cur.name !== subjectId) {\n\t\t\t\t\tacc.count += 1\n\t\t\t\t\tacc.unique += colStats.stats?.distinct ?? 0\n\t\t\t\t\tacc.combinations *= colStats.stats?.distinct ?? 1\n\t\t\t\t}\n\n\t\t\t\treturn acc\n\t\t\t},\n\t\t\t{ count: 0, unique: 0, combinations: 1 },\n\t\t)\n\n\t\tif (data.count) {\n\t\t\treturn `${data.count} columns and ${rowCount} records.` // with ${data.combinations} maximum possible combimations`\n\t\t} else {\n\t\t\treturn '0 columns selected'\n\t\t}\n\t}, [sensitiveContent])\n\n\treturn <Container justify=\"center\">{stats}</Container>\n})\nInfoBar.displayName = 'InfoBar'\n\nconst Container = styled(FlexContainer)`\n\tpadding: ${p => p.theme.spacing.m};\n\tfont-size: ${p => p.theme.fonts.large.fontSize};\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { Position, SpinButton } from '@fluentui/react'\nimport { FlexContainer } from '@sds/components'\nimport type { FC } from 'react'\nimport { memo } from 'react'\nimport styled from 'styled-components'\n\nimport {\n\tuseRawSynthesisParameters,\n\tuseRawSynthesisParametersPropertySetter,\n} from '../../../../states/rawSynthesisParameters.js'\nimport { useSpinButtonOnChange } from '../../../hooks/index.js'\n\nexport const AggregationControls: FC = memo(function SelectCommand() {\n\tconst [rawSynthesisParams] = useRawSynthesisParameters()\n\tconst handleResolutionChange = useSpinButtonOnChange(\n\t\tuseRawSynthesisParametersPropertySetter('resolution'),\n\t)\n\tconst handleReportingLengthChange = useSpinButtonOnChange(\n\t\tuseRawSynthesisParametersPropertySetter('reportingLength'),\n\t)\n\n\treturn (\n\t\t<FlexContainer align=\"center\">\n\t\t\t<Action>Privacy Resolution</Action>\n\t\t\t<StyledSpinButton\n\t\t\t\tlabelPosition={Position.top}\n\t\t\t\tmin={1}\n\t\t\t\tstep={1}\n\t\t\t\tvalue={rawSynthesisParams.resolution.toString()}\n\t\t\t\tonChange={handleResolutionChange}\n\t\t\t/>\n\t\t\t<Action>Aggregation Limit</Action>\n\t\t\t<StyledSpinButton\n\t\t\t\tlabelPosition={Position.top}\n\t\t\t\tmin={1}\n\t\t\t\tstep={1}\n\t\t\t\tvalue={rawSynthesisParams.reportingLength.toString()}\n\t\t\t\tonChange={handleReportingLengthChange}\n\t\t\t/>\n\t\t</FlexContainer>\n\t)\n})\nAggregationControls.displayName = 'AggregationControls'\n\nexport const StyledSpinButton = styled(SpinButton)`\n\twidth: 60px;\n`\n\nconst Action = styled.span`\n\tfont-size: ${p => p.theme.fonts.mediumPlus.fontSize};\n\tletter-spacing: 1.25px;\n\tpadding: ${p => p.theme.spacing.m};\n\tcolor: ${p => p.theme.palette.themePrimary};\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { Callout, Checkbox, DirectionalHint, Label } from '@fluentui/react'\nimport { useBoolean, useId } from '@fluentui/react-hooks'\nimport { FlexContainer } from '@sds/components'\nimport type { ChangeEvent, FC } from 'react'\nimport { memo, useCallback, useMemo, useState } from 'react'\nimport styled from 'styled-components'\n\nimport { useSensitiveContent } from '~states'\n\nexport const MultiValueColumns: FC = memo(function MultiValueColumns() {\n\tconst [isCalloutVisible, { toggle: toggleIsCalloutVisible }] =\n\t\tuseBoolean(false)\n\tconst actionId = useId('multi-value-columns')\n\tconst [defaultDelimiter, setDefaultDelimiter] = useState(';')\n\tconst [sensitiveContent, setSensitiveContent] = useSensitiveContent()\n\n\tconst updateDefaultDelimiter = useCallback(\n\t\t(event: ChangeEvent<HTMLInputElement>) => {\n\t\t\tsetDefaultDelimiter(event.target.value ?? ';')\n\t\t},\n\t\t[setDefaultDelimiter],\n\t)\n\n\tconst selectedStringColumns = useMemo(() => {\n\t\treturn sensitiveContent.headers\n\t\t\t.filter(header => {\n\t\t\t\treturn (\n\t\t\t\t\theader.name !== sensitiveContent.subjectId &&\n\t\t\t\t\theader.use &&\n\t\t\t\t\tsensitiveContent.metadata?.columns[header.name].type === 'string'\n\t\t\t\t)\n\t\t\t})\n\t\t\t.map(h => h.name)\n\t}, [sensitiveContent])\n\n\tconst toggleCallout = useCallback(() => {\n\t\tif (!selectedStringColumns.length) return\n\t\ttoggleIsCalloutVisible()\n\t}, [selectedStringColumns, toggleIsCalloutVisible])\n\n\tconst actionClass = useMemo(() => {\n\t\treturn selectedStringColumns.length ? '' : 'disabled'\n\t}, [selectedStringColumns])\n\n\tconst handleDelimiterUpdate = useCallback(\n\t\t(index: number, delimter: string | null) => {\n\t\t\tsetSensitiveContent(previous => ({\n\t\t\t\t...previous,\n\t\t\t\theaders: [\n\t\t\t\t\t...previous.headers.slice(0, index),\n\t\t\t\t\t{\n\t\t\t\t\t\t...previous.headers[index],\n\t\t\t\t\t\tspreadWithDelimiter: delimter,\n\t\t\t\t\t},\n\t\t\t\t\t...previous.headers.slice(index + 1),\n\t\t\t\t],\n\t\t\t}))\n\t\t},\n\t\t[setSensitiveContent],\n\t)\n\n\tconst setAllOptions = useCallback(\n\t\t(set: boolean) => {\n\t\t\tconst newHeaders = sensitiveContent.headers.map(header => {\n\t\t\t\tif (selectedStringColumns?.includes(header.name)) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...header,\n\t\t\t\t\t\tspreadWithDelimiter: set\n\t\t\t\t\t\t\t? header.spreadWithDelimiter ?? defaultDelimiter\n\t\t\t\t\t\t\t: null,\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn header\n\t\t\t\t}\n\t\t\t})\n\t\t\tsetSensitiveContent(previous => ({\n\t\t\t\t...previous,\n\t\t\t\theaders: newHeaders,\n\t\t\t}))\n\t\t},\n\t\t[\n\t\t\tsensitiveContent,\n\t\t\tsetSensitiveContent,\n\t\t\tdefaultDelimiter,\n\t\t\tselectedStringColumns,\n\t\t],\n\t)\n\n\tconst list = useMemo(() => {\n\t\treturn sensitiveContent.headers.map((header, index) => {\n\t\t\tif (!header.use || !selectedStringColumns?.includes(header.name))\n\t\t\t\treturn null\n\t\t\treturn (\n\t\t\t\t<StyledListItem\n\t\t\t\t\tclassName={(index + 1) % 2 !== 0 ? 'odd' : ''}\n\t\t\t\t\tkey={header.name}\n\t\t\t\t\tjustify=\"space-between\"\n\t\t\t\t\talign=\"center\"\n\t\t\t\t>\n\t\t\t\t\t<StyledCheckbox\n\t\t\t\t\t\tlabel={header.name}\n\t\t\t\t\t\tchecked={header.spreadWithDelimiter !== null}\n\t\t\t\t\t\tonChange={(ev, checked) =>\n\t\t\t\t\t\t\thandleDelimiterUpdate(index, checked ? defaultDelimiter : null)\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<StyledListItemInputArea\n\t\t\t\t\t\tclassName={header.spreadWithDelimiter !== null ? 'enabled' : ''}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StyledInputField\n\t\t\t\t\t\t\tvalue={header.spreadWithDelimiter ?? ''}\n\t\t\t\t\t\t\tonChange={(ev: ChangeEvent<HTMLInputElement>) =>\n\t\t\t\t\t\t\t\thandleDelimiterUpdate(index, ev.target.value)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</StyledListItemInputArea>\n\t\t\t\t</StyledListItem>\n\t\t\t)\n\t\t})\n\t}, [\n\t\tsensitiveContent,\n\t\tselectedStringColumns,\n\t\thandleDelimiterUpdate,\n\t\tdefaultDelimiter,\n\t])\n\treturn (\n\t\t<>\n\t\t\t<Action className={actionClass} id={actionId} onClick={toggleCallout}>\n\t\t\t\tMulti-value Columns\n\t\t\t</Action>\n\t\t\t{isCalloutVisible && (\n\t\t\t\t<Callout\n\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\tgapSpace={0}\n\t\t\t\t\tisBeakVisible={false}\n\t\t\t\t\tdirectionalHint={DirectionalHint.bottomCenter}\n\t\t\t\t\ttarget={`#${actionId}`}\n\t\t\t\t\tonDismiss={toggleIsCalloutVisible}\n\t\t\t\t\tsetInitialFocus\n\t\t\t\t>\n\t\t\t\t\t<Container vertical>\n\t\t\t\t\t\t<GroupActions vertical>\n\t\t\t\t\t\t\t<FlexContainer justify=\"space-around\" align=\"center\">\n\t\t\t\t\t\t\t\t<GroupAction onClick={() => setAllOptions(true)}>\n\t\t\t\t\t\t\t\t\tAll\n\t\t\t\t\t\t\t\t</GroupAction>\n\t\t\t\t\t\t\t\t<Divider>|</Divider>\n\t\t\t\t\t\t\t\t<GroupAction onClick={() => setAllOptions(false)}>\n\t\t\t\t\t\t\t\t\tNone\n\t\t\t\t\t\t\t\t</GroupAction>\n\t\t\t\t\t\t\t</FlexContainer>\n\t\t\t\t\t\t\t<DefaultDelimiterArea align=\"center\" justify=\"space-between\">\n\t\t\t\t\t\t\t\t<Label htmlFor=\"default-delimiter\">Default Delimiter: </Label>\n\t\t\t\t\t\t\t\t<StyledInputWrapper>\n\t\t\t\t\t\t\t\t\t<StyledInputField\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tid=\"default-delimiter\"\n\t\t\t\t\t\t\t\t\t\tonChange={updateDefaultDelimiter}\n\t\t\t\t\t\t\t\t\t\tvalue={defaultDelimiter}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</StyledInputWrapper>\n\t\t\t\t\t\t\t</DefaultDelimiterArea>\n\t\t\t\t\t\t</GroupActions>\n\t\t\t\t\t\t<ListContainer vertical>\n\t\t\t\t\t\t\t<div>{list}</div>\n\t\t\t\t\t\t</ListContainer>\n\t\t\t\t\t</Container>\n\t\t\t\t</Callout>\n\t\t\t)}\n\t\t</>\n\t)\n})\nMultiValueColumns.displayName = 'MultiValueColumns'\n\nconst Action = styled.span`\n\tfont-size: ${p => p.theme.fonts.mediumPlus.fontSize};\n\t/* font-weight: bold; */\n\tletter-spacing: 1.25px;\n\tpadding: ${p => p.theme.spacing.m};\n\tcolor: ${p => p.theme.palette.themePrimary};\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n\t&.disabled {\n\t\tcolor: ${p => p.theme.palette.neutralTertiary};\n\t\t&:hover {\n\t\t\tcursor: auto;\n\t\t}\n\t}\n`\n\nconst Container = styled(FlexContainer)`\n\tmin-width: 250px;\n\tmax-height: 400px;\n\tborder: 1px solid ${p => p.theme.palette.neutralLight};\n\t/* background: ${p => p.theme.palette.neutralQuaternary}; */\n\toverflow-y: auto;\n\t&::-webkit-scrollbar {\n\t\tdisplay: none;\n\t}\n`\n\nconst GroupActions = styled(FlexContainer)`\n\tpadding: ${p => p.theme.spacing.s1};\n\tborder-bottom: 1px solid ${p => p.theme.palette.neutralLight};\n\tbox-shadow: ${p => p.theme.effects.elevation4};\n`\n\nconst GroupAction = styled.span`\n\tcolor: ${p => p.theme.palette.themePrimary};\n\tfont-size: ${p => p.theme.fonts.medium.fontSize};\n\tfont-weight: bold;\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n`\n\nconst Divider = styled.span`\n\tfont-size: ${p => p.theme.fonts.smallPlus.fontSize};\n\tcolor: ${p => p.theme.palette.neutralTertiary};\n`\n\nconst ListContainer = styled(FlexContainer)`\n\toverflow-y: auto;\n\tpadding: ${p => p.theme.spacing.s1};\n\tdirection: rtl;\n\t& > div {\n\t\tdirection: ltr;\n\t}\n\t&::-webkit-scrollbar {\n\t\twidth: 4px;\n\t\tbackground: ${p => p.theme.palette.neutralLight};\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color: ${p => p.theme.palette.themePrimary};\n\t\tborder-radius: 20px;\n\t}\n`\n\nconst StyledListItem = styled(FlexContainer)`\n\tpadding: ${p => p.theme.spacing.s2} 0;\n\tborder-bottom: 1px solid ${p => p.theme.palette.neutralLight};\n`\n\nconst StyledListItemInputArea = styled.div`\n\twidth: 50px;\n\tvisibility: hidden;\n\t&.enabled {\n\t\tvisibility: visible;\n\t}\n`\n\nconst StyledCheckbox = styled(Checkbox)`\n\tpadding: ${p => p.theme.spacing.s2};\n`\n\nconst DefaultDelimiterArea = styled(FlexContainer)`\n\tmargin-top: ${p => p.theme.spacing.m};\n\n\t& label {\n\t\tfont-weight: normal;\n\t\tletter-spacing: 1.25px;\n\t\tfont-size: ${p => p.theme.fonts.medium.fontSize};\n\t\t/* color: ${p => p.theme.palette.neutralTertiary}; */\n\t}\n`\n\nconst StyledInputWrapper = styled.div`\n\tmargin-left: ${p => p.theme.spacing.m};\n`\n\nconst StyledInputField = styled.input`\n\twidth: 100%;\n\theight: 18px;\n\tborder: 1px solid ${p => p.theme.palette.themeLight};\n\tborder-radius: ${p => p.theme.effects.roundedCorner2};\n\t&:focus {\n\t\toutline: 1px solid ${p => p.theme.palette.themePrimary};\n\t}\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { useCallback } from 'react'\nimport type { SetterOrUpdater } from 'recoil'\n\nimport type { ICsvContent } from '~models'\n\nexport function useOnUseColumnCheckToggle(\n\tsetter: SetterOrUpdater<ICsvContent>,\n): (index: number) => void {\n\treturn useCallback(\n\t\tindex => {\n\t\t\tsetter(previous => ({\n\t\t\t\t...previous,\n\t\t\t\theaders: [\n\t\t\t\t\t...previous.headers.slice(0, index),\n\t\t\t\t\t{\n\t\t\t\t\t\t...previous.headers[index],\n\t\t\t\t\t\tuse: !previous.headers[index].use,\n\t\t\t\t\t},\n\t\t\t\t\t...previous.headers.slice(index + 1),\n\t\t\t\t],\n\t\t\t}))\n\t\t},\n\t\t[setter],\n\t)\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { Callout, Checkbox, DirectionalHint } from '@fluentui/react'\nimport { useBoolean, useId } from '@fluentui/react-hooks'\nimport { FlexContainer } from '@sds/components'\nimport type { FC } from 'react'\nimport { memo, useCallback, useMemo } from 'react'\nimport styled from 'styled-components'\n\nimport { useSensitiveContent } from '~states'\n\nimport { useOnUseColumnCheckToggle } from './SelectColumns.hooks.js'\n\nexport const SelectColumns: FC = memo(function SelectColumns() {\n\tconst [isCalloutVisible, { toggle: toggleIsCalloutVisible }] =\n\t\tuseBoolean(false)\n\tconst actionId = useId('select-columns-id')\n\tconst [sensitiveContent, setSensitiveContent] = useSensitiveContent()\n\tconst columnCheckToggle = useOnUseColumnCheckToggle(setSensitiveContent)\n\n\tconst setAllOptions = useCallback(\n\t\t(set: boolean) => {\n\t\t\tconst newHeaders = sensitiveContent.headers.map(header => {\n\t\t\t\treturn { ...header, use: set }\n\t\t\t})\n\n\t\t\tsetSensitiveContent(previous => ({\n\t\t\t\t...previous,\n\t\t\t\theaders: newHeaders,\n\t\t\t}))\n\t\t},\n\t\t[sensitiveContent, setSensitiveContent],\n\t)\n\n\tconst list = useMemo(() => {\n\t\treturn sensitiveContent.headers.map((header, index) => {\n\t\t\treturn (\n\t\t\t\t<StyledCheckbox\n\t\t\t\t\tkey={header.fieldName}\n\t\t\t\t\tlabel={header.name}\n\t\t\t\t\tchecked={header.use}\n\t\t\t\t\tonChange={() => columnCheckToggle(index)}\n\t\t\t\t/>\n\t\t\t)\n\t\t})\n\t}, [sensitiveContent, columnCheckToggle])\n\n\treturn (\n\t\t<>\n\t\t\t<Action id={actionId} onClick={toggleIsCalloutVisible}>\n\t\t\t\tSelect Columns\n\t\t\t</Action>\n\t\t\t{isCalloutVisible && (\n\t\t\t\t<Callout\n\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\tgapSpace={0}\n\t\t\t\t\tisBeakVisible={false}\n\t\t\t\t\tdirectionalHint={DirectionalHint.bottomCenter}\n\t\t\t\t\ttarget={`#${actionId}`}\n\t\t\t\t\tonDismiss={toggleIsCalloutVisible}\n\t\t\t\t\tsetInitialFocus\n\t\t\t\t>\n\t\t\t\t\t<Container vertical>\n\t\t\t\t\t\t<GroupActions justify=\"space-around\" align=\"center\">\n\t\t\t\t\t\t\t<GroupAction onClick={() => setAllOptions(true)}>All</GroupAction>\n\t\t\t\t\t\t\t<Divider>|</Divider>\n\t\t\t\t\t\t\t<GroupAction onClick={() => setAllOptions(false)}>\n\t\t\t\t\t\t\t\tNone\n\t\t\t\t\t\t\t</GroupAction>\n\t\t\t\t\t\t</GroupActions>\n\t\t\t\t\t\t<ListContainer vertical>\n\t\t\t\t\t\t\t<div>{list}</div>\n\t\t\t\t\t\t</ListContainer>\n\t\t\t\t\t</Container>\n\t\t\t\t</Callout>\n\t\t\t)}\n\t\t</>\n\t)\n})\nSelectColumns.displayName = 'SelectColumns'\n\nconst Action = styled.span`\n\tfont-size: ${p => p.theme.fonts.mediumPlus.fontSize};\n\t/* font-weight: bold; */\n\tletter-spacing: 1.25px;\n\tpadding: ${p => p.theme.spacing.m};\n\tcolor: ${p => p.theme.palette.themePrimary};\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n`\n\nconst Container = styled(FlexContainer)`\n\tmin-width: 250px;\n\tmax-height: 400px;\n\tborder: 1px solid ${p => p.theme.palette.neutralLight};\n\t/* background: ${p => p.theme.palette.neutralQuaternary}; */\n\toverflow-y: auto;\n\t&::-webkit-scrollbar {\n\t\tdisplay: none;\n\t}\n`\n\nconst GroupActions = styled(FlexContainer)`\n\tpadding: ${p => p.theme.spacing.s1};\n\tborder-bottom: 1px solid ${p => p.theme.palette.neutralLight};\n\tbox-shadow: ${p => p.theme.effects.elevation4};\n`\n\nconst GroupAction = styled.span`\n\tcolor: ${p => p.theme.palette.themePrimary};\n\tfont-size: ${p => p.theme.fonts.medium.fontSize};\n\tfont-weight: bold;\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n`\n\nconst Divider = styled.span`\n\tfont-size: ${p => p.theme.fonts.smallPlus.fontSize};\n\tcolor: ${p => p.theme.palette.neutralTertiary};\n`\n\nconst ListContainer = styled(FlexContainer)`\n\toverflow-y: auto;\n\tpadding: ${p => p.theme.spacing.s1};\n\tdirection: rtl;\n\t& > div {\n\t\tdirection: ltr;\n\t}\n\t&::-webkit-scrollbar {\n\t\twidth: 4px;\n\t\tbackground: ${p => p.theme.palette.neutralLight};\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color: ${p => p.theme.palette.themePrimary};\n\t\tborder-radius: 20px;\n\t}\n`\n\nconst StyledCheckbox = styled(Checkbox)`\n\tpadding: ${p => p.theme.spacing.s2};\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { useCallback, useMemo } from 'react'\nimport type { SetterOrUpdater } from 'recoil'\n\nimport type { ICsvContent } from '~models'\n\nexport function useColumnsWithZeros(\n\tcontent: ICsvContent,\n): string[] | undefined {\n\treturn useMemo(\n\t\t() =>\n\t\t\tcontent.columnsWithZeros\n\t\t\t\t?.map(i => content.headers[i])\n\t\t\t\t.filter(h => h.use)\n\t\t\t\t.map(h => h.name),\n\t\t[content],\n\t)\n}\n\nexport function useOnSensitiveZeroCheckToggle(\n\tsetter: SetterOrUpdater<ICsvContent>,\n): (index: number) => void {\n\treturn useCallback(\n\t\tindex => {\n\t\t\tsetter(previous => ({\n\t\t\t\t...previous,\n\t\t\t\theaders: [\n\t\t\t\t\t...previous.headers.slice(0, index),\n\t\t\t\t\t{\n\t\t\t\t\t\t...previous.headers[index],\n\t\t\t\t\t\thasSensitiveZeros: !previous.headers[index].hasSensitiveZeros,\n\t\t\t\t\t},\n\t\t\t\t\t...previous.headers.slice(index + 1),\n\t\t\t\t],\n\t\t\t}))\n\t\t},\n\t\t[setter],\n\t)\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { Callout, Checkbox, DirectionalHint } from '@fluentui/react'\nimport { useBoolean, useId } from '@fluentui/react-hooks'\nimport { FlexContainer } from '@sds/components'\nimport type { FC } from 'react'\nimport { memo, useCallback, useMemo } from 'react'\nimport styled from 'styled-components'\n\nimport { useSensitiveContent } from '~states'\n\nimport {\n\tuseColumnsWithZeros,\n\tuseOnSensitiveZeroCheckToggle,\n} from './SensitiveZeros.hooks.js'\n\nexport const SensitiveZeros: FC = memo(function SensitiveZeros() {\n\tconst [isCalloutVisible, { toggle: toggleIsCalloutVisible }] =\n\t\tuseBoolean(false)\n\tconst actionId = useId('sensitive-zeros-id')\n\tconst [sensitiveContent, setSensitiveContent] = useSensitiveContent()\n\tconst columnsWithZeros = useColumnsWithZeros(sensitiveContent)\n\n\tconst toggleCallout = useCallback(() => {\n\t\tif (!columnsWithZeros?.length) return\n\t\ttoggleIsCalloutVisible()\n\t}, [columnsWithZeros, toggleIsCalloutVisible])\n\n\tconst actionClass = useMemo(() => {\n\t\treturn columnsWithZeros?.length ? '' : 'disabled'\n\t}, [columnsWithZeros])\n\n\tconst handleSensitiveCheckChange =\n\t\tuseOnSensitiveZeroCheckToggle(setSensitiveContent)\n\n\tconst setAllOptions = useCallback(\n\t\t(set: boolean) => {\n\t\t\tconst newHeaders = sensitiveContent.headers.map(header => {\n\t\t\t\tif (columnsWithZeros?.includes(header.name)) {\n\t\t\t\t\treturn { ...header, hasSensitiveZeros: set }\n\t\t\t\t} else {\n\t\t\t\t\treturn header\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tsetSensitiveContent(previous => ({\n\t\t\t\t...previous,\n\t\t\t\theaders: newHeaders,\n\t\t\t}))\n\t\t},\n\t\t[sensitiveContent, setSensitiveContent, columnsWithZeros],\n\t)\n\n\tconst list = useMemo(() => {\n\t\treturn sensitiveContent.headers.map((header, index) => {\n\t\t\tif (!header.use || !columnsWithZeros?.includes(header.name)) return null\n\t\t\treturn (\n\t\t\t\t<StyledCheckbox\n\t\t\t\t\tkey={header.fieldName}\n\t\t\t\t\tlabel={header.name}\n\t\t\t\t\tchecked={header.hasSensitiveZeros}\n\t\t\t\t\tonChange={() => handleSensitiveCheckChange(index)}\n\t\t\t\t/>\n\t\t\t)\n\t\t})\n\t}, [sensitiveContent, handleSensitiveCheckChange, columnsWithZeros])\n\treturn (\n\t\t<>\n\t\t\t<Action className={actionClass} id={actionId} onClick={toggleCallout}>\n\t\t\t\tSensitive Zeros\n\t\t\t</Action>\n\t\t\t{isCalloutVisible && (\n\t\t\t\t<Callout\n\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\tgapSpace={0}\n\t\t\t\t\tisBeakVisible={false}\n\t\t\t\t\tdirectionalHint={DirectionalHint.bottomCenter}\n\t\t\t\t\ttarget={`#${actionId}`}\n\t\t\t\t\tonDismiss={toggleIsCalloutVisible}\n\t\t\t\t\tsetInitialFocus\n\t\t\t\t>\n\t\t\t\t\t<Container vertical>\n\t\t\t\t\t\t<GroupActions justify=\"space-around\" align=\"center\">\n\t\t\t\t\t\t\t<GroupAction onClick={() => setAllOptions(true)}>All</GroupAction>\n\t\t\t\t\t\t\t<Divider>|</Divider>\n\t\t\t\t\t\t\t<GroupAction onClick={() => setAllOptions(false)}>\n\t\t\t\t\t\t\t\tNone\n\t\t\t\t\t\t\t</GroupAction>\n\t\t\t\t\t\t</GroupActions>\n\t\t\t\t\t\t<ListContainer vertical>\n\t\t\t\t\t\t\t<div>{list}</div>\n\t\t\t\t\t\t</ListContainer>\n\t\t\t\t\t</Container>\n\t\t\t\t</Callout>\n\t\t\t)}\n\t\t</>\n\t)\n})\nSensitiveZeros.displayName = 'SensitiveZeros'\n\nconst Action = styled.span`\n\tfont-size: ${p => p.theme.fonts.mediumPlus.fontSize};\n\t/* font-weight: bold; */\n\tletter-spacing: 1.25px;\n\tpadding: ${p => p.theme.spacing.m};\n\tcolor: ${p => p.theme.palette.themePrimary};\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n\t&.disabled {\n\t\tcolor: ${p => p.theme.palette.neutralTertiary};\n\t\t&:hover {\n\t\t\tcursor: auto;\n\t\t}\n\t}\n`\n\nconst Container = styled(FlexContainer)`\n\tmin-width: 250px;\n\tmax-height: 400px;\n\tborder: 1px solid ${p => p.theme.palette.neutralLight};\n\t/* background: ${p => p.theme.palette.neutralQuaternary}; */\n\toverflow-y: auto;\n\t&::-webkit-scrollbar {\n\t\tdisplay: none;\n\t}\n`\n\nconst GroupActions = styled(FlexContainer)`\n\tpadding: ${p => p.theme.spacing.s1};\n\tborder-bottom: 1px solid ${p => p.theme.palette.neutralLight};\n\tbox-shadow: ${p => p.theme.effects.elevation4};\n`\n\nconst GroupAction = styled.span`\n\tcolor: ${p => p.theme.palette.themePrimary};\n\tfont-size: ${p => p.theme.fonts.medium.fontSize};\n\tfont-weight: bold;\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n`\n\nconst Divider = styled.span`\n\tfont-size: ${p => p.theme.fonts.smallPlus.fontSize};\n\tcolor: ${p => p.theme.palette.neutralTertiary};\n`\n\nconst ListContainer = styled(FlexContainer)`\n\toverflow-y: auto;\n\tpadding: ${p => p.theme.spacing.s1};\n\tdirection: rtl;\n\t& > div {\n\t\tdirection: ltr;\n\t}\n\t&::-webkit-scrollbar {\n\t\twidth: 4px;\n\t\tbackground: ${p => p.theme.palette.neutralLight};\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color: ${p => p.theme.palette.themePrimary};\n\t\tborder-radius: 20px;\n\t}\n`\n\nconst StyledCheckbox = styled(Checkbox)`\n\tpadding: ${p => p.theme.spacing.s2};\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { Callout, DirectionalHint, Icon } from '@fluentui/react'\nimport { useBoolean, useId } from '@fluentui/react-hooks'\nimport { FlexContainer } from '@sds/components'\nimport type { FC } from 'react'\nimport { memo, useCallback, useMemo } from 'react'\nimport styled from 'styled-components'\n\nimport { useSensitiveContent } from '~states'\n\nexport const SubjectId: FC = memo(function SubjectId() {\n\tconst [isCalloutVisible, { toggle: toggleIsCalloutVisible }] =\n\t\tuseBoolean(false)\n\tconst actionId = useId('select-columns-id')\n\tconst [sensitiveContent, setSensitiveContent] = useSensitiveContent()\n\n\tconst visibleColumns = useMemo(() => {\n\t\treturn sensitiveContent.headers.filter(h => h.use)\n\t}, [sensitiveContent])\n\n\tconst subjectId = useMemo(() => {\n\t\treturn sensitiveContent.subjectId\n\t}, [sensitiveContent])\n\tconst actionClass = useMemo(() => {\n\t\treturn visibleColumns.length ? '' : 'disabled'\n\t}, [visibleColumns])\n\n\tconst handleShowMenu = useCallback(() => {\n\t\tif (!visibleColumns.length) return\n\t\ttoggleIsCalloutVisible()\n\t}, [visibleColumns, toggleIsCalloutVisible])\n\n\tconst handleSubjectIdChange = useCallback(\n\t\t(key: string) => {\n\t\t\tsetSensitiveContent(previous => ({\n\t\t\t\t...previous,\n\t\t\t\tsubjectId: key === previous.subjectId ? undefined : key,\n\t\t\t}))\n\t\t},\n\t\t[setSensitiveContent],\n\t)\n\n\tconst list = useMemo(() => {\n\t\treturn visibleColumns.map((header, index) => {\n\t\t\treturn (\n\t\t\t\t<ListItem\n\t\t\t\t\tkey={header.name}\n\t\t\t\t\tonClick={() => handleSubjectIdChange(header.name)}\n\t\t\t\t\tclassName={header.name === subjectId ? 'activeListItem' : ''}\n\t\t\t\t>\n\t\t\t\t\t<Icon iconName=\"CheckMark\" />\n\t\t\t\t\t{header.name}\n\t\t\t\t</ListItem>\n\t\t\t)\n\t\t})\n\t}, [subjectId, visibleColumns, handleSubjectIdChange])\n\n\treturn (\n\t\t<>\n\t\t\t<Action className={actionClass} id={actionId} onClick={handleShowMenu}>\n\t\t\t\tSubject ID\n\t\t\t</Action>\n\t\t\t{isCalloutVisible && (\n\t\t\t\t<Callout\n\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\tgapSpace={0}\n\t\t\t\t\tisBeakVisible={false}\n\t\t\t\t\tdirectionalHint={DirectionalHint.bottomCenter}\n\t\t\t\t\ttarget={`#${actionId}`}\n\t\t\t\t\tonDismiss={toggleIsCalloutVisible}\n\t\t\t\t\tsetInitialFocus\n\t\t\t\t>\n\t\t\t\t\t<Container vertical>\n\t\t\t\t\t\t<ListContainer vertical>\n\t\t\t\t\t\t\t<div>{list}</div>\n\t\t\t\t\t\t</ListContainer>\n\t\t\t\t\t</Container>\n\t\t\t\t</Callout>\n\t\t\t)}\n\t\t</>\n\t)\n})\nSubjectId.displayName = 'SubjectId'\n\nconst Action = styled.span`\n\tfont-size: ${p => p.theme.fonts.mediumPlus.fontSize};\n\t/* font-weight: bold; */\n\tletter-spacing: 1.25px;\n\tpadding: ${p => p.theme.spacing.m};\n\tcolor: ${p => p.theme.palette.themePrimary};\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n\t&.disabled {\n\t\tcolor: ${p => p.theme.palette.neutralTertiary};\n\t\t&:hover {\n\t\t\tcursor: auto;\n\t\t}\n\t}\n`\n\nconst Container = styled(FlexContainer)`\n\tmin-width: 250px;\n\tmax-height: 400px;\n\tborder: 1px solid ${p => p.theme.palette.neutralLight};\n\t/* background: ${p => p.theme.palette.neutralQuaternary}; */\n\toverflow-y: auto;\n\t&::-webkit-scrollbar {\n\t\tdisplay: none;\n\t}\n`\n\nconst ListContainer = styled(FlexContainer)`\n\toverflow-y: auto;\n\tpadding: ${p => p.theme.spacing.s1};\n\tdirection: rtl;\n\t& > div {\n\t\tdirection: ltr;\n\t}\n\t&::-webkit-scrollbar {\n\t\twidth: 4px;\n\t\tbackground: ${p => p.theme.palette.neutralLight};\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color: ${p => p.theme.palette.themePrimary};\n\t\tborder-radius: 20px;\n\t}\n`\n\nconst ListItem = styled.div`\n\tpadding: ${p => p.theme.spacing.s1};\n\tfont-size: ${p => p.theme.fonts.medium.fontSize};\n\t&:hover {\n\t\tcursor: pointer;\n\t\tbackground: ${p => p.theme.palette.neutralLight};\n\t}\n\t& i {\n\t\tpadding: 0 ${p => p.theme.spacing.s1};\n\t\tvisibility: hidden;\n\t}\n\t&.activeListItem {\n\t\tbackground: ${p => p.theme.palette.neutralLight};\n\t\t& i {\n\t\t\tvisibility: visible;\n\t\t}\n\t}\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { FlexContainer } from '@sds/components'\nimport type { FC } from 'react'\nimport { memo } from 'react'\nimport styled from 'styled-components'\n\nimport { AggregationControls } from './AggregationControls/AggregationControls.js'\nimport { MultiValueColumns } from './MultiValueColumns/index.js'\nimport { SelectColumns } from './SelectColumns/index.js'\nimport { SensitiveZeros } from './SensitiveZeros/index.js'\nimport { SubjectId } from './SubjectId/index.js'\n\nexport const SelectCommands: FC = memo(function SelectCommand() {\n\treturn (\n\t\t<Container justify=\"center\" align=\"center\" wrap>\n\t\t\t<SelectColumns />\n\t\t\t<Divider>|</Divider>\n\t\t\t<SubjectId />\n\t\t\t<Divider>|</Divider>\n\t\t\t<SensitiveZeros />\n\t\t\t<Divider>|</Divider>\n\t\t\t<MultiValueColumns />\n\t\t\t<AggregationControls />\n\t\t</Container>\n\t)\n})\nSelectCommands.displayName = 'SelectCommands'\n\nconst Container = styled(FlexContainer)`\n\tborder-bottom: 1px solid ${p => p.theme.palette.neutralLight};\n\tbox-shadow: ${p => p.theme.effects.elevation4};\n`\n\nconst Divider = styled.span`\n\tfont-size: ${p => p.theme.fonts.smallPlus.fontSize};\n\tcolor: ${p => p.theme.palette.neutralTertiary};\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { ArqueroDetailsList } from '@essex/arquero-react'\nimport { useTheme } from '@fluentui/react'\nimport type { FC } from 'react'\nimport { memo, useMemo } from 'react'\nimport styled from 'styled-components'\n\nimport { useSensitiveContent } from '~states'\n\nexport const TablePreview: FC = memo(function TablePreview() {\n\tconst [sensitiveContent] = useSensitiveContent()\n\tconst theme = useTheme()\n\n\tconst visibleColumns = useMemo(() => {\n\t\treturn sensitiveContent.headers.filter(h => h.use).map(h => h.name)\n\t}, [sensitiveContent])\n\n\tif (!visibleColumns.length) return <></>\n\n\treturn (\n\t\t<Container>\n\t\t\t<ArqueroDetailsList\n\t\t\t\ttable={sensitiveContent.table}\n\t\t\t\tmetadata={sensitiveContent.metadata}\n\t\t\t\tfeatures={{\n\t\t\t\t\thistogramColumnHeaders: true,\n\t\t\t\t\tstatsColumnHeaders: true,\n\t\t\t\t}}\n\t\t\t\tisSortable\n\t\t\t\tisHeadersFixed\n\t\t\t\tshowColumnBorders\n\t\t\t\tvisibleColumns={visibleColumns}\n\t\t\t\tstyles={{\n\t\t\t\t\troot: {\n\t\t\t\t\t\theight: 800,\n\t\t\t\t\t\tborder: `1px solid ${theme.palette.neutralLight}`,\n\t\t\t\t\t},\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Container>\n\t)\n})\nTablePreview.displayName = 'TablePreview'\n\nconst Container = styled.div`\n\theight: 100%;\n\tmin-height: 150px;\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { FlexContainer } from '@sds/components'\nimport type { FC } from 'react'\nimport { memo } from 'react'\nimport styled from 'styled-components'\n\nimport { PageDescription, Pages } from '~pages'\n\nimport { AggregateStatistics } from './AggregateStatistics/index.js'\nimport { InfoBar } from './InfoBar/index.js'\nimport { SelectCommands } from './SelectCommands/index.js'\nimport { TablePreview } from './TablePreview/index.js'\n\nexport const SelectPage: FC = memo(function SelectPage() {\n\treturn (\n\t\t<Container vertical>\n\t\t\t<PageDescription>{Pages.Select.description}</PageDescription>\n\t\t\t<SelectCommands />\n\t\t\t<MainContent vertical>\n\t\t\t\t<AggregateStatistics />\n\t\t\t\t<InfoBar />\n\t\t\t\t<TablePreview />\n\t\t\t</MainContent>\n\t\t</Container>\n\t)\n})\nSelectPage.displayName = 'SelectPage'\n\nconst Container = styled(FlexContainer)`\n\theight: 100%;\n\toverflow-y: auto;\n\t&::-webkit-scrollbar {\n\t\tdisplay: none;\n\t}\n`\n\nconst MainContent = styled(FlexContainer)`\n\theight: 100%;\n\toverflow-y: auto;\n`\n"],"names":["useGetAggregateStatistics","managerInstance","useSdsManagerInstance","useCallback","sensitiveContent","recordLimit","reportingLength","resolution","headers","usableHeaders","h","usableMultiValueColumns","Container","styled","FlexContainer","p","StyledReport","ChartsContainer","ChartItem","FlexItem","ChartContainer","ContributionChart","memo","selectedKey","valuePerKey","label","containerHeight","barHeight","tooltipFormatter","onClick","labels","useMemo","_","k","data","handleClick","evt","elements","chart","clicked","key","thematic","useThematic","nominalScale","useNominalScale","nominalBoldScale","useNominalBoldScale","backgroundColor","normalColor","selectedColor","l","labelColors","greys","jsxs","jsx","Bar","ChartDataLabels","args","_pluginOptions","value","AggregateStatistics","currentAggregationId","useRef","useSensitiveContent","statistics","setStatistics","useState","isLoading","setIsLoading","setGlobalErrorMessage","useGlobalErrorMessage","rawSynthesisParams","useRawSynthesisParameters","getAggregateStatistics","columnTooltipFormatter","item","attributeTooltipFormatter","useEffect","aggregateStatisticsGetter","id","result","err","Spinner","Fragment","InfoBar","stats","subjectId","rowCount","acc","cur","colStats","AggregationControls","handleResolutionChange","useSpinButtonOnChange","useRawSynthesisParametersPropertySetter","handleReportingLengthChange","Action","StyledSpinButton","Position","SpinButton","MultiValueColumns","isCalloutVisible","toggleIsCalloutVisible","useBoolean","actionId","useId","defaultDelimiter","setDefaultDelimiter","setSensitiveContent","updateDefaultDelimiter","event","selectedStringColumns","header","toggleCallout","actionClass","handleDelimiterUpdate","index","delimter","previous","setAllOptions","set","newHeaders","list","StyledListItem","StyledCheckbox","ev","checked","StyledListItemInputArea","StyledInputField","Callout","DirectionalHint","GroupActions","GroupAction","Divider","DefaultDelimiterArea","Label","StyledInputWrapper","ListContainer","Checkbox","useOnUseColumnCheckToggle","setter","SelectColumns","columnCheckToggle","useColumnsWithZeros","content","i","useOnSensitiveZeroCheckToggle","SensitiveZeros","columnsWithZeros","handleSensitiveCheckChange","SubjectId","visibleColumns","handleShowMenu","handleSubjectIdChange","ListItem","Icon","SelectCommands","TablePreview","theme","useTheme","ArqueroDetailsList","SelectPage","PageDescription","Pages","MainContent"],"mappings":"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"}