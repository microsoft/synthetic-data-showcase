{"version":3,"file":"useSpinButtonOnChange-8cd874e5.js","sources":["../../src/workers/types/AggregateType.ts","../../../../node_modules/@fluentui/react-hooks/lib/useRefEffect.js","../../../../node_modules/@fluentui/react/lib/components/Button/CommandBarButton/CommandBarButton.styles.js","../../../../node_modules/@fluentui/react/lib/components/Button/CommandBarButton/CommandBarButton.js","../../../../node_modules/@fluentui/react/lib/components/ResizeGroup/ResizeGroup.types.js","../../../../node_modules/@fluentui/react/lib/components/ResizeGroup/ResizeGroup.base.js","../../../../node_modules/@fluentui/react/lib/components/ResizeGroup/ResizeGroup.js","../../../../node_modules/@fluentui/react/lib/components/CommandBar/CommandBar.styles.js","../../../../node_modules/@fluentui/react/lib/components/OverflowSet/OverflowButton.js","../../../../node_modules/@fluentui/react/lib/components/OverflowSet/OverflowSet.base.js","../../../../node_modules/@fluentui/react/lib/components/OverflowSet/OverflowSet.styles.js","../../../../node_modules/@fluentui/react/lib/components/OverflowSet/OverflowSet.js","../../../../node_modules/@fluentui/react/lib/components/CommandBar/CommandBar.base.js","../../../../node_modules/@fluentui/react/lib/components/CommandBar/CommandBar.js","../../../../node_modules/@fluentui/react/lib/utilities/observeResize.js","../../../../node_modules/@fluentui/react/lib/utilities/useOverflow.js","../../../../node_modules/@fluentui/react/lib/components/Pivot/PivotItem.js","../../../../node_modules/@fluentui/react/lib/components/Pivot/Pivot.base.js","../../../../node_modules/@fluentui/react/lib/components/Pivot/Pivot.styles.js","../../../../node_modules/@fluentui/react/lib/components/Pivot/Pivot.js","../../../../node_modules/@data-wrangling-components/utilities/dist/lib/utils/download.js","../../../../node_modules/@data-wrangling-components/react/dist/lib/ArqueroTableHeader/commands/downloadCommand.js","../../src/pages/hooks/commands/useDownloadCommand.ts","../../src/pages/hooks/useCanRun.ts","../../src/pages/hooks/useDropdownOnChange.ts","../../src/components/Charts/hooks/useMetricsByCountLabels.ts","../../src/components/Charts/hooks/useMetricsByLenLabels.ts","../../src/components/controls/DownloadButton/hooks.ts","../../src/components/controls/DownloadButton/DownloadButton.tsx","../../src/components/MetricsSummaryTable/hooks.ts","../../src/components/MetricsSummaryTable/MetricsSummaryTable.tsx","../../src/components/DataEvaluationInfoDownloader/hooks.ts","../../src/components/DataEvaluationInfoDownloader/DataEvaluationInfoDownloader.tsx","../../src/components/HumanReadableSummary/HumanReadableSummary.hooks.ts","../../src/components/HumanReadableSummary/HumanReadableSummary.tsx","../../src/components/AllSynthesisInfo/AllSynthesisInfo.styles.ts","../../src/components/AllSynthesisInfo/AllSynthesisInfo.hooks.tsx","../../src/components/AllSynthesisInfo/AllSynthesisInfo.tsx","../../src/components/AllSynthesisInfo/StatefulAllSynthesisInfo.tsx","../../src/components/CollapsablePanel/CollapsablePanel.tsx","../../src/components/TooltipWrapper/TooltipWrapper.tsx","../../src/pages/Synthesize/DataSynthesisParameters/DataSynthesisParameters.hooks.ts","../../src/pages/Synthesize/DataSynthesisParameters/DataSynthesisParameters.styles.ts","../../src/pages/Synthesize/DataSynthesisParameters/DataSynthesisAdvancedParameters.tsx","../../src/pages/Synthesize/DataSynthesisParameters/DataSynthesisParameters.tsx","../../../../node_modules/@essex/arquero-react/node_modules/@essex/arquero/dist/binning.js","../../../../node_modules/@essex/arquero-react/node_modules/@essex/arquero/dist/types.js","../../../../node_modules/@essex/arquero-react/node_modules/@essex/arquero/dist/data.js","../../../../node_modules/@essex/arquero-react/node_modules/@essex/arquero/dist/columns.js","../../../../node_modules/@essex/arquero-react/node_modules/@essex/arquero/dist/columnTypes.js","../../../../node_modules/@essex/arquero-react/node_modules/@essex/arquero/dist/stats.js","../../../../node_modules/@essex/arquero-react/node_modules/@essex/arquero/dist/introspect.js","../../../../node_modules/@essex/arquero-react/dist/common/groups.js","../../../../node_modules/@essex/arquero-react/dist/functions.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/hooks/useCellClickHandler.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/hooks/useCellDimensions.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/hooks/useCellDropdownSelectHandler.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/hooks/useColumnNamesList.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/util/index.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/renderers/ArrayCell.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/renderers/BooleanSymbolCell.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/renderers/BooleanTextCell.js","../../../../node_modules/@essex/charts-react/dist/hooks.js","../../../../node_modules/@essex/charts-react/dist/Sparkbar.js","../../../../node_modules/@essex/charts-react/dist/Sparkline.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/renderers/CategoricalBarCell.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/renderers/CellContainer.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/renderers/DateCell.js","../../../../node_modules/@essex/arquero-react/node_modules/react-if/dist/react-if.esm.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/renderers/DefaultCell.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/renderers/DefaultColumnHeader.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/renderers/EmptyCell.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/renderers/CommandBarContainer.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/renderers/ArrayDropdownCell.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/renderers/FeaturesCell.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/renderers/HistogramColumnHeader.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/renderers/functions.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/renderers/NumberCell.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/renderers/NumberMagnitudeCell.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/renderers/ObjectCell.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/renderers/SmartArrayCell.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/renderers/SmartCell.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/renderers/SparkbarCell.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/renderers/SparklineCell.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/types.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/renderers/StatsColumnHeader.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/renderers/StripedRow.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/renderers/TextCell.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/hooks/useCountMinWidth.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/hooks/useColumns.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/hooks/useColumnStyles.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/hooks/useDetailsHeaderRenderer.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/hooks/useDetailsListStyles.js","../../../../node_modules/@essex/arquero-react/dist/common/functions.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/hooks/useFormattedNumber.js","../../../../node_modules/@essex/arquero-react/dist/GroupHeader/GroupHeader.hooks.js","../../../../node_modules/@essex/arquero-react/dist/GroupHeader/GroupHeader.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/hooks/useGroupHeaderRenderer.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/hooks/useIncrementingColumnColorScale.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/hooks/useSlicedTable.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/hooks/useSortedGroups.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/hooks/useSortedTable.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/hooks/useSortHandling.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/hooks/useStripedRowsRenderer.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/hooks/useSubsetTable.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/hooks/useTableMetadata.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroDetailsList/ArqueroDetailsList.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroTableHeader/constants.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroTableHeader/hooks/useColorDefaults.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroTableHeader/hooks/useColumnCounts.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroTableHeader/hooks/useRowCounts.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroTableHeader/RenameCallout.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroTableHeader/TableName.js","../../../../node_modules/@essex/arquero-react/dist/ArqueroTableHeader/ArqueroTableHeader.js","../../src/components/CsvTable/CsvTable.tsx","../../src/components/Charts/MetricsChart.tsx","../../src/components/DataEvaluationInfo/DataEvaluationInfo.tsx","../../src/pages/Synthesize/DataEvaluation/DataEvaluation.hooks.ts","../../src/pages/Synthesize/DataEvaluation/DataEvaluation.styles.ts","../../src/pages/Synthesize/DataEvaluation/DataEvaluation.tsx","../../src/pages/Synthesize/DataSynthesisResult/DataSynthesisResult.hooks.ts","../../src/pages/Synthesize/DataSynthesisResult/DataSynthesisResult.styles.ts","../../src/pages/Synthesize/DataSynthesisResult/DataSynthesisResult.tsx","../../src/pages/Synthesize/DataSynthesis/DataSynthesis.hooks.ts","../../src/pages/Synthesize/DataSynthesis/DataSynthesis.styles.tsx","../../src/pages/Synthesize/DataSynthesis/DataSynthesis.tsx","../../src/pages/Synthesize/SynthesizePage.tsx","../../src/pages/hooks/useSpinButtonOnChange.ts"],"sourcesContent":["/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nexport enum AggregateType {\n\tSensitive = 'sensitive',\n\tAggregated = 'aggregate',\n\tSynthetic = 'synthetic',\n}\n","import * as React from 'react';\n/**\n * Creates a ref, and calls a callback whenever the ref changes to a non-null value. The callback can optionally return\n * a cleanup function that'll be called before the value changes, and when the ref is unmounted.\n *\n * This can be used to work around a limitation that useEffect cannot depend on `ref.current` (see\n * https://github.com/facebook/react/issues/14387#issuecomment-503616820).\n *\n * Usage example:\n * ```ts\n * const myRef = useRefEffect<HTMLElement>(element => {\n *  ...\n *  return () => { ... cleanup ... };\n * });\n * ```\n * ```jsx\n * <div ref={myRef} />\n * ```\n *\n * @param callback - Called whenever the ref's value changes to non-null. Can optionally return a cleanup function.\n * @param initial - (Optional) The initial value for the ref.\n *\n * @returns A function that should be called to set the ref's value. The object also has a `.current` member that can be\n * used to access the ref's value (like a normal RefObject). It can be hooked up to an element's `ref` property.\n */\nexport function useRefEffect(callback, initial) {\n    if (initial === void 0) { initial = null; }\n    var createRefCallback = function () {\n        var refCallback = function (value) {\n            if (data.ref.current !== value) {\n                if (data.cleanup) {\n                    data.cleanup();\n                    data.cleanup = undefined;\n                }\n                data.ref.current = value;\n                if (value !== null) {\n                    data.cleanup = data.callback(value);\n                }\n            }\n        };\n        refCallback.current = initial;\n        return refCallback;\n    };\n    var data = React.useRef({\n        ref: createRefCallback(),\n        callback: callback,\n    }).current;\n    data.callback = callback;\n    return data.ref;\n}\n//# sourceMappingURL=useRefEffect.js.map","import { __assign } from \"tslib\";\nimport { concatStyleSets, getFocusStyle, HighContrastSelector, getHighContrastNoAdjustStyle } from '../../../Styling';\nimport { memoizeFunction } from '../../../Utilities';\nimport { getStyles as getBaseButtonStyles } from '../BaseButton.styles';\nimport { getStyles as getSplitButtonStyles } from '../SplitButton/SplitButton.styles';\nimport { ButtonGlobalClassNames } from '../BaseButton.classNames';\nexport var getStyles = memoizeFunction(function (theme, customStyles, focusInset, focusColor) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;\n    var baseButtonStyles = getBaseButtonStyles(theme);\n    var baseSplitButtonStyles = getSplitButtonStyles(theme);\n    var p = theme.palette, semanticColors = theme.semanticColors;\n    var commandButtonHighContrastFocus = {\n        left: 4,\n        top: 4,\n        bottom: 4,\n        right: 4,\n        border: 'none',\n    };\n    var commandButtonStyles = {\n        root: [\n            getFocusStyle(theme, {\n                inset: 2,\n                highContrastStyle: commandButtonHighContrastFocus,\n                borderColor: 'transparent',\n            }),\n            theme.fonts.medium,\n            {\n                minWidth: '40px',\n                backgroundColor: p.white,\n                color: p.neutralPrimary,\n                padding: '0 4px',\n                border: 'none',\n                borderRadius: 0,\n                selectors: (_a = {},\n                    _a[HighContrastSelector] = {\n                        border: 'none',\n                    },\n                    _a),\n            },\n        ],\n        rootHovered: {\n            backgroundColor: p.neutralLighter,\n            color: p.neutralDark,\n            selectors: (_b = {},\n                _b[HighContrastSelector] = {\n                    color: 'Highlight',\n                },\n                _b[\".\" + ButtonGlobalClassNames.msButtonIcon] = {\n                    color: p.themeDarkAlt,\n                },\n                _b[\".\" + ButtonGlobalClassNames.msButtonMenuIcon] = {\n                    color: p.neutralPrimary,\n                },\n                _b),\n        },\n        rootPressed: {\n            backgroundColor: p.neutralLight,\n            color: p.neutralDark,\n            selectors: (_c = {},\n                _c[\".\" + ButtonGlobalClassNames.msButtonIcon] = {\n                    color: p.themeDark,\n                },\n                _c[\".\" + ButtonGlobalClassNames.msButtonMenuIcon] = {\n                    color: p.neutralPrimary,\n                },\n                _c),\n        },\n        rootChecked: {\n            backgroundColor: p.neutralLight,\n            color: p.neutralDark,\n            selectors: (_d = {},\n                _d[\".\" + ButtonGlobalClassNames.msButtonIcon] = {\n                    color: p.themeDark,\n                },\n                _d[\".\" + ButtonGlobalClassNames.msButtonMenuIcon] = {\n                    color: p.neutralPrimary,\n                },\n                _d),\n        },\n        rootCheckedHovered: {\n            backgroundColor: p.neutralQuaternaryAlt,\n            selectors: (_e = {},\n                _e[\".\" + ButtonGlobalClassNames.msButtonIcon] = {\n                    color: p.themeDark,\n                },\n                _e[\".\" + ButtonGlobalClassNames.msButtonMenuIcon] = {\n                    color: p.neutralPrimary,\n                },\n                _e),\n        },\n        rootExpanded: {\n            backgroundColor: p.neutralLight,\n            color: p.neutralDark,\n            selectors: (_f = {},\n                _f[\".\" + ButtonGlobalClassNames.msButtonIcon] = {\n                    color: p.themeDark,\n                },\n                _f[\".\" + ButtonGlobalClassNames.msButtonMenuIcon] = {\n                    color: p.neutralPrimary,\n                },\n                _f),\n        },\n        rootExpandedHovered: {\n            backgroundColor: p.neutralQuaternaryAlt,\n        },\n        rootDisabled: {\n            backgroundColor: p.white,\n            selectors: (_g = {},\n                _g[\".\" + ButtonGlobalClassNames.msButtonIcon] = {\n                    color: semanticColors.disabledBodySubtext,\n                    selectors: (_h = {},\n                        _h[HighContrastSelector] = __assign({ color: 'GrayText' }, getHighContrastNoAdjustStyle()),\n                        _h),\n                },\n                _g[HighContrastSelector] = __assign({ color: 'GrayText', backgroundColor: 'Window' }, getHighContrastNoAdjustStyle()),\n                _g),\n        },\n        // Split button styles\n        splitButtonContainer: {\n            height: '100%',\n            selectors: (_j = {},\n                _j[HighContrastSelector] = {\n                    border: 'none',\n                },\n                _j),\n        },\n        splitButtonDividerDisabled: {\n            selectors: (_k = {},\n                _k[HighContrastSelector] = {\n                    backgroundColor: 'Window',\n                },\n                _k),\n        },\n        splitButtonDivider: {\n            backgroundColor: p.neutralTertiaryAlt,\n        },\n        splitButtonMenuButton: {\n            backgroundColor: p.white,\n            border: 'none',\n            borderTopRightRadius: '0',\n            borderBottomRightRadius: '0',\n            color: p.neutralSecondary,\n            selectors: {\n                ':hover': {\n                    backgroundColor: p.neutralLighter,\n                    color: p.neutralDark,\n                    selectors: (_l = {},\n                        _l[HighContrastSelector] = {\n                            color: 'Highlight',\n                        },\n                        _l[\".\" + ButtonGlobalClassNames.msButtonIcon] = {\n                            color: p.neutralPrimary,\n                        },\n                        _l),\n                },\n                ':active': {\n                    backgroundColor: p.neutralLight,\n                    selectors: (_m = {},\n                        _m[\".\" + ButtonGlobalClassNames.msButtonIcon] = {\n                            color: p.neutralPrimary,\n                        },\n                        _m),\n                },\n            },\n        },\n        splitButtonMenuButtonDisabled: {\n            backgroundColor: p.white,\n            selectors: (_o = {},\n                _o[HighContrastSelector] = __assign({ color: 'GrayText', border: 'none', backgroundColor: 'Window' }, getHighContrastNoAdjustStyle()),\n                _o),\n        },\n        splitButtonMenuButtonChecked: {\n            backgroundColor: p.neutralLight,\n            color: p.neutralDark,\n            selectors: {\n                ':hover': {\n                    backgroundColor: p.neutralQuaternaryAlt,\n                },\n            },\n        },\n        splitButtonMenuButtonExpanded: {\n            backgroundColor: p.neutralLight,\n            color: p.black,\n            selectors: {\n                ':hover': {\n                    backgroundColor: p.neutralQuaternaryAlt,\n                },\n            },\n        },\n        splitButtonMenuIcon: {\n            color: p.neutralPrimary,\n        },\n        splitButtonMenuIconDisabled: {\n            color: p.neutralTertiary,\n        },\n        label: {\n            fontWeight: 'normal', // theme.fontWeights.semibold,\n        },\n        icon: {\n            color: p.themePrimary,\n        },\n        menuIcon: (_p = {\n                color: p.neutralSecondary\n            },\n            _p[HighContrastSelector] = {\n                color: 'GrayText',\n            },\n            _p),\n    };\n    return concatStyleSets(baseButtonStyles, baseSplitButtonStyles, commandButtonStyles, customStyles);\n});\n//# sourceMappingURL=CommandBarButton.styles.js.map","import { __assign, __decorate, __extends } from \"tslib\";\nimport * as React from 'react';\nimport { BaseButton } from '../BaseButton';\nimport { customizable, nullRender } from '../../../Utilities';\nimport { getStyles } from './CommandBarButton.styles';\n/**\n * {@docCategory Button}\n */\nvar CommandBarButton = /** @class */ (function (_super) {\n    __extends(CommandBarButton, _super);\n    function CommandBarButton() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CommandBarButton.prototype.render = function () {\n        var _a = this.props, styles = _a.styles, theme = _a.theme;\n        return (React.createElement(BaseButton, __assign({}, this.props, { variantClassName: \"ms-Button--commandBar\", styles: getStyles(theme, styles), onRenderDescription: nullRender })));\n    };\n    CommandBarButton = __decorate([\n        customizable('CommandBarButton', ['theme', 'styles'], true)\n    ], CommandBarButton);\n    return CommandBarButton;\n}(React.Component));\nexport { CommandBarButton };\n//# sourceMappingURL=CommandBarButton.js.map","/**\n * {@docCategory ResizeGroup}\n */\nexport var ResizeGroupDirection;\n(function (ResizeGroupDirection) {\n    ResizeGroupDirection[ResizeGroupDirection[\"horizontal\"] = 0] = \"horizontal\";\n    ResizeGroupDirection[ResizeGroupDirection[\"vertical\"] = 1] = \"vertical\";\n})(ResizeGroupDirection || (ResizeGroupDirection = {}));\n//# sourceMappingURL=ResizeGroup.types.js.map","import { __assign } from \"tslib\";\nimport * as React from 'react';\nimport { divProperties, getNativeProps } from '../../Utilities';\nimport { ResizeGroupDirection } from './ResizeGroup.types';\nimport { useConst, useMergedRefs, useAsync, useOnEvent, useWarnings } from '@fluentui/react-hooks';\nimport { useWindow } from '../../WindowProvider';\nvar RESIZE_DELAY = 16;\n/**\n * Returns a simple object is able to store measurements with a given key.\n */\nexport var getMeasurementCache = function () {\n    var measurementsCache = {};\n    return {\n        /**\n         * Checks if the provided data has a cacheKey. If it has a cacheKey and there is a\n         * corresponding entry in the measurementsCache, then it will return that value.\n         * Returns undefined otherwise.\n         */\n        getCachedMeasurement: function (data) {\n            if (data && data.cacheKey && measurementsCache.hasOwnProperty(data.cacheKey)) {\n                return measurementsCache[data.cacheKey];\n            }\n            return undefined;\n        },\n        /**\n         * Should be called whenever there is a new measurement associated with a given data object.\n         * If the data has a cacheKey, store that measurement in the measurementsCache.\n         */\n        addMeasurementToCache: function (data, measurement) {\n            if (data.cacheKey) {\n                measurementsCache[data.cacheKey] = measurement;\n            }\n        },\n    };\n};\n/**\n * Returns a function that is able to compute the next state for the ResizeGroup given the current\n * state and any measurement updates.\n */\nexport var getNextResizeGroupStateProvider = function (measurementCache) {\n    if (measurementCache === void 0) { measurementCache = getMeasurementCache(); }\n    var _measurementCache = measurementCache;\n    var _containerDimension;\n    /**\n     * Gets the width/height of the data rendered in a hidden div.\n     * @param measuredData - The data corresponding to the measurement we wish to take.\n     * @param getElementToMeasureDimension - A function that returns the measurement of the rendered data.\n     * Only called when the measurement is not in the cache.\n     */\n    function _getMeasuredDimension(measuredData, getElementToMeasureDimension) {\n        var cachedDimension = _measurementCache.getCachedMeasurement(measuredData);\n        if (cachedDimension !== undefined) {\n            return cachedDimension;\n        }\n        var measuredDimension = getElementToMeasureDimension();\n        _measurementCache.addMeasurementToCache(measuredData, measuredDimension);\n        return measuredDimension;\n    }\n    /**\n     * Will get the next IResizeGroupState based on the current data while trying to shrink contents\n     * to fit in the container.\n     * @param data - The initial data point to start measuring.\n     * @param onReduceData - Function that transforms the data into something that should render with less width/height.\n     * @param getElementToMeasureDimension - A function that returns the measurement of the rendered data.\n     * Only called when the measurement is not in the cache.\n     */\n    function _shrinkContentsUntilTheyFit(data, onReduceData, getElementToMeasureDimension) {\n        var dataToMeasure = data;\n        var measuredDimension = _getMeasuredDimension(data, getElementToMeasureDimension);\n        while (measuredDimension > _containerDimension) {\n            var nextMeasuredData = onReduceData(dataToMeasure);\n            // We don't want to get stuck in an infinite render loop when there are no more\n            // scaling steps, so implementations of onReduceData should return undefined when\n            // there are no more scaling states to apply.\n            if (nextMeasuredData === undefined) {\n                return {\n                    renderedData: dataToMeasure,\n                    resizeDirection: undefined,\n                    dataToMeasure: undefined,\n                };\n            }\n            measuredDimension = _measurementCache.getCachedMeasurement(nextMeasuredData);\n            // If the measurement isn't in the cache, we need to re-render with some data in a hidden div\n            if (measuredDimension === undefined) {\n                return {\n                    dataToMeasure: nextMeasuredData,\n                    resizeDirection: 'shrink',\n                };\n            }\n            dataToMeasure = nextMeasuredData;\n        }\n        return {\n            renderedData: dataToMeasure,\n            resizeDirection: undefined,\n            dataToMeasure: undefined,\n        };\n    }\n    /**\n     * This function should be called when the state changes in a manner that might allow for more content to fit\n     * on the screen, such as the window width/height growing.\n     * @param data - The initial data point to start measuring.\n     * @param onGrowData - Function that transforms the data into something that may take up more space when rendering.\n     * @param getElementToMeasureDimension - A function that returns the measurement of the rendered data.\n     * Only called when the measurement is not in the cache.\n     */\n    function _growDataUntilItDoesNotFit(data, onGrowData, getElementToMeasureDimension, onReduceData) {\n        var dataToMeasure = data;\n        var measuredDimension = _getMeasuredDimension(data, getElementToMeasureDimension);\n        while (measuredDimension < _containerDimension) {\n            var nextMeasuredData = onGrowData(dataToMeasure);\n            // We don't want to get stuck in an infinite render loop when there are no more\n            // scaling steps, so implementations of onGrowData should return undefined when\n            // there are no more scaling states to apply.\n            if (nextMeasuredData === undefined) {\n                return {\n                    renderedData: dataToMeasure,\n                    resizeDirection: undefined,\n                    dataToMeasure: undefined,\n                };\n            }\n            measuredDimension = _measurementCache.getCachedMeasurement(nextMeasuredData);\n            // If the measurement isn't in the cache, we need to re-render with some data in a hidden div\n            if (measuredDimension === undefined) {\n                return {\n                    dataToMeasure: nextMeasuredData,\n                };\n            }\n            dataToMeasure = nextMeasuredData;\n        }\n        // Once the loop is done, we should now shrink until the contents fit.\n        return __assign({ resizeDirection: 'shrink' }, _shrinkContentsUntilTheyFit(dataToMeasure, onReduceData, getElementToMeasureDimension));\n    }\n    /**\n     * Handles an update to the container width/height.\n     * Should only be called when we knew the previous container width/height.\n     * @param newDimension - The new width/height of the container.\n     * @param fullDimensionData - The initial data passed in as a prop to resizeGroup.\n     * @param renderedData - The data that was rendered prior to the container size changing.\n     * @param onGrowData - Set to true if the Resize group has an onGrowData function.\n     */\n    function _updateContainerDimension(newDimension, fullDimensionData, renderedData, onGrowData) {\n        var nextState;\n        if (newDimension > _containerDimension) {\n            if (onGrowData) {\n                nextState = {\n                    resizeDirection: 'grow',\n                    dataToMeasure: onGrowData(renderedData),\n                };\n            }\n            else {\n                nextState = {\n                    resizeDirection: 'shrink',\n                    dataToMeasure: fullDimensionData,\n                };\n            }\n        }\n        else {\n            nextState = {\n                resizeDirection: 'shrink',\n                dataToMeasure: renderedData,\n            };\n        }\n        _containerDimension = newDimension;\n        return __assign(__assign({}, nextState), { measureContainer: false });\n    }\n    function getNextState(props, currentState, getElementToMeasureDimension, newContainerDimension) {\n        // If there is no new container width/height or data to measure, there is no need for a new state update\n        if (newContainerDimension === undefined && currentState.dataToMeasure === undefined) {\n            return undefined;\n        }\n        if (newContainerDimension) {\n            // If we know the last container size and we rendered data at that width/height, we can do an optimized render\n            if (_containerDimension && currentState.renderedData && !currentState.dataToMeasure) {\n                return __assign(__assign({}, currentState), _updateContainerDimension(newContainerDimension, props.data, currentState.renderedData, props.onGrowData));\n            }\n            // If we are just setting the container width/height for the first time, we can't do any optimizations\n            _containerDimension = newContainerDimension;\n        }\n        var nextState = __assign(__assign({}, currentState), { measureContainer: false });\n        if (currentState.dataToMeasure) {\n            if (currentState.resizeDirection === 'grow' && props.onGrowData) {\n                nextState = __assign(__assign({}, nextState), _growDataUntilItDoesNotFit(currentState.dataToMeasure, props.onGrowData, getElementToMeasureDimension, props.onReduceData));\n            }\n            else {\n                nextState = __assign(__assign({}, nextState), _shrinkContentsUntilTheyFit(currentState.dataToMeasure, props.onReduceData, getElementToMeasureDimension));\n            }\n        }\n        return nextState;\n    }\n    /** Function that determines if we need to render content for measurement based on the measurement cache contents. */\n    function shouldRenderDataForMeasurement(dataToMeasure) {\n        if (!dataToMeasure || _measurementCache.getCachedMeasurement(dataToMeasure) !== undefined) {\n            return false;\n        }\n        return true;\n    }\n    function getInitialResizeGroupState(data) {\n        return {\n            dataToMeasure: __assign({}, data),\n            resizeDirection: 'grow',\n            measureContainer: true,\n        };\n    }\n    return {\n        getNextState: getNextState,\n        shouldRenderDataForMeasurement: shouldRenderDataForMeasurement,\n        getInitialResizeGroupState: getInitialResizeGroupState,\n    };\n};\n// Provides a context property that (if true) tells any child components that\n// they are only being used for measurement purposes and will not be visible.\nexport var MeasuredContext = React.createContext({ isMeasured: false });\n// Styles for the hidden div used for measurement\nvar hiddenDivStyles = { position: 'fixed', visibility: 'hidden' };\nvar hiddenParentStyles = { position: 'relative' };\nvar COMPONENT_NAME = 'ResizeGroup';\n/**\n * Use useReducer instead of userState because React is not batching the state updates\n * when state is set in callbacks of setTimeout or requestAnimationFrame.\n * See issue: https://github.com/facebook/react/issues/14259\n */\nfunction resizeDataReducer(state, action) {\n    var _a;\n    switch (action.type) {\n        case 'resizeData':\n            return __assign({}, action.value);\n        case 'dataToMeasure':\n            return __assign(__assign({}, state), { dataToMeasure: action.value, resizeDirection: 'grow', measureContainer: true });\n        default:\n            return __assign(__assign({}, state), (_a = {}, _a[action.type] = action.value, _a));\n    }\n}\nfunction useResizeState(props, nextResizeGroupStateProvider, rootRef) {\n    var initialStateData = useConst(function () { return nextResizeGroupStateProvider.getInitialResizeGroupState(props.data); });\n    var _a = React.useReducer(resizeDataReducer, initialStateData), resizeData = _a[0], dispatchResizeDataAction = _a[1];\n    // Reset state when new data is provided\n    React.useEffect(function () {\n        dispatchResizeDataAction({\n            type: 'dataToMeasure',\n            value: props.data,\n        });\n    }, [props.data]);\n    // Because it's possible that we may force more than one re-render per animation frame, we\n    // want to make sure that the RAF request is using the most recent data.\n    var stateRef = React.useRef(initialStateData);\n    stateRef.current = __assign({}, resizeData);\n    var updateResizeState = React.useCallback(function (nextState) {\n        if (nextState) {\n            dispatchResizeDataAction({\n                type: 'resizeData',\n                value: nextState,\n            });\n        }\n    }, []);\n    var remeasure = React.useCallback(function () {\n        if (rootRef.current) {\n            dispatchResizeDataAction({\n                type: 'measureContainer',\n                value: true,\n            });\n        }\n    }, [rootRef]);\n    return [stateRef, updateResizeState, remeasure];\n}\nfunction useResizingBehavior(props, rootRef) {\n    var nextResizeGroupStateProvider = useConst(getNextResizeGroupStateProvider);\n    // A div that can be used for the initial measurement so that we can avoid mounting a second instance\n    // of the component being measured for the initial render.\n    var initialHiddenDiv = React.useRef(null);\n    // A hidden div that is used for mounting a new instance of the component for measurement in a hidden\n    // div without unmounting the currently visible content.\n    var updateHiddenDiv = React.useRef(null);\n    // Tracks if any content has been rendered to the user. This enables us to do some performance optimizations\n    // for the initial render.\n    var hasRenderedContent = React.useRef(false);\n    var async = useAsync();\n    var _a = useResizeState(props, nextResizeGroupStateProvider, rootRef), stateRef = _a[0], updateResizeState = _a[1], remeasure = _a[2];\n    React.useEffect(function () {\n        var _a;\n        if (stateRef.current.renderedData) {\n            hasRenderedContent.current = true;\n            (_a = props.dataDidRender) === null || _a === void 0 ? void 0 : _a.call(props, stateRef.current.renderedData);\n        }\n    });\n    React.useEffect(function () {\n        async.requestAnimationFrame(function () {\n            var containerDimension = undefined;\n            if (stateRef.current.measureContainer && rootRef.current) {\n                var boundingRect = rootRef.current.getBoundingClientRect();\n                containerDimension =\n                    props.direction === ResizeGroupDirection.vertical ? boundingRect.height : boundingRect.width;\n            }\n            var nextState = nextResizeGroupStateProvider.getNextState(props, stateRef.current, function () {\n                var refToMeasure = !hasRenderedContent.current ? initialHiddenDiv : updateHiddenDiv;\n                if (!refToMeasure.current) {\n                    return 0;\n                }\n                var measuredBoundingRect = refToMeasure.current.getBoundingClientRect();\n                return props.direction === ResizeGroupDirection.vertical\n                    ? measuredBoundingRect.height\n                    : measuredBoundingRect.width;\n            }, containerDimension);\n            updateResizeState(nextState);\n        }, rootRef.current);\n    });\n    var win = useWindow();\n    useOnEvent(win, 'resize', async.debounce(remeasure, RESIZE_DELAY, { leading: true }));\n    var dataNeedsMeasuring = nextResizeGroupStateProvider.shouldRenderDataForMeasurement(stateRef.current.dataToMeasure);\n    var isInitialMeasure = !hasRenderedContent.current && dataNeedsMeasuring;\n    return [\n        stateRef.current.dataToMeasure,\n        stateRef.current.renderedData,\n        remeasure,\n        initialHiddenDiv,\n        updateHiddenDiv,\n        dataNeedsMeasuring,\n        isInitialMeasure,\n    ];\n}\nfunction useDebugWarnings(props) {\n    if (process.env.NODE_ENV !== 'production') {\n        // eslint-disable-next-line react-hooks/rules-of-hooks -- build-time conditional\n        useWarnings({\n            name: COMPONENT_NAME,\n            props: props,\n            deprecations: { styles: 'className' },\n        });\n    }\n}\nvar measuredContextValue = { isMeasured: true };\nexport var ResizeGroupBase = React.forwardRef(function (props, forwardedRef) {\n    var rootRef = React.useRef(null);\n    // The root div which is the container inside of which we are trying to fit content.\n    var mergedRootRef = useMergedRefs(rootRef, forwardedRef);\n    var _a = useResizingBehavior(props, rootRef), dataToMeasure = _a[0], renderedData = _a[1], remeasure = _a[2], initialHiddenDiv = _a[3], updateHiddenDiv = _a[4], dataNeedsMeasuring = _a[5], isInitialMeasure = _a[6];\n    React.useImperativeHandle(props.componentRef, function () { return ({ remeasure: remeasure }); }, [remeasure]);\n    useDebugWarnings(props);\n    var className = props.className, onRenderData = props.onRenderData;\n    var divProps = getNativeProps(props, divProperties, ['data']);\n    // We only ever render the final content to the user. All measurements are done in a hidden div.\n    // For the initial render, we want this to be as fast as possible, so we need to make sure that we only mount one\n    // version of the component for measurement and the final render. For renders that update what is on screen, we\n    // want to make sure that there are no jarring effects such as the screen flashing as we apply scaling steps for\n    // measurement. In the update case, we mount a second version of the component just for measurement purposes and\n    // leave the rendered content untouched until we know the next state to show to the user.\n    return (React.createElement(\"div\", __assign({}, divProps, { className: className, ref: mergedRootRef }),\n        React.createElement(\"div\", { style: hiddenParentStyles },\n            dataNeedsMeasuring && !isInitialMeasure && (React.createElement(\"div\", { style: hiddenDivStyles, ref: updateHiddenDiv },\n                React.createElement(MeasuredContext.Provider, { value: measuredContextValue }, onRenderData(dataToMeasure)))),\n            React.createElement(\"div\", { ref: initialHiddenDiv, style: isInitialMeasure ? hiddenDivStyles : undefined, \"data-automation-id\": \"visibleContent\" }, isInitialMeasure ? onRenderData(dataToMeasure) : renderedData && onRenderData(renderedData)))));\n});\nResizeGroupBase.displayName = 'ResizeGroupBase';\n//# sourceMappingURL=ResizeGroup.base.js.map","import { ResizeGroupBase } from './ResizeGroup.base';\nexport var ResizeGroup = ResizeGroupBase;\n//# sourceMappingURL=ResizeGroup.js.map","import { __assign, __rest } from \"tslib\";\nimport { memoizeFunction } from '../../Utilities';\nvar COMMAND_BAR_HEIGHT = 44;\nexport var getStyles = function (props) {\n    var className = props.className, theme = props.theme;\n    var semanticColors = theme.semanticColors;\n    return {\n        root: [\n            theme.fonts.medium,\n            'ms-CommandBar',\n            {\n                display: 'flex',\n                backgroundColor: semanticColors.bodyBackground,\n                padding: '0 14px 0 24px',\n                height: COMMAND_BAR_HEIGHT,\n            },\n            className,\n        ],\n        primarySet: [\n            'ms-CommandBar-primaryCommand',\n            {\n                flexGrow: '1',\n                display: 'flex',\n                alignItems: 'stretch',\n            },\n        ],\n        secondarySet: [\n            'ms-CommandBar-secondaryCommand',\n            {\n                flexShrink: '0',\n                display: 'flex',\n                alignItems: 'stretch',\n            },\n        ],\n    };\n};\nexport var getCommandButtonStyles = memoizeFunction(function (customStyles) {\n    var rootStyles = {\n        height: '100%',\n    };\n    var labelStyles = {\n        whiteSpace: 'nowrap',\n    };\n    var _a = customStyles || {}, root = _a.root, label = _a.label, restCustomStyles = __rest(_a, [\"root\", \"label\"]);\n    return __assign(__assign({}, restCustomStyles), { root: root ? [rootStyles, root] : rootStyles, label: label ? [labelStyles, label] : labelStyles });\n});\n//# sourceMappingURL=CommandBar.styles.js.map","import { __assign } from \"tslib\";\nimport * as React from 'react';\nimport { KeytipManager } from '../../utilities/keytips/KeytipManager';\nimport { useConst, usePrevious } from '@fluentui/react-hooks';\nvar registerPersistedKeytips = function (keytipsToRegister, keytipManager, registeredPersistedKeytips) {\n    for (var _i = 0, keytipsToRegister_1 = keytipsToRegister; _i < keytipsToRegister_1.length; _i++) {\n        var keytip = keytipsToRegister_1[_i];\n        var uniqueID = keytipManager.register(keytip, true);\n        // Update map\n        registeredPersistedKeytips[uniqueID] = keytip;\n    }\n};\nvar unregisterPersistedKeytips = function (keytipManager, registeredPersistedKeytips) {\n    for (var _i = 0, _a = Object.keys(registeredPersistedKeytips); _i < _a.length; _i++) {\n        var uniqueID = _a[_i];\n        keytipManager.unregister(registeredPersistedKeytips[uniqueID], uniqueID, true);\n        delete registeredPersistedKeytips[uniqueID];\n    }\n};\nvar useKeytipRegistrations = function (registeredPersistedKeytips, keytipsToRegister, keytipManager) {\n    var prevPersistedKeytips = usePrevious(registeredPersistedKeytips);\n    // Update\n    React.useEffect(function () {\n        if (prevPersistedKeytips) {\n            // Unregister old keytips\n            unregisterPersistedKeytips(keytipManager, prevPersistedKeytips);\n            // Register new keytips\n            registerPersistedKeytips(keytipsToRegister, keytipManager, registeredPersistedKeytips);\n        }\n    });\n    // Mount/Unmount\n    React.useEffect(function () {\n        // Register on mount\n        registerPersistedKeytips(keytipsToRegister, keytipManager, registeredPersistedKeytips);\n        return function () {\n            // Unregister on unmount\n            unregisterPersistedKeytips(keytipManager, registeredPersistedKeytips);\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n};\nexport var OverflowButton = function (props) {\n    var keytipManager = KeytipManager.getInstance();\n    var className = props.className, overflowItems = props.overflowItems, keytipSequences = props.keytipSequences, itemSubMenuProvider = props.itemSubMenuProvider, onRenderOverflowButton = props.onRenderOverflowButton;\n    var persistedKeytips = useConst({});\n    // Gets the subMenu for an overflow item\n    var getSubMenuForItem = React.useCallback(function (item) {\n        // Checks if itemSubMenuProvider has been defined, if not defaults to subMenuProps\n        if (itemSubMenuProvider) {\n            return itemSubMenuProvider(item);\n        }\n        if (item.subMenuProps) {\n            return item.subMenuProps.items;\n        }\n        return undefined;\n    }, [itemSubMenuProvider]);\n    var _a = React.useMemo(function () {\n        var newKeytipsToRegister = [];\n        var newOverflowItems = [];\n        if (keytipSequences) {\n            overflowItems === null || overflowItems === void 0 ? void 0 : overflowItems.forEach(function (overflowItem) {\n                var _a;\n                var keytip = overflowItem.keytipProps;\n                if (keytip) {\n                    // Create persisted keytip\n                    var persistedKeytip = {\n                        content: keytip.content,\n                        keySequences: keytip.keySequences,\n                        disabled: keytip.disabled || !!(overflowItem.disabled || overflowItem.isDisabled),\n                        hasDynamicChildren: keytip.hasDynamicChildren,\n                        hasMenu: keytip.hasMenu,\n                    };\n                    if (keytip.hasDynamicChildren || getSubMenuForItem(overflowItem)) {\n                        // If the keytip has a submenu or children nodes, change onExecute to persistedKeytipExecute\n                        persistedKeytip.onExecute = keytipManager.menuExecute.bind(keytipManager, keytipSequences, (_a = overflowItem === null || overflowItem === void 0 ? void 0 : overflowItem.keytipProps) === null || _a === void 0 ? void 0 : _a.keySequences);\n                        persistedKeytip.hasOverflowSubMenu = true;\n                    }\n                    else {\n                        // If the keytip doesn't have a submenu, just execute the original function\n                        persistedKeytip.onExecute = keytip.onExecute;\n                    }\n                    newKeytipsToRegister.push(persistedKeytip);\n                    // Add the overflow sequence to this item\n                    var newOverflowItem = __assign(__assign({}, overflowItem), { keytipProps: __assign(__assign({}, keytip), { overflowSetSequence: keytipSequences }) });\n                    newOverflowItems === null || newOverflowItems === void 0 ? void 0 : newOverflowItems.push(newOverflowItem);\n                }\n                else {\n                    // Nothing to change, add overflowItem to list\n                    newOverflowItems === null || newOverflowItems === void 0 ? void 0 : newOverflowItems.push(overflowItem);\n                }\n            });\n        }\n        else {\n            newOverflowItems = overflowItems;\n        }\n        return { modifiedOverflowItems: newOverflowItems, keytipsToRegister: newKeytipsToRegister };\n    }, [overflowItems, getSubMenuForItem, keytipManager, keytipSequences]), modifiedOverflowItems = _a.modifiedOverflowItems, keytipsToRegister = _a.keytipsToRegister;\n    useKeytipRegistrations(persistedKeytips, keytipsToRegister, keytipManager);\n    return React.createElement(\"div\", { className: className }, onRenderOverflowButton(modifiedOverflowItems));\n};\n//# sourceMappingURL=OverflowButton.js.map","import { __assign } from \"tslib\";\nimport * as React from 'react';\nimport { useMergedRefs } from '@fluentui/react-hooks';\nimport { classNamesFunction, divProperties, elementContains, getNativeProps, focusFirstChild } from '../../Utilities';\nimport { OverflowButton } from './OverflowButton';\nvar getClassNames = classNamesFunction();\nvar COMPONENT_NAME = 'OverflowSet';\nvar useComponentRef = function (props, divContainer) {\n    React.useImperativeHandle(props.componentRef, function () { return ({\n        focus: function (_forceIntoFirstElement, bypassHiddenElements) {\n            var focusSucceeded = false;\n            if (divContainer.current) {\n                focusSucceeded = focusFirstChild(divContainer.current, bypassHiddenElements);\n            }\n            return focusSucceeded;\n        },\n        focusElement: function (childElement) {\n            var focusSucceeded = false;\n            if (!childElement) {\n                return false;\n            }\n            if (divContainer.current && elementContains(divContainer.current, childElement)) {\n                childElement.focus();\n                focusSucceeded = document.activeElement === childElement;\n            }\n            return focusSucceeded;\n        },\n    }); }, [divContainer]);\n};\nexport var OverflowSetBase = React.forwardRef(function (props, forwardedRef) {\n    var divContainer = React.useRef(null);\n    var mergedRef = useMergedRefs(divContainer, forwardedRef);\n    useComponentRef(props, divContainer);\n    var items = props.items, overflowItems = props.overflowItems, className = props.className, styles = props.styles, vertical = props.vertical, role = props.role, _a = props.overflowSide, overflowSide = _a === void 0 ? 'end' : _a, onRenderItem = props.onRenderItem;\n    var classNames = getClassNames(styles, { className: className, vertical: vertical });\n    var showOverflow = !!overflowItems && overflowItems.length > 0;\n    return (React.createElement(\"div\", __assign({}, getNativeProps(props, divProperties), { role: role || 'group', \"aria-orientation\": role === 'menubar' ? (vertical === true ? 'vertical' : 'horizontal') : undefined, className: classNames.root, ref: mergedRef }),\n        overflowSide === 'start' && showOverflow && React.createElement(OverflowButton, __assign({}, props, { className: classNames.overflowButton })),\n        items &&\n            items.map(function (item, i) { return (React.createElement(\"div\", { className: classNames.item, key: item.key, role: \"none\" }, onRenderItem(item))); }),\n        overflowSide === 'end' && showOverflow && React.createElement(OverflowButton, __assign({}, props, { className: classNames.overflowButton }))));\n});\nOverflowSetBase.displayName = COMPONENT_NAME;\n//# sourceMappingURL=OverflowSet.base.js.map","var overflowItemStyle = {\n    flexShrink: 0,\n    display: 'inherit',\n};\nexport var getStyles = function (props) {\n    var className = props.className, vertical = props.vertical;\n    return {\n        root: [\n            'ms-OverflowSet',\n            {\n                position: 'relative',\n                display: 'flex',\n                flexWrap: 'nowrap',\n            },\n            vertical && { flexDirection: 'column' },\n            className,\n        ],\n        item: ['ms-OverflowSet-item', overflowItemStyle],\n        overflowButton: ['ms-OverflowSet-overflowButton', overflowItemStyle],\n    };\n};\n//# sourceMappingURL=OverflowSet.styles.js.map","import { styled } from '../../Utilities';\nimport { OverflowSetBase } from './OverflowSet.base';\nimport { getStyles } from './OverflowSet.styles';\nexport var OverflowSet = styled(OverflowSetBase, getStyles, undefined, {\n    scope: 'OverflowSet',\n});\n//# sourceMappingURL=OverflowSet.js.map","import { __assign, __extends, __spreadArray } from \"tslib\";\nimport * as React from 'react';\nimport { classNamesFunction, css, nullRender, getNativeProps, divProperties, composeComponentAs, initializeComponentRef, } from '../../Utilities';\nimport { OverflowSet } from '../../OverflowSet';\nimport { ResizeGroup } from '../../ResizeGroup';\nimport { FocusZone, FocusZoneDirection } from '../../FocusZone';\nimport { CommandBarButton } from '../../Button';\nimport { TooltipHost } from '../../Tooltip';\nimport { getCommandButtonStyles } from './CommandBar.styles';\nvar getClassNames = classNamesFunction();\nvar CommandBarBase = /** @class */ (function (_super) {\n    __extends(CommandBarBase, _super);\n    function CommandBarBase(props) {\n        var _this = _super.call(this, props) || this;\n        _this._overflowSet = React.createRef();\n        _this._resizeGroup = React.createRef();\n        _this._onRenderData = function (data) {\n            var _a = _this.props, ariaLabel = _a.ariaLabel, primaryGroupAriaLabel = _a.primaryGroupAriaLabel, farItemsGroupAriaLabel = _a.farItemsGroupAriaLabel;\n            var hasSecondSet = data.farItems && data.farItems.length > 0;\n            return (React.createElement(FocusZone, { className: css(_this._classNames.root), direction: FocusZoneDirection.horizontal, role: 'menubar', \"aria-label\": ariaLabel },\n                React.createElement(OverflowSet, { role: hasSecondSet ? 'group' : 'none', \"aria-label\": hasSecondSet ? primaryGroupAriaLabel : undefined, componentRef: _this._overflowSet, className: css(_this._classNames.primarySet), items: data.primaryItems, overflowItems: data.overflowItems.length ? data.overflowItems : undefined, onRenderItem: _this._onRenderItem, onRenderOverflowButton: _this._onRenderOverflowButton }),\n                hasSecondSet && (React.createElement(OverflowSet, { role: \"group\", \"aria-label\": farItemsGroupAriaLabel, className: css(_this._classNames.secondarySet), items: data.farItems, onRenderItem: _this._onRenderItem, onRenderOverflowButton: nullRender }))));\n        };\n        _this._onRenderItem = function (item) {\n            if (item.onRender) {\n                // These are the top level items, there is no relevant menu dismissing function to\n                // provide for the IContextualMenuItem onRender function. Pass in a no op function instead.\n                return item.onRender(item, function () { return undefined; });\n            }\n            // eslint-disable-next-line deprecation/deprecation\n            var itemText = item.text || item.name;\n            var commandButtonProps = __assign(__assign({ allowDisabledFocus: true, role: 'menuitem' }, item), { styles: getCommandButtonStyles(item.buttonStyles), className: css('ms-CommandBarItem-link', item.className), text: !item.iconOnly ? itemText : undefined, menuProps: item.subMenuProps, onClick: _this._onButtonClick(item) });\n            if (item.iconOnly && (itemText !== undefined || item.tooltipHostProps)) {\n                return (React.createElement(TooltipHost, __assign({ role: \"none\", content: itemText, setAriaDescribedBy: false }, item.tooltipHostProps), _this._commandButton(item, commandButtonProps)));\n            }\n            return _this._commandButton(item, commandButtonProps);\n        };\n        _this._commandButton = function (item, props) {\n            var ButtonAs = _this.props.buttonAs;\n            var CommandBarButtonAs = item.commandBarButtonAs;\n            var DefaultButtonAs = CommandBarButton;\n            // The prop types between these three possible implementations overlap enough that a force-cast is safe.\n            var Type = DefaultButtonAs;\n            if (CommandBarButtonAs) {\n                Type = composeComponentAs(CommandBarButtonAs, Type);\n            }\n            if (ButtonAs) {\n                Type = composeComponentAs(ButtonAs, Type);\n            }\n            // Always pass the default implementation to the override so it may be composed.\n            return React.createElement(Type, __assign({}, props));\n        };\n        _this._onRenderOverflowButton = function (overflowItems) {\n            var _a = _this.props.overflowButtonProps, overflowButtonProps = _a === void 0 ? {} : _a;\n            var combinedOverflowItems = __spreadArray(__spreadArray([], (overflowButtonProps.menuProps ? overflowButtonProps.menuProps.items : [])), overflowItems);\n            var overflowProps = __assign(__assign({ role: 'menuitem' }, overflowButtonProps), { styles: __assign({ menuIcon: { fontSize: '17px' } }, overflowButtonProps.styles), className: css('ms-CommandBar-overflowButton', overflowButtonProps.className), menuProps: __assign(__assign({}, overflowButtonProps.menuProps), { items: combinedOverflowItems }), menuIconProps: __assign({ iconName: 'More' }, overflowButtonProps.menuIconProps) });\n            var OverflowButtonType = _this.props.overflowButtonAs\n                ? composeComponentAs(_this.props.overflowButtonAs, CommandBarButton)\n                : CommandBarButton;\n            return React.createElement(OverflowButtonType, __assign({}, overflowProps));\n        };\n        _this._onReduceData = function (data) {\n            var _a = _this.props, shiftOnReduce = _a.shiftOnReduce, onDataReduced = _a.onDataReduced;\n            var primaryItems = data.primaryItems, overflowItems = data.overflowItems, cacheKey = data.cacheKey;\n            var farItems = data.farItems;\n            // Use first item if shiftOnReduce, otherwise use last item\n            var movedItem = primaryItems[shiftOnReduce ? 0 : primaryItems.length - 1];\n            if (movedItem !== undefined) {\n                movedItem.renderedInOverflow = true;\n                overflowItems = __spreadArray([movedItem], overflowItems);\n                primaryItems = shiftOnReduce ? primaryItems.slice(1) : primaryItems.slice(0, -1);\n                var newData = __assign(__assign({}, data), { primaryItems: primaryItems, overflowItems: overflowItems });\n                cacheKey = _this._computeCacheKey({ primaryItems: primaryItems, overflow: overflowItems.length > 0, farItems: farItems });\n                if (onDataReduced) {\n                    onDataReduced(movedItem);\n                }\n                newData.cacheKey = cacheKey;\n                return newData;\n            }\n            return undefined;\n        };\n        _this._onGrowData = function (data) {\n            var _a = _this.props, shiftOnReduce = _a.shiftOnReduce, onDataGrown = _a.onDataGrown;\n            var minimumOverflowItems = data.minimumOverflowItems;\n            var primaryItems = data.primaryItems, overflowItems = data.overflowItems, cacheKey = data.cacheKey;\n            var farItems = data.farItems;\n            var movedItem = overflowItems[0];\n            // Make sure that moved item exists and is not one of the original overflow items\n            if (movedItem !== undefined && overflowItems.length > minimumOverflowItems) {\n                movedItem.renderedInOverflow = false;\n                overflowItems = overflowItems.slice(1);\n                // if shiftOnReduce, movedItem goes first, otherwise, last.\n                primaryItems = shiftOnReduce ? __spreadArray([movedItem], primaryItems) : __spreadArray(__spreadArray([], primaryItems), [movedItem]);\n                var newData = __assign(__assign({}, data), { primaryItems: primaryItems, overflowItems: overflowItems });\n                cacheKey = _this._computeCacheKey({ primaryItems: primaryItems, overflow: overflowItems.length > 0, farItems: farItems });\n                if (onDataGrown) {\n                    onDataGrown(movedItem);\n                }\n                newData.cacheKey = cacheKey;\n                return newData;\n            }\n            return undefined;\n        };\n        initializeComponentRef(_this);\n        return _this;\n    }\n    CommandBarBase.prototype.render = function () {\n        var _a = this.props, items = _a.items, overflowItems = _a.overflowItems, farItems = _a.farItems, styles = _a.styles, theme = _a.theme, dataDidRender = _a.dataDidRender, _b = _a.onReduceData, onReduceData = _b === void 0 ? this._onReduceData : _b, _c = _a.onGrowData, onGrowData = _c === void 0 ? this._onGrowData : _c, _d = _a.resizeGroupAs, ResizeGroupAs = _d === void 0 ? ResizeGroup : _d;\n        var commandBarData = {\n            primaryItems: __spreadArray([], items),\n            overflowItems: __spreadArray([], overflowItems),\n            minimumOverflowItems: __spreadArray([], overflowItems).length,\n            farItems: farItems,\n            cacheKey: this._computeCacheKey({\n                primaryItems: __spreadArray([], items),\n                overflow: overflowItems && overflowItems.length > 0,\n                farItems: farItems,\n            }),\n        };\n        this._classNames = getClassNames(styles, { theme: theme });\n        // ResizeGroup will render these attributes to the root <div>.\n        // TODO We may need to elevate classNames from <FocusZone> into <ResizeGroup> ?\n        var nativeProps = getNativeProps(this.props, divProperties);\n        return (React.createElement(ResizeGroupAs, __assign({}, nativeProps, { componentRef: this._resizeGroup, data: commandBarData, onReduceData: onReduceData, onGrowData: onGrowData, onRenderData: this._onRenderData, dataDidRender: dataDidRender })));\n    };\n    CommandBarBase.prototype.focus = function () {\n        var overflowSet = this._overflowSet.current;\n        overflowSet && overflowSet.focus();\n    };\n    CommandBarBase.prototype.remeasure = function () {\n        this._resizeGroup.current && this._resizeGroup.current.remeasure();\n    };\n    CommandBarBase.prototype._onButtonClick = function (item) {\n        return function (ev) {\n            // inactive is deprecated. remove check in 7.0\n            // eslint-disable-next-line deprecation/deprecation\n            if (item.inactive) {\n                return;\n            }\n            if (item.onClick) {\n                item.onClick(ev, item);\n            }\n        };\n    };\n    CommandBarBase.prototype._computeCacheKey = function (data) {\n        var primaryItems = data.primaryItems, overflow = data.overflow, farItems = data.farItems;\n        var returnKey = function (acc, current) {\n            var _a = current.cacheKey, cacheKey = _a === void 0 ? current.key : _a;\n            return acc + cacheKey;\n        };\n        var primaryKey = primaryItems && primaryItems.reduce(returnKey, '');\n        var overflowKey = overflow ? 'overflow' : '';\n        var farKey = farItems && farItems.reduce(returnKey, '');\n        return [primaryKey, overflowKey, farKey].join('');\n    };\n    CommandBarBase.defaultProps = {\n        items: [],\n        overflowItems: [],\n    };\n    return CommandBarBase;\n}(React.Component));\nexport { CommandBarBase };\n//# sourceMappingURL=CommandBar.base.js.map","import { styled } from '../../Utilities';\nimport { CommandBarBase } from './CommandBar.base';\nimport { getStyles } from './CommandBar.styles';\n// Create a CommandBar variant which uses these default styles and this styled subcomponent.\nexport var CommandBar = styled(CommandBarBase, getStyles, undefined, {\n    scope: 'CommandBar',\n});\n//# sourceMappingURL=CommandBar.js.map","import { getWindow } from '@fluentui/utilities';\n/**\n * Wrapper for ResizeObserver, with fallback for browsers that don't support ResizeObserver.\n *\n * Calls the onResize callback once layout is complete, and again whenever any of the target(s) change size.\n * Or if ResizeObserver isn't supported, calls the callback whenever the window changes size.\n *\n * @param target - Either a single element, or array of elements to watch for size changes.\n * @param onResize - Callback to be notified when layout is complete, and when the target(s) change size.\n *    If this browser supports ResizeObserver, the callback will be passed the ResizeObserverEntry[] array.\n *    Otherwise, the entries array will be undefined, and you'll need to find another way to get the element's size,\n *    (e.g. clientWidth/clientHeight or getBoundingClientRect).\n *\n * @returns A function to clean up the observer/listener.\n */\nexport var observeResize = function (target, onResize) {\n    if (typeof ResizeObserver !== 'undefined') {\n        var observer_1 = new ResizeObserver(onResize);\n        if (Array.isArray(target)) {\n            target.forEach(function (t) { return observer_1.observe(t); });\n        }\n        else {\n            observer_1.observe(target);\n        }\n        return function () { return observer_1.disconnect(); };\n    }\n    else {\n        // Fallback for browsers that don't support ResizeObserver\n        var onResizeWrapper_1 = function () { return onResize(undefined); };\n        var win_1 = getWindow(Array.isArray(target) ? target[0] : target);\n        if (!win_1) {\n            // Can't listen for resize if we can't get the window object\n            return function () {\n                // Nothing to clean up\n            };\n        }\n        // Listen for the first animation frame, which will happen after layout is complete\n        var animationFrameId_1 = win_1.requestAnimationFrame(onResizeWrapper_1);\n        win_1.addEventListener('resize', onResizeWrapper_1, false);\n        return function () {\n            win_1.cancelAnimationFrame(animationFrameId_1);\n            win_1.removeEventListener('resize', onResizeWrapper_1, false);\n        };\n    }\n};\n//# sourceMappingURL=observeResize.js.map","import * as React from 'react';\nimport { useIsomorphicLayoutEffect, useRefEffect } from '@fluentui/react-hooks';\nimport { getWindow } from '@fluentui/utilities';\nimport { observeResize } from './observeResize';\n/**\n * Track whether any items don't fit within their container, and move them to the overflow menu.\n * Items are moved into the overflow menu from back to front, excluding pinned items.\n *\n * The overflow menu button must be the last sibling of all of the items that can be put into the overflow, and it\n * must be hooked up to the `setMenuButtonRef` setter function that's returned by `useOverflow`:\n * ```ts\n * const overflow = useOverflow(...);\n * ```\n * ```jsx\n * <Container>\n *  <Item /> // Index 0\n *  <Item /> // Index 1\n *  ...\n *  <Button ref={overflow.setMenuButtonRef} /> // Can be any React.Component or HTMLElement\n * </Container>\n * ```\n */\nexport var useOverflow = function (_a) {\n    var onOverflowItemsChanged = _a.onOverflowItemsChanged, rtl = _a.rtl, pinnedIndex = _a.pinnedIndex;\n    var updateOverflowRef = React.useRef();\n    var containerWidthRef = React.useRef();\n    // Attach a resize observer to the container\n    var containerRef = useRefEffect(function (container) {\n        var cleanupObserver = observeResize(container, function (entries) {\n            containerWidthRef.current = entries ? entries[0].contentRect.width : container.clientWidth;\n            if (updateOverflowRef.current) {\n                updateOverflowRef.current();\n            }\n        });\n        return function () {\n            cleanupObserver();\n            containerWidthRef.current = undefined;\n        };\n    });\n    var menuButtonRef = useRefEffect(function (menuButton) {\n        containerRef(menuButton.parentElement);\n        return function () { return containerRef(null); };\n    });\n    useIsomorphicLayoutEffect(function () {\n        var container = containerRef.current;\n        var menuButton = menuButtonRef.current;\n        if (!container || !menuButton) {\n            return;\n        }\n        // items contains the container's children, excluding the overflow menu button itself\n        var items = [];\n        for (var i = 0; i < container.children.length; i++) {\n            var item = container.children[i];\n            if (item instanceof HTMLElement && item !== menuButton) {\n                items.push(item);\n            }\n        }\n        // Keep track of the minimum width of the container to fit each child index.\n        // This cache is an integral part of the algorithm and not just a performance optimization: it allows us to\n        // recalculate the overflowIndex on subsequent resizes even if some items are already inside the overflow.\n        var minContainerWidth = [];\n        var extraWidth = 0; // The accumulated width of items that don't move into the overflow\n        updateOverflowRef.current = function () {\n            var containerWidth = containerWidthRef.current;\n            if (containerWidth === undefined) {\n                return;\n            }\n            // Iterate the items in reverse order until we find one that fits within the bounds of the container\n            for (var i = items.length - 1; i >= 0; i--) {\n                // Calculate the min container width for this item if we haven't done so yet\n                if (minContainerWidth[i] === undefined) {\n                    var itemOffsetEnd = rtl ? containerWidth - items[i].offsetLeft : items[i].offsetLeft + items[i].offsetWidth;\n                    // If the item after this one is pinned, reserve space for it\n                    if (i + 1 < items.length && i + 1 === pinnedIndex) {\n                        // Use distance between the end of the previous item and this one (rather than the\n                        // pinned item's offsetWidth), to account for any margin between the items.\n                        extraWidth = minContainerWidth[i + 1] - itemOffsetEnd;\n                    }\n                    // Reserve space for the menu button after the first item was added to the overflow\n                    if (i === items.length - 2) {\n                        extraWidth += menuButton.offsetWidth;\n                    }\n                    minContainerWidth[i] = itemOffsetEnd + extraWidth;\n                }\n                if (containerWidth > minContainerWidth[i]) {\n                    setOverflowIndex(i + 1);\n                    return;\n                }\n            }\n            // If we got here, nothing fits outside the overflow\n            setOverflowIndex(0);\n        };\n        var prevOverflowIndex = items.length;\n        var setOverflowIndex = function (overflowIndex) {\n            if (prevOverflowIndex !== overflowIndex) {\n                prevOverflowIndex = overflowIndex;\n                onOverflowItemsChanged(overflowIndex, items.map(function (ele, index) { return ({\n                    ele: ele,\n                    isOverflowing: index >= overflowIndex && index !== pinnedIndex,\n                }); }));\n            }\n        };\n        var cancelAnimationFrame = undefined;\n        // If the container width is already known from a previous render, update the overflow with its width.\n        // Do this in an animation frame to avoid forcing layout to happen early.\n        if (containerWidthRef.current !== undefined) {\n            var win_1 = getWindow(container);\n            if (win_1) {\n                var animationFrameId_1 = win_1.requestAnimationFrame(updateOverflowRef.current);\n                cancelAnimationFrame = function () { return win_1.cancelAnimationFrame(animationFrameId_1); };\n            }\n        }\n        return function () {\n            if (cancelAnimationFrame) {\n                cancelAnimationFrame();\n            }\n            // On cleanup, need to remove all items from the overflow\n            // so they don't have stale properties on the next render\n            setOverflowIndex(items.length);\n            updateOverflowRef.current = undefined;\n        };\n    });\n    return { menuButtonRef: menuButtonRef };\n};\n//# sourceMappingURL=useOverflow.js.map","import { __assign, __extends } from \"tslib\";\nimport * as React from 'react';\nimport { getNativeProps, divProperties, initializeComponentRef, warnDeprecations } from '@fluentui/utilities';\nvar COMPONENT_NAME = 'PivotItem';\nvar PivotItem = /** @class */ (function (_super) {\n    __extends(PivotItem, _super);\n    function PivotItem(props) {\n        var _this = _super.call(this, props) || this;\n        initializeComponentRef(_this);\n        warnDeprecations(COMPONENT_NAME, props, {\n            linkText: 'headerText',\n        });\n        return _this;\n    }\n    PivotItem.prototype.render = function () {\n        return React.createElement(\"div\", __assign({}, getNativeProps(this.props, divProperties)), this.props.children);\n    };\n    return PivotItem;\n}(React.Component));\nexport { PivotItem };\n//# sourceMappingURL=PivotItem.js.map","import { __assign, __rest } from \"tslib\";\nimport * as React from 'react';\nimport { useControllableValue, useId } from '@fluentui/react-hooks';\nimport { classNamesFunction, css, divProperties, getNativeProps, getRTL, KeyCodes, warn } from '@fluentui/utilities';\nimport { CommandButton } from '../../Button';\nimport { useOverflow } from '../../utilities/useOverflow';\nimport { FocusZone, FocusZoneDirection } from '../../FocusZone';\nimport { DirectionalHint } from '../ContextualMenu/ContextualMenu.types';\nimport { Icon } from '../Icon/Icon';\nimport { PivotItem } from './PivotItem';\nvar getClassNames = classNamesFunction();\nvar COMPONENT_NAME = 'Pivot';\nvar getTabId = function (props, pivotId, itemKey, index) {\n    if (props.getTabId) {\n        return props.getTabId(itemKey, index);\n    }\n    return pivotId + (\"-Tab\" + index);\n};\n// Gets the set of PivotLinks as array of IPivotItemProps\n// The set of Links is determined by child components of type PivotItem\nvar getLinkItems = function (props, pivotId) {\n    var result = {\n        links: [],\n        keyToIndexMapping: {},\n        keyToTabIdMapping: {},\n    };\n    React.Children.forEach(React.Children.toArray(props.children), function (child, index) {\n        if (isPivotItem(child)) {\n            // eslint-disable-next-line deprecation/deprecation\n            var _a = child.props, linkText = _a.linkText, pivotItemProps = __rest(_a, [\"linkText\"]);\n            var itemKey = child.props.itemKey || index.toString();\n            result.links.push(__assign(__assign({ headerText: linkText }, pivotItemProps), { itemKey: itemKey }));\n            result.keyToIndexMapping[itemKey] = index;\n            result.keyToTabIdMapping[itemKey] = getTabId(props, pivotId, itemKey, index);\n        }\n        else if (child) {\n            warn('The children of a Pivot component must be of type PivotItem to be rendered.');\n        }\n    });\n    return result;\n};\nvar isPivotItem = function (item) {\n    var _a;\n    return React.isValidElement(item) && ((_a = item.type) === null || _a === void 0 ? void 0 : _a.name) === PivotItem.name;\n};\nexport var PivotBase = React.forwardRef(function (props, ref) {\n    var focusZoneRef = React.useRef(null);\n    var overflowMenuButtonComponentRef = React.useRef(null);\n    var pivotId = useId('Pivot');\n    var _a = useControllableValue(props.selectedKey, props.defaultSelectedKey), selectedKey = _a[0], setSelectedKey = _a[1];\n    var componentRef = props.componentRef, theme = props.theme, linkSize = props.linkSize, linkFormat = props.linkFormat, overflowBehavior = props.overflowBehavior, overflowAriaLabel = props.overflowAriaLabel, focusZoneProps = props.focusZoneProps, overflowButtonAs = props.overflowButtonAs;\n    var classNames;\n    var nameProps = {\n        'aria-label': props['aria-label'],\n        'aria-labelledby': props['aria-labelledby'],\n    };\n    var divProps = getNativeProps(props, divProperties, [\n        'aria-label',\n        'aria-labelledby',\n    ]);\n    var linkCollection = getLinkItems(props, pivotId);\n    React.useImperativeHandle(componentRef, function () { return ({\n        focus: function () {\n            var _a;\n            (_a = focusZoneRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n        },\n    }); });\n    var renderLinkContent = function (link) {\n        if (!link) {\n            return null;\n        }\n        var itemCount = link.itemCount, itemIcon = link.itemIcon, headerText = link.headerText;\n        return (React.createElement(\"span\", { className: classNames.linkContent },\n            itemIcon !== undefined && (React.createElement(\"span\", { className: classNames.icon },\n                React.createElement(Icon, { iconName: itemIcon }))),\n            headerText !== undefined && React.createElement(\"span\", { className: classNames.text },\n                \" \",\n                link.headerText),\n            itemCount !== undefined && React.createElement(\"span\", { className: classNames.count },\n                \" (\",\n                itemCount,\n                \")\")));\n    };\n    var renderPivotLink = function (renderLinkCollection, link, renderPivotLinkSelectedKey, className) {\n        var itemKey = link.itemKey, headerButtonProps = link.headerButtonProps, onRenderItemLink = link.onRenderItemLink;\n        var tabId = renderLinkCollection.keyToTabIdMapping[itemKey];\n        var linkContent;\n        var isSelected = renderPivotLinkSelectedKey === itemKey;\n        if (onRenderItemLink) {\n            linkContent = onRenderItemLink(link, renderLinkContent);\n        }\n        else {\n            linkContent = renderLinkContent(link);\n        }\n        var contentString = link.headerText || '';\n        contentString += link.itemCount ? ' (' + link.itemCount + ')' : '';\n        // Adding space supplementary for icon\n        contentString += link.itemIcon ? ' xx' : '';\n        var itemSemantics = link.role && link.role !== 'tab'\n            ? {\n                role: link.role,\n            }\n            : {\n                role: 'tab',\n                'aria-selected': isSelected,\n            };\n        return (React.createElement(CommandButton, __assign({}, headerButtonProps, itemSemantics, { id: tabId, key: itemKey, className: css(className, isSelected && classNames.linkIsSelected), \n            // eslint-disable-next-line react/jsx-no-bind\n            onClick: function (ev) { return onLinkClick(itemKey, ev); }, \n            // eslint-disable-next-line react/jsx-no-bind\n            onKeyDown: function (ev) { return onKeyDown(itemKey, ev); }, \"aria-label\": link.ariaLabel, name: link.headerText, keytipProps: link.keytipProps, \"data-content\": contentString }), linkContent));\n    };\n    var onLinkClick = function (itemKey, ev) {\n        ev.preventDefault();\n        updateSelectedItem(itemKey, ev);\n    };\n    var onKeyDown = function (itemKey, ev) {\n        // eslint-disable-next-line deprecation/deprecation\n        if (ev.which === KeyCodes.enter) {\n            ev.preventDefault();\n            updateSelectedItem(itemKey);\n        }\n    };\n    var updateSelectedItem = function (itemKey, ev) {\n        var _a;\n        setSelectedKey(itemKey);\n        linkCollection = getLinkItems(props, pivotId);\n        if (props.onLinkClick && linkCollection.keyToIndexMapping[itemKey] >= 0) {\n            var selectedIndex = linkCollection.keyToIndexMapping[itemKey];\n            var item = React.Children.toArray(props.children)[selectedIndex];\n            if (isPivotItem(item)) {\n                props.onLinkClick(item, ev);\n            }\n        }\n        (_a = overflowMenuButtonComponentRef.current) === null || _a === void 0 ? void 0 : _a.dismissMenu();\n    };\n    var renderPivotItem = function (itemKey, isActive) {\n        if (props.headersOnly || !itemKey) {\n            return null;\n        }\n        var index = linkCollection.keyToIndexMapping[itemKey];\n        var selectedTabId = linkCollection.keyToTabIdMapping[itemKey];\n        return (React.createElement(\"div\", { role: \"tabpanel\", hidden: !isActive, key: itemKey, \"aria-hidden\": !isActive, \"aria-labelledby\": selectedTabId, className: classNames.itemContainer }, React.Children.toArray(props.children)[index]));\n    };\n    var isKeyValid = function (itemKey) {\n        return itemKey === null || (itemKey !== undefined && linkCollection.keyToIndexMapping[itemKey] !== undefined);\n    };\n    var getSelectedKey = function () {\n        if (isKeyValid(selectedKey)) {\n            return selectedKey;\n        }\n        if (linkCollection.links.length) {\n            return linkCollection.links[0].itemKey;\n        }\n        return undefined;\n    };\n    classNames = getClassNames(props.styles, {\n        theme: theme,\n        linkSize: linkSize,\n        linkFormat: linkFormat,\n    });\n    var renderedSelectedKey = getSelectedKey();\n    var renderedSelectedIndex = renderedSelectedKey ? linkCollection.keyToIndexMapping[renderedSelectedKey] : 0;\n    var items = linkCollection.links.map(function (l) {\n        return renderPivotLink(linkCollection, l, renderedSelectedKey, classNames.link);\n    });\n    // The overflow menu starts empty and items[] is updated as the overflow items change\n    var overflowMenuProps = React.useMemo(function () { return ({\n        items: [],\n        alignTargetEdge: true,\n        directionalHint: DirectionalHint.bottomRightEdge,\n    }); }, []);\n    var overflowMenuButtonRef = useOverflow({\n        onOverflowItemsChanged: function (overflowIndex, elements) {\n            // Set data-is-overflowing on each item\n            elements.forEach(function (_a) {\n                var ele = _a.ele, isOverflowing = _a.isOverflowing;\n                return (ele.dataset.isOverflowing = \"\" + isOverflowing);\n            });\n            // Update the menu items\n            overflowMenuProps.items = linkCollection.links\n                .slice(overflowIndex)\n                .filter(function (link) { return link.itemKey !== renderedSelectedKey; })\n                .map(function (link, index) {\n                link.role = 'menuitem';\n                return {\n                    key: link.itemKey || \"\" + (overflowIndex + index),\n                    onRender: function () { return renderPivotLink(linkCollection, link, renderedSelectedKey, classNames.linkInMenu); },\n                };\n            });\n        },\n        rtl: getRTL(theme),\n        pinnedIndex: renderedSelectedIndex,\n    }).menuButtonRef;\n    var OverflowButton = overflowButtonAs ? overflowButtonAs : CommandButton;\n    return (React.createElement(\"div\", __assign({ ref: ref }, divProps),\n        React.createElement(FocusZone, __assign({ componentRef: focusZoneRef, role: \"tablist\" }, nameProps, { direction: FocusZoneDirection.horizontal }, focusZoneProps, { className: css(classNames.root, focusZoneProps === null || focusZoneProps === void 0 ? void 0 : focusZoneProps.className) }),\n            items,\n            overflowBehavior === 'menu' && (React.createElement(OverflowButton, { className: css(classNames.link, classNames.overflowMenuButton), elementRef: overflowMenuButtonRef, componentRef: overflowMenuButtonComponentRef, menuProps: overflowMenuProps, menuIconProps: { iconName: 'More', style: { color: 'inherit' } }, ariaLabel: overflowAriaLabel }))),\n        renderedSelectedKey &&\n            linkCollection.links.map(function (link) {\n                return (link.alwaysRender === true || renderedSelectedKey === link.itemKey) &&\n                    renderPivotItem(link.itemKey, renderedSelectedKey === link.itemKey);\n            })));\n});\nPivotBase.displayName = COMPONENT_NAME;\n//# sourceMappingURL=Pivot.base.js.map","import { __assign, __spreadArray } from \"tslib\";\nimport { AnimationVariables, getGlobalClassNames, HighContrastSelector, normalize, FontWeights, getHighContrastNoAdjustStyle, } from '@fluentui/style-utilities';\nimport { IsFocusVisibleClassName } from '@fluentui/utilities';\nvar globalClassNames = {\n    count: 'ms-Pivot-count',\n    icon: 'ms-Pivot-icon',\n    linkIsSelected: 'is-selected',\n    link: 'ms-Pivot-link',\n    linkContent: 'ms-Pivot-linkContent',\n    root: 'ms-Pivot',\n    rootIsLarge: 'ms-Pivot--large',\n    rootIsTabs: 'ms-Pivot--tabs',\n    text: 'ms-Pivot-text',\n    linkInMenu: 'ms-Pivot-linkInMenu',\n    overflowMenuButton: 'ms-Pivot-overflowMenuButton',\n};\nvar getLinkStyles = function (props, classNames, isLinkInOverflowMenu) {\n    var _a, _b, _c;\n    if (isLinkInOverflowMenu === void 0) { isLinkInOverflowMenu = false; }\n    var linkSize = props.linkSize, linkFormat = props.linkFormat;\n    var _d = props.theme, semanticColors = _d.semanticColors, fonts = _d.fonts;\n    var rootIsLarge = linkSize === 'large';\n    var rootIsTabs = linkFormat === 'tabs';\n    return [\n        fonts.medium,\n        {\n            color: semanticColors.actionLink,\n            padding: '0 8px',\n            position: 'relative',\n            backgroundColor: 'transparent',\n            border: 0,\n            borderRadius: 0,\n            selectors: {\n                ':hover': {\n                    backgroundColor: semanticColors.buttonBackgroundHovered,\n                    color: semanticColors.buttonTextHovered,\n                    cursor: 'pointer',\n                },\n                ':active': {\n                    backgroundColor: semanticColors.buttonBackgroundPressed,\n                    color: semanticColors.buttonTextHovered,\n                },\n                ':focus': {\n                    outline: 'none',\n                },\n            },\n        },\n        !isLinkInOverflowMenu && [\n            {\n                display: 'inline-block',\n                lineHeight: 44,\n                height: 44,\n                marginRight: 8,\n                textAlign: 'center',\n                selectors: (_a = {},\n                    _a[\".\" + IsFocusVisibleClassName + \" &:focus\"] = {\n                        outline: \"1px solid \" + semanticColors.focusBorder,\n                    },\n                    _a[\".\" + IsFocusVisibleClassName + \" &:focus:after\"] = {\n                        content: 'attr(data-content)',\n                        position: 'relative',\n                        border: 0,\n                    },\n                    _a[':before'] = {\n                        backgroundColor: 'transparent',\n                        bottom: 0,\n                        content: '\"\"',\n                        height: 2,\n                        left: 8,\n                        position: 'absolute',\n                        right: 8,\n                        transition: \"left \" + AnimationVariables.durationValue2 + \" \" + AnimationVariables.easeFunction2 + \",\\n                        right \" + AnimationVariables.durationValue2 + \" \" + AnimationVariables.easeFunction2,\n                    },\n                    _a[':after'] = {\n                        color: 'transparent',\n                        content: 'attr(data-content)',\n                        display: 'block',\n                        fontWeight: FontWeights.bold,\n                        height: 1,\n                        overflow: 'hidden',\n                        visibility: 'hidden',\n                    },\n                    _a),\n            },\n            rootIsLarge && {\n                fontSize: fonts.large.fontSize,\n            },\n            rootIsTabs && [\n                {\n                    marginRight: 0,\n                    height: 44,\n                    lineHeight: 44,\n                    backgroundColor: semanticColors.buttonBackground,\n                    padding: '0 10px',\n                    verticalAlign: 'top',\n                    selectors: (_b = {\n                            ':focus': {\n                                outlineOffset: '-1px',\n                            }\n                        },\n                        _b[\".\" + IsFocusVisibleClassName + \" &:focus::before\"] = {\n                            height: 'auto',\n                            background: 'transparent',\n                            transition: 'none',\n                        },\n                        _b['&:hover, &:focus'] = {\n                            color: semanticColors.buttonTextCheckedHovered,\n                        },\n                        _b['&:active, &:hover'] = {\n                            color: semanticColors.primaryButtonText,\n                            backgroundColor: semanticColors.primaryButtonBackground,\n                        },\n                        _b[\"&.\" + classNames.linkIsSelected] = {\n                            backgroundColor: semanticColors.primaryButtonBackground,\n                            color: semanticColors.primaryButtonText,\n                            fontWeight: FontWeights.regular,\n                            selectors: (_c = {\n                                    ':before': {\n                                        backgroundColor: 'transparent',\n                                        transition: 'none',\n                                        position: 'absolute',\n                                        top: 0,\n                                        left: 0,\n                                        right: 0,\n                                        bottom: 0,\n                                        content: '\"\"',\n                                        height: 0,\n                                    },\n                                    ':hover': {\n                                        backgroundColor: semanticColors.primaryButtonBackgroundHovered,\n                                        color: semanticColors.primaryButtonText,\n                                    },\n                                    '&:active': {\n                                        backgroundColor: semanticColors.primaryButtonBackgroundPressed,\n                                        color: semanticColors.primaryButtonText,\n                                    }\n                                },\n                                _c[HighContrastSelector] = __assign({ fontWeight: FontWeights.semibold, color: 'HighlightText', background: 'Highlight' }, getHighContrastNoAdjustStyle()),\n                                _c),\n                        },\n                        _b),\n                },\n            ],\n        ],\n    ];\n};\nexport var getStyles = function (props) {\n    var _a, _b, _c, _d;\n    var className = props.className, linkSize = props.linkSize, linkFormat = props.linkFormat, theme = props.theme;\n    var semanticColors = theme.semanticColors, fonts = theme.fonts;\n    var classNames = getGlobalClassNames(globalClassNames, theme);\n    var rootIsLarge = linkSize === 'large';\n    var rootIsTabs = linkFormat === 'tabs';\n    return {\n        root: [\n            classNames.root,\n            fonts.medium,\n            normalize,\n            {\n                position: 'relative',\n                color: semanticColors.link,\n                whiteSpace: 'nowrap',\n            },\n            rootIsLarge && classNames.rootIsLarge,\n            rootIsTabs && classNames.rootIsTabs,\n            className,\n        ],\n        itemContainer: {\n            selectors: {\n                '&[hidden]': {\n                    display: 'none',\n                },\n            },\n        },\n        link: __spreadArray(__spreadArray([\n            classNames.link\n        ], getLinkStyles(props, classNames)), [\n            (_a = {},\n                _a[\"&[data-is-overflowing='true']\"] = {\n                    display: 'none',\n                },\n                _a),\n        ]),\n        overflowMenuButton: [\n            classNames.overflowMenuButton,\n            (_b = {\n                    visibility: 'hidden',\n                    position: 'absolute',\n                    right: 0\n                },\n                _b[\".\" + classNames.link + \"[data-is-overflowing='true'] ~ &\"] = {\n                    visibility: 'visible',\n                    position: 'relative',\n                },\n                _b),\n        ],\n        linkInMenu: __spreadArray(__spreadArray([\n            classNames.linkInMenu\n        ], getLinkStyles(props, classNames, true)), [\n            {\n                textAlign: 'left',\n                width: '100%',\n                height: 36,\n                lineHeight: 36,\n            },\n        ]),\n        linkIsSelected: [\n            classNames.link,\n            classNames.linkIsSelected,\n            {\n                fontWeight: FontWeights.semibold,\n                selectors: (_c = {\n                        ':before': {\n                            backgroundColor: semanticColors.inputBackgroundChecked,\n                            selectors: (_d = {},\n                                _d[HighContrastSelector] = {\n                                    backgroundColor: 'Highlight',\n                                },\n                                _d),\n                        },\n                        ':hover::before': {\n                            left: 0,\n                            right: 0,\n                        }\n                    },\n                    _c[HighContrastSelector] = {\n                        color: 'Highlight',\n                    },\n                    _c),\n            },\n        ],\n        linkContent: [\n            classNames.linkContent,\n            {\n                flex: '0 1 100%',\n                selectors: {\n                    '& > * ': {\n                        marginLeft: 4,\n                    },\n                    '& > *:first-child': {\n                        marginLeft: 0,\n                    },\n                },\n            },\n        ],\n        text: [\n            classNames.text,\n            {\n                display: 'inline-block',\n                verticalAlign: 'top',\n            },\n        ],\n        count: [\n            classNames.count,\n            {\n                display: 'inline-block',\n                verticalAlign: 'top',\n            },\n        ],\n        icon: classNames.icon,\n    };\n};\n//# sourceMappingURL=Pivot.styles.js.map","import { styled } from '@fluentui/utilities';\nimport { PivotBase } from './Pivot.base';\nimport { getStyles } from './Pivot.styles';\n/**\n * The Pivot control and related tabs pattern are used for navigating frequently accessed,\n * distinct content categories. Pivots allow for navigation between two or more content\n * views and relies on text headers to articulate the different sections of content.\n */\nexport var Pivot = styled(PivotBase, getStyles, undefined, {\n    scope: 'Pivot',\n});\n//# sourceMappingURL=Pivot.js.map","/**\n * Downloads a copy of a file in the specified format\n * @param filename -\n * @param type -\n * @param data -\n */ export function download(filename, type, data) {\n    const dataURI = URL.createObjectURL(data);\n    const link = document.createElement('a');\n    link.href = dataURI;\n    link.type = type;\n    link.download = filename;\n    link.click();\n}\n/**\n * Downloads a csv copy of a table\n * @param table -\n * @param filename -\n */ export function downloadTable(table, filename = 'download.csv', options) {\n    const blob = new Blob([\n        table.toCSV(options)\n    ]);\n    download(filename, 'text/csv', blob);\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */ import { downloadTable } from '@data-wrangling-components/utilities';\nimport merge from 'lodash-es/merge.js';\n/**\n * Constructs a download command.\n * When clicked, will save the current table to a csv.\n * @param table -\n * @param downloadFilename -\n * @returns\n */ export function downloadCommand(table, downloadFilename, props) {\n    return merge({\n        key: 'download',\n        title: 'Download table',\n        iconProps: {\n            iconName: 'Download'\n        },\n        onClick: ()=>downloadTable(table, downloadFilename)\n    }, props);\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { downloadCommand } from '@data-wrangling-components/react'\nimport type { ICommandBarItemProps } from '@fluentui/react'\nimport { useMemo } from 'react'\n\nimport type { ICsvContent } from '~models'\n\nexport function useDownloadCommand(\n\tcontent: ICsvContent,\n\tfilename: string,\n): ICommandBarItemProps {\n\treturn useMemo(\n\t\t() => downloadCommand(content.table, filename),\n\t\t[content, filename],\n\t)\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { useMemo } from 'react'\n\nimport { useIsProcessingValue, useSensitiveContentValue } from '~states'\n\nexport function useCanRun(): boolean {\n\tconst content = useSensitiveContentValue()\n\tconst isProcessing = useIsProcessingValue()\n\n\treturn useMemo(() => {\n\t\treturn content.table.totalRows() > 0 && !isProcessing\n\t}, [content, isProcessing])\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { IDropdownOption } from '@fluentui/react'\nimport { useCallback } from 'react'\n\nexport function useDropdownOnChange<T>(\n\tsetter: (val: T) => void,\n): (event: React.FormEvent<HTMLDivElement>, item?: IDropdownOption) => void {\n\treturn useCallback(\n\t\t(event: React.FormEvent<HTMLDivElement>, item?: IDropdownOption) => {\n\t\t\tif (item) {\n\t\t\t\tsetter(item.key as unknown as T)\n\t\t\t}\n\t\t},\n\t\t[setter],\n\t)\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { IMetricByKey } from '@essex/sds-core'\nimport { useMemo } from 'react'\n\nexport function getMetricsByCountLabels(\n\tmetricsByKey?: IMetricByKey | null,\n): number[] {\n\treturn Object.keys(metricsByKey ?? {})\n\t\t.reverse()\n\t\t.map(bin => Number(bin))\n}\n\nexport function useMetricsByCountLabels(\n\tmetricsByKey?: IMetricByKey | null,\n): number[] {\n\treturn useMemo(() => getMetricsByCountLabels(metricsByKey), [metricsByKey])\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport _ from 'lodash'\nimport { useMemo } from 'react'\n\nexport function getMetricsByLenLabels(\n\treportingLength?: number | null,\n): number[] {\n\tif (!reportingLength) {\n\t\treturn []\n\t}\n\treturn _.range(1, Number(reportingLength) + 1)\n}\n\nexport function useMetricsByLenLabels(\n\treportingLength?: number | null,\n): number[] {\n\treturn useMemo(\n\t\t() => getMetricsByLenLabels(reportingLength),\n\t\t[reportingLength],\n\t)\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { RefObject } from 'react'\nimport { useCallback } from 'react'\n\nimport type { DownloadInfo } from './DownloadInfo.js'\n\nexport function useDownloadOnClick(\n\tdownloadAnchorRef: RefObject<HTMLAnchorElement>,\n\tgetDownloadInfo: () => Promise<DownloadInfo | undefined>,\n): () => void {\n\treturn useCallback(async () => {\n\t\tif (downloadAnchorRef.current) {\n\t\t\tconst info = await getDownloadInfo()\n\n\t\t\tif (info) {\n\t\t\t\tdownloadAnchorRef.current.href = info.url\n\t\t\t\tdownloadAnchorRef.current.download = info.alias\n\t\t\t\tdownloadAnchorRef.current.click()\n\t\t\t}\n\t\t}\n\t}, [downloadAnchorRef, getDownloadInfo])\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { IIconProps } from '@fluentui/react'\nimport { ActionButton, Stack, useTheme } from '@fluentui/react'\nimport type { FC } from 'react'\nimport { useRef } from 'react'\nimport styled from 'styled-components'\n\nimport type { DownloadInfo } from './DownloadInfo.js'\nimport { useDownloadOnClick } from './hooks.js'\n\nconst downloadIcon: IIconProps = { iconName: 'Download' }\n\nexport interface DownloadButtonProps {\n\tonGetDownloadInfo: () => Promise<DownloadInfo | undefined>\n\ttitle?: string\n\tlabel?: string\n\tdisabled?: boolean\n}\n\nexport const DownloadButton: FC<DownloadButtonProps> = ({\n\tonGetDownloadInfo,\n\ttitle,\n\tlabel,\n\tdisabled,\n}) => {\n\tconst downloadAnchorRef = useRef<HTMLAnchorElement>(null)\n\tconst theme = useTheme()\n\tconst downloadOnClick = useDownloadOnClick(\n\t\tdownloadAnchorRef,\n\t\tonGetDownloadInfo,\n\t)\n\n\treturn (\n\t\t<Stack horizontal tokens={{ childrenGap: theme.spacing.s1 }}>\n\t\t\t<ActionButton\n\t\t\t\ticonProps={downloadIcon}\n\t\t\t\tonClick={downloadOnClick}\n\t\t\t\tdisabled={disabled}\n\t\t\t\ttitle={title}\n\t\t\t>\n\t\t\t\t{label}\n\t\t\t</ActionButton>\n\t\t\t<DownloadAnchor ref={downloadAnchorRef} />\n\t\t</Stack>\n\t)\n}\n\nconst DownloadAnchor = styled.a`\n\tdisplay: none;\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { IMicrodataStatistics } from '@essex/sds-core'\nimport { useMemo } from 'react'\n\nimport { tooltips } from '~ui-tooltips'\nimport { AggregateType } from '~workers/types'\n\nexport interface IMicrodataMetricItem {\n\tmetric: string\n\ttooltip?: JSX.Element\n\tvalue: string\n}\n\nexport function getMicrodataMetricsItems(\n\tstats: IMicrodataStatistics | undefined,\n\taggregateType: AggregateType,\n\tprecision = 2,\n\temptyValue = '-',\n): IMicrodataMetricItem[] {\n\tif (stats) {\n\t\treturn [\n\t\t\t{\n\t\t\t\tmetric: 'Suppressed combinations',\n\t\t\t\ttooltip: tooltips.suppressedCombinations,\n\t\t\t\tvalue:\n\t\t\t\t\taggregateType === AggregateType.Aggregated ||\n\t\t\t\t\taggregateType === AggregateType.Synthetic\n\t\t\t\t\t\t? stats.percentageOfSuppressedCombinations\n\t\t\t\t\t\t\t\t.toFixed(precision)\n\t\t\t\t\t\t\t\t.toString() + ' %'\n\t\t\t\t\t\t: emptyValue,\n\t\t\t},\n\t\t\t{\n\t\t\t\tmetric: 'Fabricated combinations',\n\t\t\t\ttooltip: tooltips.fabricatedCombinations,\n\t\t\t\tvalue:\n\t\t\t\t\taggregateType === AggregateType.Aggregated ||\n\t\t\t\t\taggregateType === AggregateType.Synthetic\n\t\t\t\t\t\t? stats.percentageOfFabricatedCombinations\n\t\t\t\t\t\t\t\t.toFixed(precision)\n\t\t\t\t\t\t\t\t.toString() + ' %'\n\t\t\t\t\t\t: emptyValue,\n\t\t\t},\n\t\t\t...Object.keys(stats.originalCombinationsCountMeanByLen ?? {}).map(l => ({\n\t\t\t\tmetric: `${l}-count mean value +/- Mean error`,\n\t\t\t\ttooltip: tooltips.nCountMeanAndError,\n\t\t\t\tvalue: `${\n\t\t\t\t\tstats.originalCombinationsCountMeanByLen[l]\n\t\t\t\t\t\t?.toFixed(precision)\n\t\t\t\t\t\t?.toString() ?? 0\n\t\t\t\t} +/- ${\n\t\t\t\t\tstats.combinationsCountMeanAbsErrorByLen[l]\n\t\t\t\t\t\t?.toFixed(precision)\n\t\t\t\t\t\t?.toString() ?? 0\n\t\t\t\t}`,\n\t\t\t})),\n\t\t\t{\n\t\t\t\tmetric: 'Mean combination count +/- Mean error',\n\t\t\t\ttooltip: tooltips.countMeanAndError,\n\t\t\t\tvalue: `${stats.originalCombinationsCountMean\n\t\t\t\t\t.toFixed(precision)\n\t\t\t\t\t.toString()} +/- ${stats.combinationsCountMeanAbsError\n\t\t\t\t\t.toFixed(precision)\n\t\t\t\t\t.toString()}`,\n\t\t\t},\n\t\t\t{\n\t\t\t\tmetric: 'Record expansion',\n\t\t\t\ttooltip: tooltips.recordExpansion,\n\t\t\t\tvalue:\n\t\t\t\t\taggregateType === AggregateType.Synthetic\n\t\t\t\t\t\t? stats.recordExpansionPercentage.toFixed(precision).toString() +\n\t\t\t\t\t\t  ' %'\n\t\t\t\t\t\t: emptyValue,\n\t\t\t},\n\t\t\t{\n\t\t\t\tmetric: 'Mean proportional error',\n\t\t\t\ttooltip: tooltips.meanProportionalError,\n\t\t\t\tvalue:\n\t\t\t\t\taggregateType === AggregateType.Aggregated ||\n\t\t\t\t\taggregateType === AggregateType.Synthetic\n\t\t\t\t\t\t? stats.meanProportionalError.toFixed(precision).toString()\n\t\t\t\t\t\t: emptyValue,\n\t\t\t},\n\t\t\t{\n\t\t\t\tmetric: 'Records containing unique attribute combinations',\n\t\t\t\ttooltip: tooltips.recordsWithUniqueCombs,\n\t\t\t\tvalue:\n\t\t\t\t\taggregateType === AggregateType.Sensitive\n\t\t\t\t\t\t? stats.percentageOfRecordsWithUniqueCombinations\n\t\t\t\t\t\t\t\t.toFixed(precision)\n\t\t\t\t\t\t\t\t.toString() + ' %'\n\t\t\t\t\t\t: emptyValue,\n\t\t\t},\n\t\t\t{\n\t\t\t\tmetric: 'Records containing rare attribute combinations',\n\t\t\t\ttooltip: tooltips.recordsWithRareCombs,\n\t\t\t\tvalue:\n\t\t\t\t\taggregateType === AggregateType.Sensitive\n\t\t\t\t\t\t? stats.percentageOfRecordsWithRareCombinations\n\t\t\t\t\t\t\t\t.toFixed(precision)\n\t\t\t\t\t\t\t\t.toString() + ' %'\n\t\t\t\t\t\t: emptyValue,\n\t\t\t},\n\t\t\t{\n\t\t\t\tmetric: 'Unique attribute combinations',\n\t\t\t\ttooltip: tooltips.uniqueCombs,\n\t\t\t\tvalue:\n\t\t\t\t\taggregateType === AggregateType.Sensitive\n\t\t\t\t\t\t? stats.percentageOfUniqueCombinations\n\t\t\t\t\t\t\t\t.toFixed(precision)\n\t\t\t\t\t\t\t\t.toString() + ' %'\n\t\t\t\t\t\t: emptyValue,\n\t\t\t},\n\t\t\t{\n\t\t\t\tmetric: 'Rare attribute combinations',\n\t\t\t\ttooltip: tooltips.rareCombs,\n\t\t\t\tvalue:\n\t\t\t\t\taggregateType === AggregateType.Sensitive\n\t\t\t\t\t\t? stats.percentageOfRareCombinations.toFixed(precision).toString() +\n\t\t\t\t\t\t  ' %'\n\t\t\t\t\t\t: emptyValue,\n\t\t\t},\n\t\t]\n\t}\n\treturn []\n}\n\nexport function useMicrodataMetricsItems(\n\tstats: IMicrodataStatistics | undefined,\n\taggregateType: AggregateType,\n\tprecision = 2,\n\temptyValue = '-',\n): { metric: string; tooltip?: JSX.Element; value: string }[] {\n\treturn useMemo(\n\t\t() => getMicrodataMetricsItems(stats, aggregateType, precision, emptyValue),\n\t\t[stats, aggregateType, precision, emptyValue],\n\t)\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { IMicrodataStatistics } from '@essex/sds-core'\nimport type { IColumn } from '@fluentui/react'\nimport {\n\tDetailsList,\n\tDetailsListLayoutMode,\n\tSelectionMode,\n\tStack,\n} from '@fluentui/react'\nimport { memo } from 'react'\n\nimport { InfoTooltip } from '~components/InfoTooltip'\nimport type { AggregateType } from '~workers/types'\n\nimport type { IMicrodataMetricItem } from './hooks.js'\nimport { useMicrodataMetricsItems } from './hooks.js'\n\nexport interface MetricsSummaryTableProps {\n\tstats: IMicrodataStatistics\n\taggregateType: AggregateType\n}\n\nexport const MetricsSummaryTable: React.FC<MetricsSummaryTableProps> = memo(\n\tfunction MetricsSummaryTable({\n\t\tstats,\n\t\taggregateType,\n\t}: MetricsSummaryTableProps) {\n\t\tconst columns: IColumn[] = [\n\t\t\t{\n\t\t\t\tkey: 'metric',\n\t\t\t\tname: 'Metric',\n\t\t\t\tfieldName: 'metric',\n\t\t\t\tisResizable: true,\n\t\t\t\tminWidth: 100,\n\t\t\t\tmaxWidth: 350,\n\t\t\t\tonRender: (item: IMicrodataMetricItem) => (\n\t\t\t\t\t<Stack horizontal>\n\t\t\t\t\t\t<Stack.Item align=\"center\">{item.metric}</Stack.Item>\n\t\t\t\t\t\t{item.tooltip !== undefined && (\n\t\t\t\t\t\t\t<Stack.Item align=\"center\">\n\t\t\t\t\t\t\t\t<InfoTooltip title={item.metric}>{item.tooltip}</InfoTooltip>\n\t\t\t\t\t\t\t</Stack.Item>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Stack>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'value',\n\t\t\t\tname: 'Value',\n\t\t\t\tfieldName: 'value',\n\t\t\t\tisResizable: true,\n\t\t\t\tminWidth: 100,\n\t\t\t},\n\t\t]\n\t\tconst items = useMicrodataMetricsItems(stats, aggregateType)\n\n\t\treturn (\n\t\t\t<DetailsList\n\t\t\t\tselectionMode={SelectionMode.none}\n\t\t\t\tlayoutMode={DetailsListLayoutMode.justified}\n\t\t\t\tcolumns={columns}\n\t\t\t\titems={items}\n\t\t\t/>\n\t\t)\n\t},\n)\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { IMicrodataStatistics } from '@essex/sds-core'\nimport { useCallback } from 'react'\n\nimport type { DownloadInfo } from '~components/controls/DownloadButton'\nimport type { IMicrodataMetricItem } from '~components/MetricsSummaryTable'\nimport { useMicrodataMetricsItems } from '~components/MetricsSummaryTable'\nimport type { ISdsManagerInstance } from '~models'\nimport { useSdsManagerInstance } from '~states'\nimport type { AggregateType } from '~workers/types'\n\nexport function getMetricsSummaryCsv(\n\tmicrodataMetricItems: IMicrodataMetricItem[],\n\tdelimiter = ',',\n): string {\n\treturn (\n\t\t`Metric${delimiter}Value\\n` +\n\t\tmicrodataMetricItems\n\t\t\t.map(item => `${item.metric}${delimiter}${item.value}`)\n\t\t\t.join('\\n')\n\t)\n}\n\nexport function useOnGetMetricsSummaryCsv(\n\tstats: IMicrodataStatistics | undefined,\n\taggregateType: AggregateType,\n\tdelimiter = ',',\n): () => string {\n\tconst microdataMetricItems = useMicrodataMetricsItems(stats, aggregateType)\n\n\treturn useCallback(\n\t\t() => getMetricsSummaryCsv(microdataMetricItems, delimiter),\n\t\t[microdataMetricItems, delimiter],\n\t)\n}\n\nexport function getAnalysisByCountCsv(\n\tcountLabels: number[],\n\tstats: IMicrodataStatistics | undefined,\n\tdelimiter = ',',\n): string {\n\tlet csv = `Bin${delimiter}Mean proportional error${delimiter}Mean length of combinations\\n`\n\n\tif (stats) {\n\t\tcsv += countLabels\n\t\t\t.map(\n\t\t\t\tc =>\n\t\t\t\t\t`${c}${delimiter}${\n\t\t\t\t\t\tstats.meanProportionalErrorByBucket[c] ?? 0\n\t\t\t\t\t}${delimiter}${stats.meanCombinationLengthByBucket[c] ?? 0}`,\n\t\t\t)\n\t\t\t.join('\\n')\n\t}\n\treturn csv\n}\n\nexport function useOnGetAnalysisByCountCsv(\n\tcountLabels: number[],\n\tstats: IMicrodataStatistics | undefined,\n\tdelimiter = ',',\n): () => string {\n\treturn useCallback(\n\t\t() => getAnalysisByCountCsv(countLabels, stats, delimiter),\n\t\t[countLabels, stats, delimiter],\n\t)\n}\n\nexport function getAnalysisByLenCsv(\n\tlenLabels: number[],\n\tstats: IMicrodataStatistics | undefined,\n\tdelimiter = ',',\n): string {\n\tlet csv = `Length${delimiter}Mean combinations count${delimiter}Distinct combinations count${delimiter}Rare combinations count${delimiter}Rare combinations percentage${delimiter}Leakage count${delimiter}Leakage percentage${delimiter}\\n`\n\n\tif (stats) {\n\t\tcsv += lenLabels\n\t\t\t.map(\n\t\t\t\tl =>\n\t\t\t\t\t`${l}${delimiter}${\n\t\t\t\t\t\tstats.combinationsCountMeanByLen[l] ?? 0\n\t\t\t\t\t}${delimiter}${\n\t\t\t\t\t\tstats.totalNumberOfCombinationsByLen[l] ?? 0\n\t\t\t\t\t}${delimiter}${\n\t\t\t\t\t\tstats.numberOfRareCombinationsByLen[l] ?? 0\n\t\t\t\t\t}${delimiter}${\n\t\t\t\t\t\tstats.percentageOfRareCombinationsByLen[l] ?? 0\n\t\t\t\t\t}${delimiter}${stats.leakageCountByLen[l] ?? 0}${delimiter}${\n\t\t\t\t\t\tstats.leakagePercentageByLen[l] ?? 0\n\t\t\t\t\t}`,\n\t\t\t)\n\t\t\t.join('\\n')\n\t}\n\treturn csv\n}\n\nexport function useOnGetAnalysisByLenCsv(\n\tlenLabels: number[],\n\tstats: IMicrodataStatistics | undefined,\n\tdelimiter = ',',\n): () => string {\n\treturn useCallback(\n\t\t() => getAnalysisByLenCsv(lenLabels, stats, delimiter),\n\t\t[lenLabels, stats, delimiter],\n\t)\n}\n\nexport async function getAggregatesCsv(\n\tmanager: ISdsManagerInstance | null,\n\tcontextKey: string | undefined,\n\taggregateType: AggregateType,\n\taggregatesDelimiter = ',',\n\tcombinationDelimiter = ';',\n): Promise<string> {\n\tif (!manager || !contextKey) {\n\t\treturn ''\n\t}\n\tconst result = await manager?.instance.getAggregateResult(\n\t\tcontextKey,\n\t\taggregateType,\n\t\taggregatesDelimiter,\n\t\tcombinationDelimiter,\n\t\t// case insensitive sort on combinations values\n\t\t// so it works nice with the PBI report\n\t\ttrue,\n\t)\n\treturn result?.aggregatesData || ''\n}\n\nexport function useOnGetAggregatesCsv(\n\tcontextKey: string | undefined,\n\taggregateType: AggregateType,\n\taggregatesDelimiter = ',',\n\tcombinationDelimiter = ';',\n): () => Promise<string> {\n\tconst [manager] = useSdsManagerInstance()\n\n\treturn useCallback(async () => {\n\t\treturn getAggregatesCsv(\n\t\t\tmanager,\n\t\t\tcontextKey,\n\t\t\taggregateType,\n\t\t\taggregatesDelimiter,\n\t\t\tcombinationDelimiter,\n\t\t)\n\t}, [\n\t\tmanager,\n\t\tcontextKey,\n\t\taggregateType,\n\t\taggregatesDelimiter,\n\t\tcombinationDelimiter,\n\t])\n}\n\nexport function useOnGetDownloadInfo(\n\tgetter: (() => Promise<string>) | (() => string),\n\talias: string,\n\ttype = 'text/csv',\n): () => Promise<DownloadInfo | undefined> {\n\treturn useCallback(async () => {\n\t\tlet data = getter()\n\n\t\tif (data instanceof Promise) {\n\t\t\tdata = await data\n\t\t}\n\n\t\treturn {\n\t\t\turl: URL.createObjectURL(\n\t\t\t\tnew Blob([data], {\n\t\t\t\t\ttype,\n\t\t\t\t}),\n\t\t\t),\n\t\t\talias,\n\t\t}\n\t}, [getter, type, alias])\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { IMicrodataStatistics } from '@essex/sds-core'\nimport { useTheme } from '@fluentui/react'\nimport { FlexContainer } from '@sds/components'\nimport { memo } from 'react'\n\nimport {\n\tuseMetricsByCountLabels,\n\tuseMetricsByLenLabels,\n} from '~components/Charts/hooks'\nimport { DownloadButton } from '~components/controls/DownloadButton'\nimport type { AggregateType } from '~workers/types'\n\nimport {\n\tuseOnGetAggregatesCsv,\n\tuseOnGetAnalysisByCountCsv,\n\tuseOnGetAnalysisByLenCsv,\n\tuseOnGetDownloadInfo,\n\tuseOnGetMetricsSummaryCsv,\n} from './hooks.js'\n\nexport interface DataEvaluationInfoDownloaderProps {\n\tcontextKey: string\n\treportingLength: number\n\tstats: IMicrodataStatistics\n\taggregateType: AggregateType\n}\n\nexport const DataEvaluationInfoDownloader: React.FC<DataEvaluationInfoDownloaderProps> =\n\tmemo(function DataEvaluationInfoDownloader({\n\t\tcontextKey,\n\t\treportingLength,\n\t\tstats,\n\t\taggregateType,\n\t}: DataEvaluationInfoDownloaderProps) {\n\t\tconst theme = useTheme()\n\n\t\tconst onGetAggregatesDownloadInfo = useOnGetDownloadInfo(\n\t\t\tuseOnGetAggregatesCsv(contextKey, aggregateType),\n\t\t\t`${aggregateType}_aggregates.csv`,\n\t\t)\n\n\t\tconst onGetMetricsSummaryDownloadInfo = useOnGetDownloadInfo(\n\t\t\tuseOnGetMetricsSummaryCsv(stats, aggregateType),\n\t\t\t`${aggregateType}_metrics_summary.csv`,\n\t\t)\n\n\t\tconst onGetAnalysisByCountDownloadInfo = useOnGetDownloadInfo(\n\t\t\tuseOnGetAnalysisByCountCsv(\n\t\t\t\tuseMetricsByCountLabels(stats.meanProportionalErrorByBucket),\n\t\t\t\tstats,\n\t\t\t),\n\t\t\t`${aggregateType}_analysis_by_count.csv`,\n\t\t)\n\n\t\tconst onGetAnalysisByLenDownloadInfo = useOnGetDownloadInfo(\n\t\t\tuseOnGetAnalysisByLenCsv(useMetricsByLenLabels(reportingLength), stats),\n\t\t\t`${aggregateType}_analysis_by_length.csv`,\n\t\t)\n\n\t\treturn (\n\t\t\t<FlexContainer gap={theme.spacing.s1} justify=\"space-evenly\" wrap>\n\t\t\t\t<DownloadButton\n\t\t\t\t\tlabel=\"Aggregates\"\n\t\t\t\t\tonGetDownloadInfo={onGetAggregatesDownloadInfo}\n\t\t\t\t/>\n\t\t\t\t<DownloadButton\n\t\t\t\t\tlabel=\"Metrics summary\"\n\t\t\t\t\tonGetDownloadInfo={onGetMetricsSummaryDownloadInfo}\n\t\t\t\t/>\n\t\t\t\t<DownloadButton\n\t\t\t\t\tlabel=\"Analysis by count\"\n\t\t\t\t\tonGetDownloadInfo={onGetAnalysisByCountDownloadInfo}\n\t\t\t\t/>\n\t\t\t\t<DownloadButton\n\t\t\t\t\tlabel=\"Analysis by length\"\n\t\t\t\t\tonGetDownloadInfo={onGetAnalysisByLenDownloadInfo}\n\t\t\t\t/>\n\t\t\t</FlexContainer>\n\t\t)\n\t})\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { IEvaluateResult } from '@essex/sds-core'\nimport { useMemo } from 'react'\n\nimport type { ISynthesisInfo } from '~workers/types'\nimport { SynthesisMode } from '~workers/types'\n\nexport function getSensitiveDataPrivacyText(\n\tevaluateResult: IEvaluateResult,\n\tsynthesisInfo: ISynthesisInfo,\n): string {\n\tconst uniqueRecordsPercentage =\n\t\t+evaluateResult.sensitiveDataStats.percentageOfRecordsWithUniqueCombinations.toFixed(\n\t\t\t2,\n\t\t)\n\tconst rareRecordsPercentage = Math.max(\n\t\t+(\n\t\t\tevaluateResult.sensitiveDataStats\n\t\t\t\t.percentageOfRecordsWithRareCombinations - uniqueRecordsPercentage\n\t\t).toFixed(2),\n\t\t0.0,\n\t)\n\n\treturn `For all combinations of up to ${\n\t\tsynthesisInfo.parameters.reportingLength\n\t} attributes, ${(uniqueRecordsPercentage + rareRecordsPercentage).toFixed(\n\t\t2,\n\t)}% of records are potentially linkable to data subjects (${uniqueRecordsPercentage.toFixed(\n\t\t2,\n\t)}% uniquely identifiable, ${rareRecordsPercentage.toFixed(\n\t\t2,\n\t)}% linkable to small groups below the specified privacy resolution of ${\n\t\tsynthesisInfo.parameters.baseSynthesisParameters.resolution\n\t}).`\n}\n\nexport function useSensitiveDataPrivacyText(\n\tevaluateResult: IEvaluateResult,\n\tsynthesisInfo: ISynthesisInfo,\n): string {\n\treturn useMemo(\n\t\t() => getSensitiveDataPrivacyText(evaluateResult, synthesisInfo),\n\t\t[evaluateResult, synthesisInfo],\n\t)\n}\n\nexport function getAggregateDataUtilityText(\n\tevaluateResult: IEvaluateResult,\n\tsynthesisInfo: ISynthesisInfo,\n): string {\n\tswitch (synthesisInfo.parameters.mode) {\n\t\tcase SynthesisMode.Unseeded:\n\t\tcase SynthesisMode.RowSeeded:\n\t\tcase SynthesisMode.ValueSeeded:\n\t\tcase SynthesisMode.AggregateSeeded:\n\t\t\treturn `For all combinations of up to ${\n\t\t\t\tsynthesisInfo.parameters.reportingLength\n\t\t\t} attributes, ${evaluateResult.aggregateCountsStats.percentageOfSuppressedCombinations.toFixed(\n\t\t\t\t2,\n\t\t\t)}% are rare and therefore not reported in the aggregate dataset. All released combinations were present in the sensitive dataset and are reported with an average error of ${evaluateResult.aggregateCountsStats.combinationsCountMeanAbsError.toFixed(\n\t\t\t\t2,\n\t\t\t)}.`\n\n\t\tcase SynthesisMode.DP:\n\t\t\treturn `For all combinations of up to ${\n\t\t\t\tsynthesisInfo.parameters.reportingLength\n\t\t\t} attributes, ${evaluateResult.aggregateCountsStats.percentageOfSuppressedCombinations.toFixed(\n\t\t\t\t2,\n\t\t\t)}% were not reported in the aggregate dataset after preserving privacy. The released combinations were reported with an average error of ${evaluateResult.aggregateCountsStats.combinationsCountMeanAbsError.toFixed(\n\t\t\t\t2,\n\t\t\t)}.`\n\t}\n}\n\nexport function useAggregateDataUtilityText(\n\tevaluateResult: IEvaluateResult,\n\tsynthesisInfo: ISynthesisInfo,\n): string {\n\treturn useMemo(\n\t\t() => getAggregateDataUtilityText(evaluateResult, synthesisInfo),\n\t\t[evaluateResult, synthesisInfo],\n\t)\n}\n\nexport function getSyntheticDataPrivacyText(\n\tevaluateResult: IEvaluateResult,\n\tsynthesisInfo: ISynthesisInfo,\n): string {\n\tconst distinctCount = Object.values(\n\t\tevaluateResult.sensitiveDataStats.totalNumberOfCombinationsByLen,\n\t).reduce((prev, curr) => prev + curr, 0)\n\tconst leakagePercentage =\n\t\t(Object.values(evaluateResult.syntheticDataStats.leakageCountByLen).reduce(\n\t\t\t(prev, curr) => prev + curr,\n\t\t\t0,\n\t\t) *\n\t\t\t100) /\n\t\tdistinctCount\n\n\tswitch (synthesisInfo.parameters.mode) {\n\t\tcase SynthesisMode.Unseeded:\n\t\tcase SynthesisMode.RowSeeded:\n\t\tcase SynthesisMode.ValueSeeded:\n\t\t\treturn `For all attribute combinations of any length, none describe groups of data subjects smaller than the privacy resolution (guaranteed by k-anonymity).`\n\n\t\tcase SynthesisMode.AggregateSeeded:\n\t\t\treturn `For all attribute combinations of up to ${synthesisInfo.parameters.reportingLength} attributes, none describe groups of data subjects smaller than the privacy resolution (guaranteed by k-anonymity).`\n\n\t\tcase SynthesisMode.DP:\n\t\t\treturn `For all attribute combinations of up to ${\n\t\t\t\tsynthesisInfo.parameters.reportingLength\n\t\t\t} attributes, ${leakagePercentage.toFixed(\n\t\t\t\t2,\n\t\t\t)}% describe groups of data subjects smaller than the privacy resolution (but protected by differential privacy).`\n\t}\n}\n\nexport function useSyntheticDataPrivacyText(\n\tevaluateResult: IEvaluateResult,\n\tsynthesisInfo: ISynthesisInfo,\n): string {\n\treturn useMemo(\n\t\t() => getSyntheticDataPrivacyText(evaluateResult, synthesisInfo),\n\t\t[evaluateResult, synthesisInfo],\n\t)\n}\n\nexport function getSyntheticDataUtilityText(\n\tevaluateResult: IEvaluateResult,\n\tsynthesisInfo: ISynthesisInfo,\n): string {\n\tconst retainedCombinationsPercentage =\n\t\t100 -\n\t\tevaluateResult.syntheticVsAggregateDataStats\n\t\t\t.percentageOfSuppressedCombinations\n\n\tswitch (synthesisInfo.parameters.mode) {\n\t\tcase SynthesisMode.Unseeded:\n\t\tcase SynthesisMode.RowSeeded:\n\t\tcase SynthesisMode.ValueSeeded:\n\t\tcase SynthesisMode.AggregateSeeded:\n\t\t\treturn `For all attribute combinations of up to ${\n\t\t\t\tsynthesisInfo.parameters.reportingLength\n\t\t\t} attributes, ${retainedCombinationsPercentage.toFixed(\n\t\t\t\t2,\n\t\t\t)}% of the reported combinations in the aggregate dataset are retained in the synthetic dataset. All released combinations were present in the sensitive dataset and the average error of synthetic counts is ${evaluateResult.syntheticDataStats.combinationsCountMeanAbsError.toFixed(\n\t\t\t\t2,\n\t\t\t)}.`\n\n\t\tcase SynthesisMode.DP:\n\t\t\treturn `For all attribute combinations of up to ${\n\t\t\t\tsynthesisInfo.parameters.reportingLength\n\t\t\t} attributes, ${retainedCombinationsPercentage.toFixed(\n\t\t\t\t2,\n\t\t\t)}% of the reported combinations in the aggregate dataset are retained in the synthetic dataset. The average error of synthetic counts is ${evaluateResult.syntheticDataStats.combinationsCountMeanAbsError.toFixed(\n\t\t\t\t2,\n\t\t\t)}.`\n\t}\n}\n\nexport function useSyntheticDataUtilityText(\n\tevaluateResult: IEvaluateResult,\n\tsynthesisInfo: ISynthesisInfo,\n): string {\n\treturn useMemo(\n\t\t() => getSyntheticDataUtilityText(evaluateResult, synthesisInfo),\n\t\t[evaluateResult, synthesisInfo],\n\t)\n}\n\nexport function useHumanReadableSummaryItems(\n\tevaluateResult: IEvaluateResult,\n\tsynthesisInfo: ISynthesisInfo,\n): { name: string; text: string }[] {\n\tconst sensitiveDataPrivacyText = useSensitiveDataPrivacyText(\n\t\tevaluateResult,\n\t\tsynthesisInfo,\n\t)\n\tconst aggregateDataUtilityText = useAggregateDataUtilityText(\n\t\tevaluateResult,\n\t\tsynthesisInfo,\n\t)\n\tconst syntheticDataPrivacyText = useSyntheticDataPrivacyText(\n\t\tevaluateResult,\n\t\tsynthesisInfo,\n\t)\n\tconst syntheticDataUtilityText = useSyntheticDataUtilityText(\n\t\tevaluateResult,\n\t\tsynthesisInfo,\n\t)\n\n\treturn useMemo(() => {\n\t\treturn [\n\t\t\t{\n\t\t\t\tname: 'Sensitive data privacy',\n\t\t\t\ttext: sensitiveDataPrivacyText,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Aggregate data utility',\n\t\t\t\ttext: aggregateDataUtilityText,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Synthetic data privacy',\n\t\t\t\ttext: syntheticDataPrivacyText,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Synthetic data utility',\n\t\t\t\ttext: syntheticDataUtilityText,\n\t\t\t},\n\t\t]\n\t}, [\n\t\tsensitiveDataPrivacyText,\n\t\taggregateDataUtilityText,\n\t\tsyntheticDataPrivacyText,\n\t\tsyntheticDataUtilityText,\n\t])\n}\n\nexport function getHumanReadableSummaryText(\n\tevaluateResult: IEvaluateResult,\n\tsynthesisInfo: ISynthesisInfo,\n): string {\n\tconst sensitiveDataPrivacyText = getSensitiveDataPrivacyText(\n\t\tevaluateResult,\n\t\tsynthesisInfo,\n\t)\n\tconst aggregateDataUtilityText = getAggregateDataUtilityText(\n\t\tevaluateResult,\n\t\tsynthesisInfo,\n\t)\n\tconst syntheticDataPrivacyText = getSyntheticDataPrivacyText(\n\t\tevaluateResult,\n\t\tsynthesisInfo,\n\t)\n\tconst syntheticDataUtilityText = getSyntheticDataUtilityText(\n\t\tevaluateResult,\n\t\tsynthesisInfo,\n\t)\n\tconst items = [\n\t\t{\n\t\t\tname: 'Sensitive data privacy',\n\t\t\ttext: sensitiveDataPrivacyText,\n\t\t},\n\t\t{\n\t\t\tname: 'Aggregate data utility',\n\t\t\ttext: aggregateDataUtilityText,\n\t\t},\n\t\t{\n\t\t\tname: 'Synthetic data privacy',\n\t\t\ttext: syntheticDataPrivacyText,\n\t\t},\n\t\t{\n\t\t\tname: 'Synthetic data utility',\n\t\t\ttext: syntheticDataUtilityText,\n\t\t},\n\t]\n\n\treturn items.map(item => `- ${item.name}: ${item.text}`).join('\\n')\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { IEvaluateResult } from '@essex/sds-core'\nimport type { IColumn, IDetailsRowStyles } from '@fluentui/react'\nimport {\n\tDetailsList,\n\tDetailsListLayoutMode,\n\tDetailsRow,\n\tSelectionMode,\n\tuseTheme,\n} from '@fluentui/react'\nimport { memo, useCallback } from 'react'\nimport styled from 'styled-components'\n\nimport type { ISynthesisInfo } from '~workers/types'\n\nimport { useHumanReadableSummaryItems } from './HumanReadableSummary.hooks.js'\n\nexport interface HumanReadableSummaryProps {\n\tevaluateResult: IEvaluateResult\n\tsynthesisInfo: ISynthesisInfo\n}\n\nexport const HumanReadableSummary: React.FC<HumanReadableSummaryProps> = memo(\n\tfunction HumanReadableSummary({\n\t\tevaluateResult,\n\t\tsynthesisInfo,\n\t}: HumanReadableSummaryProps) {\n\t\tconst theme = useTheme()\n\t\tconst columns: IColumn[] = [\n\t\t\t{\n\t\t\t\tkey: 'name',\n\t\t\t\tname: 'Name',\n\t\t\t\tfieldName: 'name',\n\t\t\t\tminWidth: 130,\n\t\t\t\tmaxWidth: 130,\n\t\t\t\tisResizable: true,\n\t\t\t\tonRender: item => <b>{item.name}</b>,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'text',\n\t\t\t\tname: 'Text',\n\t\t\t\tfieldName: 'text',\n\t\t\t\tminWidth: 100,\n\t\t\t\tisResizable: true,\n\t\t\t\tonRender: item => <WrappedText>{item.text}</WrappedText>,\n\t\t\t},\n\t\t]\n\t\tconst items = useHumanReadableSummaryItems(evaluateResult, synthesisInfo)\n\t\tconst onRenderRow = useCallback(\n\t\t\tprops => {\n\t\t\t\tconst customStyles: Partial<IDetailsRowStyles> = {}\n\t\t\t\tif (props) {\n\t\t\t\t\tif (props.itemIndex % 2 === 0) {\n\t\t\t\t\t\tcustomStyles.root = { backgroundColor: theme.palette.neutralLight }\n\t\t\t\t\t}\n\t\t\t\t\treturn <DetailsRow {...props} styles={customStyles} />\n\t\t\t\t}\n\t\t\t\treturn null\n\t\t\t},\n\t\t\t[theme],\n\t\t)\n\n\t\treturn (\n\t\t\t<DetailsList\n\t\t\t\tselectionMode={SelectionMode.none}\n\t\t\t\tlayoutMode={DetailsListLayoutMode.justified}\n\t\t\t\tisHeaderVisible={false}\n\t\t\t\tcolumns={columns}\n\t\t\t\titems={items}\n\t\t\t\tonRenderRow={onRenderRow}\n\t\t\t/>\n\t\t)\n\t},\n)\n\nconst WrappedText = styled.span`\n\twhite-space: normal;\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { Spinner } from '@fluentui/react'\nimport styled from 'styled-components'\n\nexport const WrappedText = styled.span`\n\twhite-space: normal;\n`\n\nexport const Container = styled.div`\n\t.ms-DetailsHeader {\n\t\tpadding-top: 0px;\n\t}\n\n\t.ms-DetailsRow-cell {\n\t\tmargin: auto;\n\t}\n`\n\nexport const StyledSpinner = styled(Spinner)`\n\talign-items: baseline;\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { IColumn } from '@fluentui/react'\nimport { IconButton, Selection, SelectionMode } from '@fluentui/react'\nimport { useMemo } from 'react'\n\nimport type { ISynthesisInfo } from '~workers/types'\nimport { IWasmSynthesizerWorkerStatus } from '~workers/types'\n\nimport { StyledSpinner, WrappedText } from './AllSynthesisInfo.styles.js'\nimport type {\n\tDeleteSynthesisInfoCallback,\n\tSelectSynthesisInfoCallback,\n} from './AllSynthesisInfo.types.js'\n\nexport function useSynthesisInfoColumns(\n\tonDelete?: DeleteSynthesisInfoCallback,\n): IColumn[] {\n\treturn useMemo(\n\t\t() =>\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tname: 'Parameters',\n\t\t\t\t\tonRender: (item: ISynthesisInfo) => {\n\t\t\t\t\t\treturn <WrappedText>{item.key}</WrappedText>\n\t\t\t\t\t},\n\t\t\t\t\tkey: 'key',\n\t\t\t\t\tminWidth: 100,\n\t\t\t\t\tisResizable: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'Error',\n\t\t\t\t\tonRender: (item: ISynthesisInfo) => {\n\t\t\t\t\t\treturn <WrappedText>{item.errorMessage ?? '-'}</WrappedText>\n\t\t\t\t\t},\n\t\t\t\t\tkey: 'errorMessage',\n\t\t\t\t\tminWidth: 100,\n\t\t\t\t\tisResizable: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'Status',\n\t\t\t\t\tonRender: (item: ISynthesisInfo) => {\n\t\t\t\t\t\treturn <WrappedText>{item.status}</WrappedText>\n\t\t\t\t\t},\n\t\t\t\t\tkey: 'status',\n\t\t\t\t\tminWidth: 100,\n\t\t\t\t\tisResizable: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'Executed in',\n\t\t\t\t\tonRender: (item: ISynthesisInfo) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<WrappedText>\n\t\t\t\t\t\t\t\t{item.finishedAt\n\t\t\t\t\t\t\t\t\t? `${(\n\t\t\t\t\t\t\t\t\t\t\t(item.finishedAt.valueOf() - item.startedAt.valueOf()) /\n\t\t\t\t\t\t\t\t\t\t\t1000\n\t\t\t\t\t\t\t\t\t  ).toFixed(2)}s`\n\t\t\t\t\t\t\t\t\t: ''}\n\t\t\t\t\t\t\t</WrappedText>\n\t\t\t\t\t\t)\n\t\t\t\t\t},\n\t\t\t\t\tkey: 'executedIn',\n\t\t\t\t\tminWidth: 100,\n\t\t\t\t\tisResizable: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'Progress',\n\t\t\t\t\tonRender: (item: ISynthesisInfo) => {\n\t\t\t\t\t\treturn <WrappedText>{`${item.progress.toFixed()}%`}</WrappedText>\n\t\t\t\t\t},\n\t\t\t\t\tkey: 'progress',\n\t\t\t\t\tminWidth: 100,\n\t\t\t\t\tisResizable: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'Delete',\n\t\t\t\t\tonRender: (item: ISynthesisInfo) => {\n\t\t\t\t\t\treturn item.status !== IWasmSynthesizerWorkerStatus.TERMINATING ? (\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tdata-selection-disabled\n\t\t\t\t\t\t\t\ttext=\"Delete/Terminate synthesis\"\n\t\t\t\t\t\t\t\ticonProps={{ iconName: 'delete' }}\n\t\t\t\t\t\t\t\ttitle=\"Delete/Terminate synthesis\"\n\t\t\t\t\t\t\t\tonClick={() => onDelete?.(item)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<StyledSpinner />\n\t\t\t\t\t\t)\n\t\t\t\t\t},\n\t\t\t\t\tkey: 'delete',\n\t\t\t\t\tminWidth: 100,\n\t\t\t\t\tisResizable: true,\n\t\t\t\t},\n\t\t\t] as IColumn[],\n\t\t[onDelete],\n\t)\n}\n\nexport function useSynthesisInfoSelection(\n\tonSelected?: SelectSynthesisInfoCallback,\n): Selection {\n\treturn useMemo(() => {\n\t\tconst selection = new Selection({\n\t\t\tonSelectionChanged: () => {\n\t\t\t\tconst selectedItems = selection.getSelection()\n\n\t\t\t\tselectedItems.length === 1 &&\n\t\t\t\t\tonSelected?.(selectedItems[0] as ISynthesisInfo)\n\t\t\t},\n\t\t\tselectionMode: SelectionMode.single,\n\t\t})\n\t\treturn selection\n\t}, [onSelected])\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { DetailsList, SelectionMode } from '@fluentui/react'\nimport { FlexContainer, FlexItem } from '@sds/components'\nimport { memo, useEffect } from 'react'\n\nimport {\n\tuseSynthesisInfoColumns,\n\tuseSynthesisInfoSelection,\n} from './AllSynthesisInfo.hooks.js'\nimport { Container } from './AllSynthesisInfo.styles.js'\nimport type { AllSynthesisInfoProps } from './AllSynthesisInfo.types.js'\n\nexport const AllSynthesisInfo: React.FC<AllSynthesisInfoProps> = memo(\n\tfunction AllSynthesisInfo({\n\t\tallSynthesisInfo,\n\t\tselectedSynthesisInfo,\n\t\tonSelected,\n\t\tonDelete,\n\t}) {\n\t\tconst columns = useSynthesisInfoColumns(onDelete)\n\t\tconst selection = useSynthesisInfoSelection(onSelected)\n\n\t\tuseEffect(() => {\n\t\t\tif (selectedSynthesisInfo) {\n\t\t\t\tselection.setItems(allSynthesisInfo)\n\t\t\t\tselection.setKeySelected(selectedSynthesisInfo.key, true, true)\n\t\t\t}\n\t\t}, [selection, allSynthesisInfo, selectedSynthesisInfo])\n\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<FlexContainer vertical>\n\t\t\t\t\t<FlexItem grow={1}>\n\t\t\t\t\t\t<DetailsList\n\t\t\t\t\t\t\titems={allSynthesisInfo}\n\t\t\t\t\t\t\tcolumns={columns}\n\t\t\t\t\t\t\tcompact\n\t\t\t\t\t\t\tsetKey={selectedSynthesisInfo?.key}\n\t\t\t\t\t\t\tselection={selection}\n\t\t\t\t\t\t\tselectionMode={SelectionMode.single}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FlexItem>\n\t\t\t\t</FlexContainer>\n\t\t\t</Container>\n\t\t)\n\t},\n)\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { memo, useCallback } from 'react'\n\nimport {\n\tuseAllSynthesisInfo,\n\tuseSdsManagerInstance,\n\tuseSelectedSynthesisInfo,\n} from '~states'\n\nimport { AllSynthesisInfo } from './AllSynthesisInfo.js'\n\nexport const StatefulAllSynthesisInfo: React.FC = memo(\n\tfunction StatefulAllSynthesisInfo() {\n\t\tconst [manager] = useSdsManagerInstance()\n\t\tconst [allSynthesisInfo] = useAllSynthesisInfo()\n\t\tconst [selectedSynthesis, setSelectedSynthesis] = useSelectedSynthesisInfo()\n\t\tconst onSelected = useCallback(\n\t\t\tnewSelection => {\n\t\t\t\tsetSelectedSynthesis(prev => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tprev?.key !== newSelection?.key ||\n\t\t\t\t\t\tprev?.status !== newSelection?.status\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn newSelection\n\t\t\t\t\t}\n\t\t\t\t\treturn prev\n\t\t\t\t})\n\t\t\t},\n\t\t\t[setSelectedSynthesis],\n\t\t)\n\t\tconst onDelete = useCallback(\n\t\t\tasync selection => {\n\t\t\t\tawait manager?.instance.terminateSynthesizer(selection.key)\n\t\t\t\tsetSelectedSynthesis(prev => {\n\t\t\t\t\tif (prev?.key === selection.key) {\n\t\t\t\t\t\treturn null\n\t\t\t\t\t}\n\t\t\t\t\treturn prev\n\t\t\t\t})\n\t\t\t},\n\t\t\t[manager, setSelectedSynthesis],\n\t\t)\n\n\t\treturn (\n\t\t\t<AllSynthesisInfo\n\t\t\t\tallSynthesisInfo={allSynthesisInfo}\n\t\t\t\tselectedSynthesisInfo={selectedSynthesis}\n\t\t\t\tonSelected={onSelected}\n\t\t\t\tonDelete={onDelete}\n\t\t\t/>\n\t\t)\n\t},\n)\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { IconButton, useTheme } from '@fluentui/react'\nimport { FlexContainer } from '@sds/components'\nimport { memo, useState } from 'react'\n\nimport type { CollapsablePanelProps } from './CollapsablePanel.types.js'\n\nexport const CollapsablePanel: React.FC<CollapsablePanelProps> = memo(\n\tfunction CollapsablePanel({ header, children, defaultCollapsed }) {\n\t\tconst theme = useTheme()\n\t\tconst [isCollapsed, setIsCollapsed] = useState(defaultCollapsed ?? false)\n\n\t\treturn (\n\t\t\t<FlexContainer vertical gap={theme.spacing.s1}>\n\t\t\t\t<FlexContainer\n\t\t\t\t\tjustify=\"space-between\"\n\t\t\t\t\talign=\"center\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tborderBottom: `1px solid ${theme.palette.neutralLighter}`,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{header}\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\ticonProps={{\n\t\t\t\t\t\t\ticonName: isCollapsed ? 'ChevronUp' : 'ChevronDown',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\ttitle={isCollapsed ? 'Hide' : 'Show'}\n\t\t\t\t\t\tonClick={() => setIsCollapsed(prev => !prev)}\n\t\t\t\t\t/>\n\t\t\t\t</FlexContainer>\n\t\t\t\t{isCollapsed && children}\n\t\t\t</FlexContainer>\n\t\t)\n\t},\n)\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { Label, Stack } from '@fluentui/react'\nimport { memo } from 'react'\n\nimport { InfoTooltip } from '~components/InfoTooltip'\n\nexport interface TooltipWrapperProps {\n\tlabel?: string\n\ttooltip?: JSX.Element\n\tchildren?: JSX.Element\n}\n\nexport const TooltipWrapper: React.FC<TooltipWrapperProps> = memo(\n\tfunction SpinButtonWithTooltip({\n\t\tlabel,\n\t\ttooltip,\n\t\tchildren,\n\t}: TooltipWrapperProps) {\n\t\treturn (\n\t\t\t<Stack>\n\t\t\t\t<Stack horizontal>\n\t\t\t\t\t{label && <Label>{label}</Label>}\n\t\t\t\t\t{tooltip && <InfoTooltip title={label}>{tooltip}</InfoTooltip>}\n\t\t\t\t</Stack>\n\t\t\t\t{children}\n\t\t\t</Stack>\n\t\t)\n\t},\n)\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { IDropdownOption, IInputProps } from '@fluentui/react'\nimport { DropdownMenuItemType } from '@fluentui/react'\nimport { useCallback, useMemo } from 'react'\nimport type { SetterOrUpdater } from 'recoil'\n\nimport type { IRawSynthesisParameters } from '~models'\nimport {\n\tAccuracyMode,\n\tdefaultThreshold,\n\tFabricationMode,\n\tOversamplingType,\n\tUseSyntheticCounts,\n} from '~models'\nimport { useRawSynthesisParameters } from '~states'\nimport { SynthesisMode } from '~workers/types'\n\nexport function useNoisyCountThresholdChange(\n\tnoisyCountThreshold: IInputProps,\n\tsetRawSynthesisParams: SetterOrUpdater<IRawSynthesisParameters>,\n): {\n\t[length: number]: (\n\t\tevent: React.SyntheticEvent<HTMLElement>,\n\t\tnewValue?: string,\n\t) => void\n} {\n\treturn useMemo(() => {\n\t\tconst handlers = {}\n\n\t\tfor (const l of Object.keys(noisyCountThreshold)) {\n\t\t\thandlers[+l] = (_event, newValue?) => {\n\t\t\t\tconst val = +(newValue || 0)\n\t\t\t\tif (!isNaN(val)) {\n\t\t\t\t\tsetRawSynthesisParams(prev => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tthreshold: {\n\t\t\t\t\t\t\t...prev.threshold,\n\t\t\t\t\t\t\t[l]: val,\n\t\t\t\t\t\t},\n\t\t\t\t\t}))\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn handlers\n\t}, [noisyCountThreshold, setRawSynthesisParams])\n}\n\nexport function useFabricationModeOptions(): IDropdownOption[] {\n\treturn [\n\t\t{ key: FabricationMode.Uncontrolled, text: FabricationMode.Uncontrolled },\n\t\t{ key: FabricationMode.Progressive, text: FabricationMode.Progressive },\n\t\t{ key: FabricationMode.Balanced, text: FabricationMode.Balanced },\n\t\t{ key: FabricationMode.Minimize, text: FabricationMode.Minimize },\n\t\t{ key: FabricationMode.Custom, text: FabricationMode.Custom },\n\t]\n}\n\nexport function useOversamplingTypeOptions(): IDropdownOption[] {\n\treturn [\n\t\t{ key: OversamplingType.Unlimited, text: OversamplingType.Unlimited },\n\t\t{ key: OversamplingType.Controlled, text: OversamplingType.Controlled },\n\t]\n}\n\nexport function useAccuracyModeOptions(): IDropdownOption[] {\n\treturn [\n\t\t{\n\t\t\tkey: AccuracyMode.PrioritizeLongCombinations,\n\t\t\ttext: AccuracyMode.PrioritizeLongCombinations,\n\t\t},\n\t\t{\n\t\t\tkey: AccuracyMode.PrioritizeShortCombinations,\n\t\t\ttext: AccuracyMode.PrioritizeShortCombinations,\n\t\t},\n\t\t{ key: AccuracyMode.Balanced, text: AccuracyMode.Balanced },\n\t]\n}\n\nexport function useSynthesisModeOptions(): IDropdownOption[] {\n\treturn [\n\t\t{\n\t\t\tkey: 'K-Anonymity',\n\t\t\ttext: 'K-Anonymity',\n\t\t\titemType: DropdownMenuItemType.Header,\n\t\t},\n\t\t{ key: SynthesisMode.RowSeeded, text: SynthesisMode.RowSeeded },\n\t\t{ key: SynthesisMode.ValueSeeded, text: SynthesisMode.ValueSeeded },\n\t\t{ key: SynthesisMode.AggregateSeeded, text: SynthesisMode.AggregateSeeded },\n\t\t{ key: SynthesisMode.Unseeded, text: SynthesisMode.Unseeded },\n\t\t{\n\t\t\tkey: 'Differential Privacy Header',\n\t\t\ttext: SynthesisMode.DP,\n\t\t\titemType: DropdownMenuItemType.Header,\n\t\t},\n\t\t{ key: SynthesisMode.DP, text: `DP ${SynthesisMode.AggregateSeeded}` },\n\t]\n}\n\nexport function useUseSyntheticCountOptions(): IDropdownOption[] {\n\treturn [\n\t\t{ key: UseSyntheticCounts.No, text: UseSyntheticCounts.No },\n\t\t{ key: UseSyntheticCounts.Yes, text: UseSyntheticCounts.Yes },\n\t]\n}\n\nexport function useUpdateNoisyCountThreshold(): (\n\tfabricationMode: FabricationMode,\n\treportingLength: number,\n) => void {\n\tconst [, setRawSynthesisParams] = useRawSynthesisParameters()\n\n\treturn useCallback(\n\t\t(fabricationMode: FabricationMode, reportingLength: number) => {\n\t\t\tif (fabricationMode === FabricationMode.Custom) {\n\t\t\t\tsetRawSynthesisParams(prev => {\n\t\t\t\t\tif (reportingLength - 1 !== Object.keys(prev.threshold).length) {\n\t\t\t\t\t\tconst newValues = {}\n\t\t\t\t\t\tfor (let i = 2; i <= reportingLength; ++i) {\n\t\t\t\t\t\t\tnewValues[i] = prev.threshold[i] || defaultThreshold\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tthreshold: newValues,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn prev\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tsetRawSynthesisParams(prev => ({\n\t\t\t\t\t...prev,\n\t\t\t\t\tthreshold: {},\n\t\t\t\t}))\n\t\t\t}\n\t\t},\n\t\t[setRawSynthesisParams],\n\t)\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { Dropdown, SpinButton } from '@fluentui/react'\nimport styled from 'styled-components'\n\nexport const StyledDropdown = styled(Dropdown)`\n\twidth: 205px;\n`\n\nexport const StyledSpinButton = styled(SpinButton)`\n\twidth: 205px;\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\n/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { Position, useTheme } from '@fluentui/react'\nimport { FlexContainer } from '@sds/components'\nimport { memo, useEffect } from 'react'\n\nimport { TooltipWrapper } from '~components/TooltipWrapper'\nimport { FabricationMode, OversamplingType } from '~models'\nimport { useDropdownOnChange, useSpinButtonOnChange } from '~pages/hooks'\nimport {\n\tuseRawSynthesisParameters,\n\tuseRawSynthesisParametersPropertySetter,\n} from '~states'\nimport { tooltips } from '~ui-tooltips'\nimport { SynthesisMode } from '~workers/types'\n\nimport {\n\tuseAccuracyModeOptions,\n\tuseFabricationModeOptions,\n\tuseNoisyCountThresholdChange,\n\tuseOversamplingTypeOptions,\n\tuseUpdateNoisyCountThreshold,\n\tuseUseSyntheticCountOptions,\n} from './DataSynthesisParameters.hooks.js'\nimport {\n\tStyledDropdown,\n\tStyledSpinButton,\n} from './DataSynthesisParameters.styles.js'\n\nexport const DataSynthesisAdvancedParameters: React.FC = memo(\n\tfunction DataSynthesisParameter() {\n\t\tconst theme = useTheme()\n\t\tconst [rawSynthesisParams, setRawSynthesisParams] =\n\t\t\tuseRawSynthesisParameters()\n\n\t\tconst oversamplingTypeOptions = useOversamplingTypeOptions()\n\t\tconst useSyntheticCountsOptions = useUseSyntheticCountOptions()\n\t\tconst fabricationModeOptions = useFabricationModeOptions()\n\t\tconst accuracyModeOptions = useAccuracyModeOptions()\n\n\t\tconst handleCacheSizeChange = useSpinButtonOnChange(\n\t\t\tuseRawSynthesisParametersPropertySetter('cacheSize'),\n\t\t)\n\t\tconst handleOversamplingTypeChange = useDropdownOnChange(\n\t\t\tuseRawSynthesisParametersPropertySetter('oversamplingType'),\n\t\t)\n\t\tconst handleOversamplingRatioChange = useSpinButtonOnChange(\n\t\t\tuseRawSynthesisParametersPropertySetter('oversamplingRatio'),\n\t\t)\n\t\tconst handleOversamplingTriesChange = useSpinButtonOnChange(\n\t\t\tuseRawSynthesisParametersPropertySetter('oversamplingTries'),\n\t\t)\n\t\tconst handleAggregateSeededUseSyntheticCountsChange = useDropdownOnChange(\n\t\t\tuseRawSynthesisParametersPropertySetter(\n\t\t\t\t'aggregateSeededUseSyntheticCounts',\n\t\t\t),\n\t\t)\n\t\tconst handleWeightSelectionPercentileChange = useSpinButtonOnChange(\n\t\t\tuseRawSynthesisParametersPropertySetter('weightSelectionPercentile'),\n\t\t)\n\t\tconst handleDeltaFactorChange = useSpinButtonOnChange(\n\t\t\tuseRawSynthesisParametersPropertySetter('deltaFactor'),\n\t\t)\n\t\tconst handleDpAggregateSeededUseSyntheticCountsChange = useDropdownOnChange(\n\t\t\tuseRawSynthesisParametersPropertySetter(\n\t\t\t\t'dpAggregateSeededUseSyntheticCounts',\n\t\t\t),\n\t\t)\n\t\tconst handlePercentilePercentageChange = useSpinButtonOnChange(\n\t\t\tuseRawSynthesisParametersPropertySetter('percentilePercentage'),\n\t\t)\n\t\tconst handlePercentileEpsilonProportionChange = useSpinButtonOnChange(\n\t\t\tuseRawSynthesisParametersPropertySetter('percentileEpsilonProportion'),\n\t\t)\n\t\tconst handleNumberOfRecordsEpsilonProportionChange = useSpinButtonOnChange(\n\t\t\tuseRawSynthesisParametersPropertySetter(\n\t\t\t\t'numberOfRecordsEpsilonProportion',\n\t\t\t),\n\t\t)\n\t\tconst handleFabricationModeChange = useDropdownOnChange(\n\t\t\tuseRawSynthesisParametersPropertySetter('fabricationMode'),\n\t\t)\n\t\tconst handleNoisyCountThresholdChange = useNoisyCountThresholdChange(\n\t\t\trawSynthesisParams.threshold,\n\t\t\tsetRawSynthesisParams,\n\t\t)\n\t\tconst handleAccuracyModeChange = useDropdownOnChange(\n\t\t\tuseRawSynthesisParametersPropertySetter('accuracyMode'),\n\t\t)\n\n\t\tconst updateNoisyCountThreshold = useUpdateNoisyCountThreshold()\n\n\t\tuseEffect(() => {\n\t\t\tupdateNoisyCountThreshold(\n\t\t\t\trawSynthesisParams.fabricationMode,\n\t\t\t\trawSynthesisParams.reportingLength,\n\t\t\t)\n\t\t}, [\n\t\t\trawSynthesisParams.fabricationMode,\n\t\t\trawSynthesisParams.reportingLength,\n\t\t\tupdateNoisyCountThreshold,\n\t\t])\n\n\t\treturn (\n\t\t\t<FlexContainer gap={theme.spacing.s1} vertical wrap>\n\t\t\t\t<TooltipWrapper tooltip={tooltips.cacheSize} label=\"Cache size\">\n\t\t\t\t\t<StyledSpinButton\n\t\t\t\t\t\tlabelPosition={Position.top}\n\t\t\t\t\t\tmin={1}\n\t\t\t\t\t\tstep={1000}\n\t\t\t\t\t\tvalue={rawSynthesisParams.cacheSize.toString()}\n\t\t\t\t\t\tonChange={handleCacheSizeChange}\n\t\t\t\t\t/>\n\t\t\t\t</TooltipWrapper>\n\n\t\t\t\t{rawSynthesisParams.synthesisMode === SynthesisMode.ValueSeeded && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<TooltipWrapper\n\t\t\t\t\t\t\ttooltip={tooltips.oversampling}\n\t\t\t\t\t\t\tlabel=\"Oversampling\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<StyledDropdown\n\t\t\t\t\t\t\t\tselectedKey={rawSynthesisParams.oversamplingType}\n\t\t\t\t\t\t\t\tonChange={handleOversamplingTypeChange}\n\t\t\t\t\t\t\t\tplaceholder=\"Select oversampling type\"\n\t\t\t\t\t\t\t\toptions={oversamplingTypeOptions}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</TooltipWrapper>\n\n\t\t\t\t\t\t{rawSynthesisParams.oversamplingType ===\n\t\t\t\t\t\t\tOversamplingType.Controlled && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<TooltipWrapper\n\t\t\t\t\t\t\t\t\ttooltip={tooltips.oversamplingRatio}\n\t\t\t\t\t\t\t\t\tlabel=\"Oversampling ratio\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<StyledSpinButton\n\t\t\t\t\t\t\t\t\t\tlabelPosition={Position.top}\n\t\t\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\t\t\tstep={0.1}\n\t\t\t\t\t\t\t\t\t\tvalue={rawSynthesisParams.oversamplingRatio.toString()}\n\t\t\t\t\t\t\t\t\t\tonChange={handleOversamplingRatioChange}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</TooltipWrapper>\n\n\t\t\t\t\t\t\t\t<TooltipWrapper\n\t\t\t\t\t\t\t\t\ttooltip={tooltips.oversamplingTries}\n\t\t\t\t\t\t\t\t\tlabel=\"Oversampling tries\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<StyledSpinButton\n\t\t\t\t\t\t\t\t\t\tlabelPosition={Position.top}\n\t\t\t\t\t\t\t\t\t\tmin={1}\n\t\t\t\t\t\t\t\t\t\tstep={1}\n\t\t\t\t\t\t\t\t\t\tvalue={rawSynthesisParams.oversamplingTries.toString()}\n\t\t\t\t\t\t\t\t\t\tonChange={handleOversamplingTriesChange}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</TooltipWrapper>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t)}\n\n\t\t\t\t{rawSynthesisParams.synthesisMode === SynthesisMode.AggregateSeeded && (\n\t\t\t\t\t<TooltipWrapper\n\t\t\t\t\t\ttooltip={tooltips.useSyntheticCounts}\n\t\t\t\t\t\tlabel=\"Use synthetic counts\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<StyledDropdown\n\t\t\t\t\t\t\tselectedKey={rawSynthesisParams.aggregateSeededUseSyntheticCounts}\n\t\t\t\t\t\t\tonChange={handleAggregateSeededUseSyntheticCountsChange}\n\t\t\t\t\t\t\tplaceholder=\"Select\"\n\t\t\t\t\t\t\toptions={useSyntheticCountsOptions}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</TooltipWrapper>\n\t\t\t\t)}\n\n\t\t\t\t{(rawSynthesisParams.synthesisMode === SynthesisMode.AggregateSeeded ||\n\t\t\t\t\trawSynthesisParams.synthesisMode === SynthesisMode.DP) && (\n\t\t\t\t\t<TooltipWrapper\n\t\t\t\t\t\ttooltip={tooltips.weightSelectionPercentile}\n\t\t\t\t\t\tlabel=\"Weight selection percentile\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<StyledSpinButton\n\t\t\t\t\t\t\tlabelPosition={Position.top}\n\t\t\t\t\t\t\tmin={1}\n\t\t\t\t\t\t\tmax={100}\n\t\t\t\t\t\t\tstep={5}\n\t\t\t\t\t\t\tvalue={rawSynthesisParams.weightSelectionPercentile.toString()}\n\t\t\t\t\t\t\tonChange={handleWeightSelectionPercentileChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</TooltipWrapper>\n\t\t\t\t)}\n\n\t\t\t\t{rawSynthesisParams.synthesisMode === SynthesisMode.DP && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<TooltipWrapper tooltip={tooltips.deltaFactor} label=\"Delta factor\">\n\t\t\t\t\t\t\t<StyledSpinButton\n\t\t\t\t\t\t\t\tlabelPosition={Position.top}\n\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\tstep={1}\n\t\t\t\t\t\t\t\tvalue={rawSynthesisParams.deltaFactor.toString()}\n\t\t\t\t\t\t\t\tonChange={handleDeltaFactorChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</TooltipWrapper>\n\t\t\t\t\t\t<TooltipWrapper\n\t\t\t\t\t\t\ttooltip={tooltips.useSyntheticCounts}\n\t\t\t\t\t\t\tlabel=\"Use synthetic counts\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<StyledDropdown\n\t\t\t\t\t\t\t\tselectedKey={\n\t\t\t\t\t\t\t\t\trawSynthesisParams.dpAggregateSeededUseSyntheticCounts\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonChange={handleDpAggregateSeededUseSyntheticCountsChange}\n\t\t\t\t\t\t\t\tplaceholder=\"Select\"\n\t\t\t\t\t\t\t\toptions={useSyntheticCountsOptions}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</TooltipWrapper>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\n\t\t\t\t{rawSynthesisParams.synthesisMode === SynthesisMode.DP && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<TooltipWrapper\n\t\t\t\t\t\t\ttooltip={tooltips.percentilePercentage}\n\t\t\t\t\t\t\tlabel=\"Percentile percentage\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<StyledSpinButton\n\t\t\t\t\t\t\t\tlabelPosition={Position.top}\n\t\t\t\t\t\t\t\tmin={1}\n\t\t\t\t\t\t\t\tmax={100}\n\t\t\t\t\t\t\t\tstep={5}\n\t\t\t\t\t\t\t\tvalue={rawSynthesisParams.percentilePercentage.toString()}\n\t\t\t\t\t\t\t\tonChange={handlePercentilePercentageChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</TooltipWrapper>\n\n\t\t\t\t\t\t<TooltipWrapper\n\t\t\t\t\t\t\ttooltip={tooltips.percentileEpsilonProportion}\n\t\t\t\t\t\t\tlabel=\"Percentile epsilon proportion\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<StyledSpinButton\n\t\t\t\t\t\t\t\tlabelPosition={Position.top}\n\t\t\t\t\t\t\t\tmin={0.01}\n\t\t\t\t\t\t\t\tmax={0.99}\n\t\t\t\t\t\t\t\tstep={0.01}\n\t\t\t\t\t\t\t\tvalue={rawSynthesisParams.percentileEpsilonProportion.toString()}\n\t\t\t\t\t\t\t\tonChange={handlePercentileEpsilonProportionChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</TooltipWrapper>\n\n\t\t\t\t\t\t<TooltipWrapper\n\t\t\t\t\t\t\ttooltip={tooltips.numberOfRecordsEpsilonProportion}\n\t\t\t\t\t\t\tlabel=\"Number of records epsilon proportion\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<StyledSpinButton\n\t\t\t\t\t\t\t\tlabelPosition={Position.top}\n\t\t\t\t\t\t\t\tmin={0.001}\n\t\t\t\t\t\t\t\tmax={0.99}\n\t\t\t\t\t\t\t\tstep={0.001}\n\t\t\t\t\t\t\t\tvalue={rawSynthesisParams.numberOfRecordsEpsilonProportion.toString()}\n\t\t\t\t\t\t\t\tonChange={handleNumberOfRecordsEpsilonProportionChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</TooltipWrapper>\n\n\t\t\t\t\t\t<TooltipWrapper\n\t\t\t\t\t\t\ttooltip={tooltips.accuracyMode}\n\t\t\t\t\t\t\tlabel=\"Accuracy mode\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<StyledDropdown\n\t\t\t\t\t\t\t\tselectedKey={rawSynthesisParams.accuracyMode}\n\t\t\t\t\t\t\t\tonChange={handleAccuracyModeChange}\n\t\t\t\t\t\t\t\tplaceholder=\"Select accuracy mode\"\n\t\t\t\t\t\t\t\toptions={accuracyModeOptions}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</TooltipWrapper>\n\n\t\t\t\t\t\t<TooltipWrapper\n\t\t\t\t\t\t\ttooltip={tooltips.fabricationMode}\n\t\t\t\t\t\t\tlabel=\"Fabrication mode\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<StyledDropdown\n\t\t\t\t\t\t\t\tselectedKey={rawSynthesisParams.fabricationMode}\n\t\t\t\t\t\t\t\tonChange={handleFabricationModeChange}\n\t\t\t\t\t\t\t\tplaceholder=\"Select fabrication mode\"\n\t\t\t\t\t\t\t\toptions={fabricationModeOptions}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</TooltipWrapper>\n\n\t\t\t\t\t\t{rawSynthesisParams.fabricationMode === FabricationMode.Custom &&\n\t\t\t\t\t\t\tObject.keys(rawSynthesisParams.threshold).map(l => (\n\t\t\t\t\t\t\t\t<TooltipWrapper\n\t\t\t\t\t\t\t\t\tkey={l}\n\t\t\t\t\t\t\t\t\ttooltip={tooltips.thresholdValue}\n\t\t\t\t\t\t\t\t\tlabel={`${l}-counts threshold`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<StyledSpinButton\n\t\t\t\t\t\t\t\t\t\tlabelPosition={Position.top}\n\t\t\t\t\t\t\t\t\t\tmin={0.01}\n\t\t\t\t\t\t\t\t\t\tmax={1.0}\n\t\t\t\t\t\t\t\t\t\tstep={0.01}\n\t\t\t\t\t\t\t\t\t\tvalue={rawSynthesisParams.threshold[l].toString()}\n\t\t\t\t\t\t\t\t\t\tonChange={handleNoisyCountThresholdChange[l]}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</TooltipWrapper>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</FlexContainer>\n\t\t)\n\t},\n)\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\n/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport {\n\tIconButton,\n\tPanel,\n\tPosition,\n\tPrimaryButton,\n\tuseTheme,\n} from '@fluentui/react'\nimport { useBoolean } from '@fluentui/react-hooks'\nimport { FlexContainer, FlexItem } from '@sds/components'\nimport { memo, useEffect } from 'react'\n\nimport { InfoTooltip } from '~components/InfoTooltip'\nimport { TooltipWrapper } from '~components/TooltipWrapper'\nimport { useDropdownOnChange, useSpinButtonOnChange } from '~pages/hooks'\nimport {\n\tuseRawSynthesisParameters,\n\tuseRawSynthesisParametersPropertySetter,\n} from '~states'\nimport { tooltips } from '~ui-tooltips'\nimport { SynthesisMode } from '~workers/types'\n\nimport { DataSynthesisAdvancedParameters } from './DataSynthesisAdvancedParameters.js'\nimport {\n\tuseSynthesisModeOptions,\n\tuseUpdateNoisyCountThreshold,\n} from './DataSynthesisParameters.hooks.js'\nimport {\n\tStyledDropdown,\n\tStyledSpinButton,\n} from './DataSynthesisParameters.styles.js'\nimport type { DataSynthesisParametersProps } from './DataSynthesisParameters.types.js'\n\nexport const DataSynthesisParameters: React.FC<DataSynthesisParametersProps> =\n\tmemo(function DataSynthesisParameter({\n\t\tenableRun,\n\t\tsensitiveCsvContent,\n\t\tonRun,\n\t}) {\n\t\tconst theme = useTheme()\n\t\tconst [rawSynthesisParams] = useRawSynthesisParameters()\n\t\tconst [\n\t\t\tisAdvancedParametersOpen,\n\t\t\t{ setTrue: openAdvancedParameter, setFalse: dismissAdvancedParameter },\n\t\t] = useBoolean(false)\n\n\t\tconst synthesisModeOptions = useSynthesisModeOptions()\n\n\t\tconst handleSynthesisModeChange = useDropdownOnChange<SynthesisMode>(\n\t\t\tuseRawSynthesisParametersPropertySetter('synthesisMode'),\n\t\t)\n\t\tconst handleResolutionChange = useSpinButtonOnChange(\n\t\t\tuseRawSynthesisParametersPropertySetter('resolution'),\n\t\t)\n\t\tconst handleRecordLimitChange = useSpinButtonOnChange(\n\t\t\tuseRawSynthesisParametersPropertySetter('recordLimit'),\n\t\t)\n\t\tconst handleReportingLengthChange = useSpinButtonOnChange(\n\t\t\tuseRawSynthesisParametersPropertySetter('reportingLength'),\n\t\t)\n\t\tconst handleNoiseEpsilonChange = useSpinButtonOnChange(\n\t\t\tuseRawSynthesisParametersPropertySetter('noiseEpsilon'),\n\t\t)\n\n\t\tconst updateNoisyCountThreshold = useUpdateNoisyCountThreshold()\n\n\t\tconst onRunClicked = () => onRun(rawSynthesisParams)\n\n\t\tuseEffect(() => {\n\t\t\tupdateNoisyCountThreshold(\n\t\t\t\trawSynthesisParams.fabricationMode,\n\t\t\t\trawSynthesisParams.reportingLength,\n\t\t\t)\n\t\t}, [\n\t\t\trawSynthesisParams.fabricationMode,\n\t\t\trawSynthesisParams.reportingLength,\n\t\t\tupdateNoisyCountThreshold,\n\t\t])\n\n\t\treturn (\n\t\t\t<FlexContainer gap={theme.spacing.s1} vertical wrap>\n\t\t\t\t<FlexContainer gap={theme.spacing.s1} wrap>\n\t\t\t\t\t<TooltipWrapper\n\t\t\t\t\t\ttooltip={tooltips.synthesisMode}\n\t\t\t\t\t\tlabel=\"Synthesis mode\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<StyledDropdown\n\t\t\t\t\t\t\ttitle=\"Synthesis mode\"\n\t\t\t\t\t\t\tselectedKey={rawSynthesisParams.synthesisMode}\n\t\t\t\t\t\t\tonChange={handleSynthesisModeChange}\n\t\t\t\t\t\t\tplaceholder=\"Select synthesis mode\"\n\t\t\t\t\t\t\toptions={synthesisModeOptions}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</TooltipWrapper>\n\t\t\t\t\t<TooltipWrapper\n\t\t\t\t\t\ttooltip={tooltips.resolution}\n\t\t\t\t\t\tlabel=\"Privacy resolution\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<StyledSpinButton\n\t\t\t\t\t\t\tlabelPosition={Position.top}\n\t\t\t\t\t\t\tmin={1}\n\t\t\t\t\t\t\tstep={1}\n\t\t\t\t\t\t\tvalue={rawSynthesisParams.resolution.toString()}\n\t\t\t\t\t\t\tonChange={handleResolutionChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</TooltipWrapper>\n\t\t\t\t\t<TooltipWrapper\n\t\t\t\t\t\ttooltip={tooltips.reportingLength}\n\t\t\t\t\t\tlabel=\"Aggregation limit\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<StyledSpinButton\n\t\t\t\t\t\t\tlabelPosition={Position.top}\n\t\t\t\t\t\t\tmin={1}\n\t\t\t\t\t\t\tstep={1}\n\t\t\t\t\t\t\tvalue={rawSynthesisParams.reportingLength.toString()}\n\t\t\t\t\t\t\tonChange={handleReportingLengthChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</TooltipWrapper>\n\t\t\t\t\t<TooltipWrapper tooltip={tooltips.recordLimit} label=\"Record limit\">\n\t\t\t\t\t\t<StyledSpinButton\n\t\t\t\t\t\t\tlabelPosition={Position.top}\n\t\t\t\t\t\t\tmin={1}\n\t\t\t\t\t\t\tmax={sensitiveCsvContent.table.numRows()}\n\t\t\t\t\t\t\tstep={10}\n\t\t\t\t\t\t\tvalue={rawSynthesisParams.recordLimit.toString()}\n\t\t\t\t\t\t\tonChange={handleRecordLimitChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</TooltipWrapper>\n\n\t\t\t\t\t<FlexItem align=\"flex-end\">\n\t\t\t\t\t\t<PrimaryButton\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tonClick={onRunClicked}\n\t\t\t\t\t\t\tdisabled={!enableRun}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tRun\n\t\t\t\t\t\t</PrimaryButton>\n\t\t\t\t\t</FlexItem>\n\t\t\t\t\t<FlexItem align=\"flex-end\">\n\t\t\t\t\t\t<InfoTooltip title=\"Run Synthesizer\">\n\t\t\t\t\t\t\t{tooltips.synthesize}\n\t\t\t\t\t\t</InfoTooltip>\n\t\t\t\t\t</FlexItem>\n\t\t\t\t\t<FlexItem align=\"flex-end\">\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\ticonProps={{\n\t\t\t\t\t\t\t\ticonName: 'settings',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttitle={'Advanced parameters'}\n\t\t\t\t\t\t\tonClick={openAdvancedParameter}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FlexItem>\n\t\t\t\t</FlexContainer>\n\n\t\t\t\t<Panel\n\t\t\t\t\tisLightDismiss\n\t\t\t\t\theaderText=\"Advanced parameters\"\n\t\t\t\t\tisOpen={isAdvancedParametersOpen}\n\t\t\t\t\tonDismiss={dismissAdvancedParameter}\n\t\t\t\t\tcloseButtonAriaLabel=\"Close\"\n\t\t\t\t>\n\t\t\t\t\t<DataSynthesisAdvancedParameters />\n\t\t\t\t</Panel>\n\n\t\t\t\t<FlexContainer gap={theme.spacing.s1} wrap>\n\t\t\t\t\t{rawSynthesisParams.synthesisMode === SynthesisMode.DP && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<TooltipWrapper tooltip={tooltips.noiseEpsilon} label=\"Epsilon\">\n\t\t\t\t\t\t\t\t<StyledSpinButton\n\t\t\t\t\t\t\t\t\tlabelPosition={Position.top}\n\t\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\t\tstep={0.1}\n\t\t\t\t\t\t\t\t\tvalue={rawSynthesisParams.noiseEpsilon.toString()}\n\t\t\t\t\t\t\t\t\tonChange={handleNoiseEpsilonChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</TooltipWrapper>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</FlexContainer>\n\t\t\t</FlexContainer>\n\t\t)\n\t})\n","/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { escape, op } from 'arquero';\n/**\r\n * Bins column values using a fixed number of bins.\r\n * The standard behavior here is to truncate a numeric value to the\r\n * lower bound of its bin range. This keeps the output numerical\r\n * but loses information about specific bin boundaries.\r\n * Because binning is a conversion from continuous to categorical,\r\n * many use cases prefer an output value that displays the range.\r\n * The format parameter here will produce a printed string as output.\r\n * @param column - name of the column to bin\r\n * @param min - inclusive minimum of the bin range\r\n * @param max - inclusive maximum of the bin range\r\n * @param count - number of bins to create, they will be equal width\r\n * @param clamped - whether values outside of the bin range should be clamped to the bounds. If this is false, out-of-bounds values will be +/-Infinity.\r\n * @param format - whether to return a formatted string that prints the bin range.\r\n * @returns\r\n */ export function fixedBinCount(column, min, max, count, clamped = false, format = false) {\n    const step = (max - min) / count;\n    return fixedBinStep(column, min, max, step, clamped, format);\n}\n/**\r\n * Bins column values using a fixed bin width. The number of resulting bins is therefore variable.\r\n * The standard behavior here is to truncate a numeric value to the\r\n * lower bound of its bin range. This keeps the output numerical\r\n * but loses information about specific bin boundaries.\r\n * Because binning is a conversion from continuous to categorical,\r\n * many use cases prefer an output value that displays the range.\r\n * The format parameter here will produce a printed string as output.\r\n * @param column - name of the column to bin\r\n * @param min - inclusive minimum of the bin range\r\n * @param max - inclusive maximum of the bin range\r\n * @param step - the width each bin should be\r\n * @param clamped - whether values outside of the bin range should be clamped to the bounds. If this is false, out-of-bounds values will be +/-Infinity.\r\n * @param format - whether to return a formatted string that prints the bin range.\r\n * @returns\r\n */ export function fixedBinStep(column, min, max, step, clamped = false, format = false) {\n    const binner = bin(min, max, step, clamped);\n    return escape((d)=>{\n        const value = binner(d[column]);\n        if (format) {\n            if (value < min) {\n                return `<${min}`;\n            }\n            if (value > max) {\n                return `>${max}`;\n            }\n            const top = value + step;\n            // our final bin is inclusive of the max value,\n            // so change the wording for last bin\n            if (value >= max - step) {\n                return `${value} to ${top > max ? max : top}`;\n            }\n            return `${value} to <${top}`;\n        }\n        return value;\n    });\n}\n/**\r\n * Returns a function that places values in an actual bin, by truncating it to the lower bound.\r\n * This differs slightly from arquero by not using an exclusive max at the top end,\r\n * which would always result in one more bin than desired.\r\n * Our approach aligns with the behaviour of numpy.\r\n * https://numpy.org/doc/stable/reference/generated/numpy.histogram.html\r\n */ function bin(min, max, step, clamped) {\n    const count = Math.ceil((max - min) / step);\n    const ultimate = min + step * count;\n    const penultimate = min + step * (count - 1);\n    const rebinmax = ultimate >= max;\n    return function(value) {\n        // if the ultimate bin is >= the max, put those values in the prior bin\n        // this is due to arquero's exclusive max bound, which will just bin those exact\n        // matches into the final bin, disrupting the expected bin count by adding one\n        const candidate = op.bin(value, min, max, step);\n        if (clamped) {\n            if (candidate === -Infinity) {\n                return min;\n            } else if (candidate === Infinity) {\n                return rebinmax ? penultimate : ultimate;\n            }\n        }\n        return candidate === max && rebinmax ? penultimate : candidate;\n    };\n}\n","export var DataType;\n(function(DataType) {\n    DataType[\"Array\"] = 'array';\n    DataType[\"Boolean\"] = 'boolean';\n    DataType[\"Date\"] = 'date';\n    DataType[\"Number\"] = 'number';\n    DataType[\"String\"] = 'string';\n    DataType[\"Text\"] = 'text';\n    DataType[\"Object\"] = 'object';\n    DataType[\"Undefined\"] = 'undefined';\n    DataType[\"Unknown\"] = 'unknown';\n})(DataType || (DataType = {}));\nexport var SortDirection;\n(function(SortDirection) {\n    SortDirection[\"Ascending\"] = 'asc';\n    SortDirection[\"Descending\"] = 'desc';\n})(SortDirection || (SortDirection = {}));\n","/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import isArray from 'lodash-es/isArray.js';\nimport isDate from 'lodash-es/isDate.js';\nimport isNaN from 'lodash-es/isNaN.js';\nimport isNil from 'lodash-es/isNil.js';\nimport { DataType } from './types.js';\n/**\r\n * Guess the type of a table value with more discernment than typeof\r\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof\r\n * @param value -\r\n * @returns\r\n */ export function determineType(value) {\n    if (isNil(value)) {\n        return DataType.Unknown;\n    }\n    if (isNaN(value)) {\n        return DataType.Number;\n    }\n    const type = typeof value;\n    if (type === 'object') {\n        if (isDate(value)) {\n            return DataType.Date;\n        } else if (isArray(value)) {\n            return DataType.Array;\n        }\n    }\n    return type;\n}\n/**\r\n * Ensure an incoming value matches its datatype.\r\n * For example, if user input is from a textfield, parse it.\r\n * @param value -\r\n * @param dataType -\r\n */ export function coerce(value, dataType) {\n    switch(dataType){\n        case DataType.Number:\n            return Number.parseFloat(value);\n        case DataType.Date:\n            return new Date(value);\n        case DataType.Boolean:\n            return !!value;\n        default:\n            return value;\n    }\n}\n/**\r\n * Returns a nice formatted string for a number\r\n * @param value -\r\n * @param options -\r\n */ export function format(value1, options) {\n    if (value1 === 0) {\n        return '0';\n    }\n    const { minExp =5 , precision =2  } = options || {};\n    const getExp = (value, exp = 0)=>value % 10 === 0 ? getExp(value / 10, exp + 1) : exp;\n    let exp1;\n    let mantissa;\n    if (Number.isInteger(value1)) {\n        exp1 = getExp(value1);\n        if (!Number.isInteger(exp1) || exp1 === 0 || exp1 <= minExp) {\n            return value1 + '';\n        }\n    } else {\n        exp1 = Math.floor(Math.log10(value1));\n        mantissa = value1 / Math.pow(10, exp1);\n        if (Math.abs(exp1) <= minExp || !Number.isInteger(mantissa)) {\n            const fixed = value1.toFixed(precision);\n            const parsed = Number.parseFloat(fixed);\n            return parsed + '';\n        }\n    }\n    mantissa = value1 / Math.pow(10, exp1);\n    return `${mantissa}e${exp1}`;\n}\n/**\r\n * Returns a formatted string for a number, otherwise returns the original value\r\n * @param value -\r\n */ export function formatIfNumber(value) {\n    if (typeof value === 'number') {\n        return format(value);\n    }\n    if (typeof value === 'string') {\n        const parsed = Number.parseFloat(value);\n        if (Number.isFinite(parsed)) {\n            return format(parsed);\n        }\n    }\n    return value;\n}\n","import { determineType } from './data.js';\nimport { DataType } from './types.js';\n/**\r\n * Returns a map of all of the column getters for a table.\r\n */ export function getters(table) {\n    return table.columnNames().reduce((acc, cur)=>{\n        acc[cur] = table.getter(cur);\n        return acc;\n    }, {});\n}\n/**\r\n * Returns a list of column indices that contain at least one 0.\r\n * @param table -\r\n */ export function columnIndexesWithZeros(table) {\n    return table.columnNames().reduce((acc, name, idx)=>{\n        const values = table.array(name);\n        if (values.some((v)=>v === 0)) {\n            acc.push(idx);\n        }\n        return acc;\n    }, []);\n}\n/**\r\n * Returns a list of column names that contain at least one 0.\r\n * @param table -\r\n * @returns\r\n */ export function columnNamesWithZeros(table) {\n    const indexes = columnIndexesWithZeros(table);\n    return indexes.map((i)=>table.columnName(i));\n}\nexport function columnType(table, column) {\n    const values = table.array(column);\n    let dataType = DataType.Unknown;\n    // use the first valid value to guess type\n    values.some((value)=>{\n        if (value !== null && value !== undefined) {\n            dataType = determineType(value);\n            return true;\n        }\n        return false;\n    });\n    return dataType;\n}\n","import { columnType } from './columns.js';\n// arquero uses 1000 as default, but we're sampling the table so assuming higher odds of valid values\nconst SAMPLE_MAX = 100;\n/**\r\n * Generates column typings info for a table.\r\n * @param table -\r\n * @returns\r\n */ export function columnTypes(table, columns) {\n    const selected = columns ? table.select(columns) : table;\n    const sampled = selected.sample(SAMPLE_MAX);\n    return sampled.columnNames().reduce((acc, cur)=>{\n        acc[cur] = columnType(table, cur);\n        return acc;\n    }, {});\n}\n","/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ /* eslint-disable @typescript-eslint/no-non-null-assertion */ import { op } from 'arquero';\nimport { fixedBinCount } from './binning.js';\nimport { determineType } from './data.js';\nimport { DataType } from './types.js';\n/**\r\n * Generates detailed column stats for a table.\r\n * @param table -\r\n * @returns\r\n */ export function stats(table, columns) {\n    const selected = columns ? table.select(columns) : table;\n    const reqStats = requiredStats(selected);\n    const optStats = optionalStats(selected, reqStats);\n    const bins = binning(selected, reqStats, optStats);\n    const cats = categories(selected, reqStats);\n    const results = selected.columnNames().reduce((acc, cur)=>{\n        // mode should only include valid values, so a reasonable value for checking type\n        const mode = reqStats[`${cur}.mode`];\n        const type = determineType(mode);\n        const req = {\n            type,\n            count: reqStats[`${cur}.count`],\n            distinct: reqStats[`${cur}.distinct`],\n            invalid: reqStats[`${cur}.invalid`],\n            mode\n        };\n        const optn = type === DataType.Number ? {\n            min: optStats[`${cur}.min`],\n            max: optStats[`${cur}.max`],\n            mean: optStats[`${cur}.mean`],\n            median: optStats[`${cur}.median`],\n            stdev: optStats[`${cur}.stdev`],\n            bins: bins[`${cur}.bins`]\n        } : {};\n        const optt = type === DataType.Text ? {} : {\n            categories: cats[`${cur}`]\n        };\n        acc[cur] = {\n            ...req,\n            ...optn,\n            ...optt\n        };\n        return acc;\n    }, {});\n    return results;\n}\nfunction requiredStats(table) {\n    const args = table.columnNames().reduce((acc, cur)=>{\n        acc[`${cur}.count`] = op.count();\n        acc[`${cur}.distinct`] = op.distinct(cur);\n        acc[`${cur}.invalid`] = op.invalid(cur);\n        acc[`${cur}.mode`] = op.mode(cur);\n        return acc;\n    }, {});\n    return table.rollup(args).objects()[0];\n}\nfunction optionalStats(table, reqStats) {\n    const args = table.columnNames().reduce((acc, cur)=>{\n        const mode = reqStats[`${cur}.mode`];\n        const type = determineType(mode);\n        if (type === DataType.Number || type === DataType.Date) {\n            acc[`${cur}.min`] = op.min(cur);\n            acc[`${cur}.max`] = op.max(cur);\n            acc[`${cur}.mean`] = op.mean(cur);\n            acc[`${cur}.median`] = op.median(cur);\n            acc[`${cur}.stdev`] = op.stdev(cur);\n        }\n        return acc;\n    }, {});\n    return table.rollup(args).objects()[0];\n}\nfunction binning(table, reqStats, optStats, columns) {\n    const filter = filterColumns(columns, (name)=>{\n        const mode = reqStats[`${name}.mode`];\n        const type = determineType(mode);\n        return type === DataType.Number;\n    });\n    const numeric = table.columnNames(filter);\n    const binArgs = numeric.reduce((acc, cur)=>{\n        const min = optStats[`${cur}.min`];\n        const max = optStats[`${cur}.max`];\n        const distinct = reqStats[`${cur}.distinct`];\n        if (distinct > 10) {\n            acc[cur] = fixedBinCount(cur, min, max, 10, true);\n        }\n        return acc;\n    }, {});\n    const binRollup = table.select(numeric).derive(binArgs);\n    // for each binned column, derive a sorted & counted subtable.\n    // note that only bins with at least one entry will have a row,\n    // so we could have less than 10 bins - hence the fill\n    const counted = numeric.reduce((acc, cur)=>{\n        const min = optStats[`${cur}.min`];\n        const max = optStats[`${cur}.max`];\n        const distinct = reqStats[`${cur}.distinct`];\n        const bins = binRollup.groupby(cur).count().orderby(cur).objects().map((d)=>({\n                min: d[cur],\n                count: d['count']\n            }));\n        // numeric sort puts null at the front - format to match categories style if present\n        if (bins[0].min === null) {\n            bins[0].min = '(empty)';\n        }\n        // make sure we actually have 10\n        acc[`${cur}.bins`] = fillBins(bins, min, max, 10, distinct);\n        return acc;\n    }, {});\n    return counted;\n}\nfunction fillBins(bins, min, max, count, distinct) {\n    if (distinct <= count) {\n        return bins;\n    }\n    const step = (max - min) / count;\n    const hash = bins.reduce((acc, cur)=>{\n        acc[cur.min] = cur;\n        return acc;\n    }, {});\n    const mins = new Array(10).fill(step).map((v, i)=>v * i + min);\n    const filled = mins.map((v)=>hash[v] || {\n            min: v,\n            count: 0\n        });\n    if (bins[0].min === '(empty)') {\n        filled.unshift(bins[0]);\n    }\n    return filled;\n}\nfunction categories(table, reqStats, limit = 20) {\n    // note we're going to limit this to columns with a small number of unique values.\n    // it just doesn't make sense to count everything that is distinct if we can't plot/display it\n    const text = table.columnNames((name)=>{\n        const mode = reqStats[`${name}.mode`];\n        const distinct = reqStats[`${name}.distinct`];\n        const type = determineType(mode);\n        return type === DataType.String && distinct <= limit;\n    });\n    return text.reduce((acc, cur)=>{\n        const counted = table// insert empty text for strings upfront, otherwise localeCompare will fail\n        .impute({\n            [cur]: ()=>'(empty)'\n        }).groupby(cur).count().objects()// sorting manually here so strings are alpha ignoring case\n        .sort((a, b)=>`${a[cur]}`.localeCompare(`${b[cur]}`)).map((d)=>({\n                name: d[cur],\n                count: d['count']\n            }));\n        acc[cur] = counted;\n        return acc;\n    }, {});\n}\n// creates a curried filter function for column names\n// applies the column check first, and only invokes secondary filter function if that passes\nfunction filterColumns(columns, filter) {\n    const set = new Set(columns);\n    const filt = filter || (()=>true);\n    return (name, index, array)=>{\n        if (columns) {\n            return set.has(name) && filt(name, index, array);\n        }\n        return filt(name, index, array);\n    };\n}\n","import { columnTypes } from './columnTypes.js';\nimport { stats } from './stats.js';\n/**\r\n * Performs type inference and stats on a table/columns.\r\n * @param table -\r\n * @param detailed - include detailed per-column stats, otherwise just basic types\r\n * @returns\r\n */ export function introspect(table, detailed = false, /**\r\n\t * List of specific columns to compute, enabling incremental table updates\r\n\t */ columns) {\n    const meta = detailed ? detailedMeta(table, columns) : basicMeta(table, columns);\n    return {\n        rows: table.numRows(),\n        cols: table.numCols(),\n        columns: meta\n    };\n}\nfunction detailedMeta(table, columns) {\n    // Force to get stats from ungrouped table, otherwise will get stats with grouped information and graph will not show\n    const sts = stats(table.ungroup(), columns);\n    return Object.entries(sts).reduce((acc, cur)=>{\n        const [name, stat] = cur;\n        acc[name] = {\n            name,\n            type: stat.type,\n            stats: stat\n        };\n        return acc;\n    }, {});\n}\nfunction basicMeta(table, columns) {\n    // Force to get stats from ungrouped table, otherwise will get stats with grouped information and graph will not show\n    const t = columnTypes(table.ungroup(), columns);\n    return Object.entries(t).reduce((acc, cur)=>{\n        const [name, type] = cur;\n        acc[name] = {\n            name,\n            type\n        };\n        return acc;\n    }, {});\n}\n","/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { SortDirection } from '@essex/arquero';\nexport function groupBuilder(row, existingGroups, actualLevel, totalLevelCount, items, sortDirection, lazyLoadGroups = true, sortColumn, fatherIndex = 0) {\n    const value = row[0];\n    const valueGroups = row[1];\n    const columnName = existingGroups.names[actualLevel];\n    if (!columnName) {\n        throw new Error(`could not determine column name for level ${actualLevel}`);\n    }\n    const startIndex = items.slice(fatherIndex).findIndex((item)=>item[columnName] === value) + fatherIndex;\n    const group = {\n        key: value.toString(),\n        name: value.toString(),\n        startIndex: startIndex,\n        level: actualLevel,\n        count: valueGroups.length,\n        isCollapsed: lazyLoadGroups ? actualLevel !== 0 && startIndex !== 0 : false\n    };\n    const nextLevel = actualLevel + 1;\n    if (nextLevel < totalLevelCount) {\n        const children = sortValueGroupsItems(valueGroups, existingGroups, nextLevel, sortDirection, sortColumn).map((valueGroup)=>{\n            return groupBuilder(valueGroup, existingGroups, nextLevel, totalLevelCount, items, sortDirection, lazyLoadGroups, sortColumn, startIndex);\n        });\n        group.children = children;\n    }\n    return group;\n}\nfunction sortValueGroupsItems(entries, existingGroups, nextLevel, sortDirection, sortColumn) {\n    const columnName = existingGroups.names[nextLevel];\n    if (sortColumn && sortColumn !== columnName) return entries;\n    return sortDirection === SortDirection.Ascending ? entries.sort((a, b)=>a[0] - b[0]) : entries.sort((a, b)=>b[0] - a[0]);\n}\n","export function noop() {\n/* do-nothing */ }\n/**\r\n * Downloads a csv copy of a table\r\n * @param table -\r\n * @param filename -\r\n */ export function downloadTable(table, filename = 'download.csv', options) {\n    const blob = new Blob([\n        table.toCSV(options)\n    ]);\n    download(filename, 'text/csv', blob);\n}\nfunction download(filename, type, data) {\n    const dataURI = URL.createObjectURL(data);\n    const link = document.createElement('a');\n    link.href = dataURI;\n    link.type = type;\n    link.download = filename;\n    link.click();\n}\n","/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { useMemo } from 'react';\nimport { noop } from '../../functions.js';\nexport function useCellClickhandler(clickable, onColumnClick = noop) {\n    return useMemo(()=>clickable ? onColumnClick : undefined, [\n        clickable,\n        onColumnClick\n    ]);\n}\n","import { useMemo } from 'react';\nexport function useCellDimensions(column, considerCompactMode = true) {\n    return useMemo(()=>({\n            width: column?.currentWidth || 0,\n            height: column?.data?.compact && considerCompactMode ? COMPACT_HEIGHT : HEIGHT\n        }), [\n        column,\n        considerCompactMode\n    ]);\n}\nconst COMPACT_HEIGHT = 15;\nconst HEIGHT = 20;\n","/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { useMemo } from 'react';\nimport { noop } from '../../functions.js';\nexport function useCellDropdownSelectHandler(clickable, onOptionSelect = noop) {\n    return useMemo(()=>clickable ? onOptionSelect : undefined, [\n        clickable,\n        onOptionSelect\n    ]);\n}\n","import { useMemo } from 'react';\n/**\r\n * Creates a list of column names for the table.\r\n * If there are no columns supplied or all = true, it will use the list from the table itself.\r\n * Otherwise it will use the provided columns under the assumption the user has configured them as desired.\r\n * @param table -\r\n * @param columns -\r\n * @param all -\r\n * @returns\r\n */ export function useColumnNamesList(table, columns, all = false, visibleColumns) {\n    return useMemo(()=>{\n        const list = !columns || all ? table.columnNames() : columns.map((c)=>c.name);\n        if (visibleColumns && visibleColumns.length > 0) {\n            const hash = visibleColumns.reduce((acc, cur)=>{\n                acc[cur] = true;\n                return acc;\n            }, {});\n            return list.filter((name)=>hash[name]);\n        }\n        return list;\n    }, [\n        table,\n        columns,\n        all,\n        visibleColumns\n    ]);\n}\n","import isArray from 'lodash-es/isArray.js';\nimport isEqual from 'lodash-es/isEqual.js';\nimport isNaN from 'lodash-es/isNaN.js';\nimport isNil from 'lodash-es/isNil.js';\nimport isString from 'lodash-es/isString.js';\nimport orderBy from 'lodash-es/orderBy.js';\nimport uniqWith from 'lodash-es/uniqWith.js';\nexport function getValue(item, column) {\n    return column?.fieldName && item[column.fieldName];\n}\nexport function getDropdownValue(item, rowIndex, column) {\n    const itens = getValue(item, column);\n    const uniqueValues = uniqWith(itens, isEqual);\n    const orderedValues = orderBy(uniqueValues);\n    return orderedValues.map((value, index)=>{\n        return {\n            key: `${index}-${value}`,\n            text: value,\n            data: {\n                rowIndex,\n                column\n            },\n            title: value\n        };\n    });\n}\n/**\r\n * Bins values into strict categories\r\n * @param values\r\n * @returns\r\n */ export function categories(values) {\n    if (!isArray(values)) {\n        return undefined;\n    }\n    return values.reduce((acc, cur)=>{\n        const existing = acc[cur] || 0;\n        acc[cur] = existing + 1;\n        return acc;\n    }, {});\n}\n/**\r\n * Determine if every category value has only a single count\r\n * @param cats\r\n * @returns\r\n */ export function isDistinctCategories(cats) {\n    return Object.values(cats).every((value)=>value === 1);\n}\nexport function isEmpty(value) {\n    if (isNil(value) || isNaN(value)) {\n        return true;\n    }\n    if ((isString(value) || isArray(value)) && value.length === 0) {\n        return true;\n    }\n    return false;\n}\nexport function debounceFn(fn, delay = 500) {\n    const timer = setTimeout(()=>fn(), delay);\n    return ()=>clearTimeout(timer);\n}\n","import { jsx as _jsx } from \"react/jsx-runtime\";\n/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { memo, useMemo } from 'react';\nimport { getValue } from '../util/index.js';\nconst CELL_LENGTH = 5;\nconst TOOLTIP_LENGTH = 20;\n/**\r\n * Basic rendering of array values.\r\n */ export const ArrayCell = /*#__PURE__*/ memo(function ArrayCell({ item , column , textAlign ='left' ,  }) {\n    const values = getValue(item, column) || [];\n    const printed = usePrinted(values);\n    const tooltip = useTooltip(values);\n    return /*#__PURE__*/ _jsx(\"div\", {\n        title: tooltip,\n        style: {\n            textAlign\n        },\n        children: printed\n    });\n});\nfunction usePrinted(values, length = CELL_LENGTH) {\n    return useMemo(()=>{\n        const arr = `[${values.slice(0, length).join(', ')}]`;\n        return values.length > length ? `${arr}...` : arr;\n    }, [\n        values,\n        length\n    ]);\n}\nfunction useTooltip(values, length = TOOLTIP_LENGTH) {\n    return useMemo(()=>{\n        let tooltip = values.slice(0, length).join('\\n');\n        if (values.length > length) {\n            tooltip += `\\n...\\n(+${values.length - length} more)`;\n        }\n        return tooltip;\n    }, [\n        values,\n        length\n    ]);\n}\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useThematic } from '@thematic/react';\nimport { memo, useMemo } from 'react';\nimport { useCellDimensions } from '../hooks/index.js';\nimport { getValue } from '../util/index.js';\n/**\r\n * Symbolic rendering of boolean values.\r\n */ export const BooleanSymbolCell = /*#__PURE__*/ memo(function BooleanSymbolCell({ item , column  }) {\n    const dimensions = useCellDimensions(column);\n    const attrs = useBooleanCircleAttrs(dimensions, item, column);\n    return /*#__PURE__*/ _jsx(\"svg\", {\n        width: dimensions.width,\n        height: dimensions.height,\n        children: /*#__PURE__*/ _jsx(\"circle\", {\n            ...attrs\n        })\n    });\n});\nfunction useBooleanCircleAttrs(dimensions, item, column) {\n    const theme = useThematic();\n    return useMemo(()=>{\n        const value = !!getValue(item, column);\n        const { width , height  } = dimensions;\n        return {\n            cx: width / 2,\n            cy: height / 2,\n            r: height / 4,\n            fill: value ? theme.process().fill().hex() : 'none',\n            stroke: theme.process().stroke().hex()\n        };\n    }, [\n        theme,\n        dimensions,\n        item,\n        column\n    ]);\n}\n","import { jsx as _jsx } from \"react/jsx-runtime\";\n/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { memo } from 'react';\nimport { getValue } from '../util/index.js';\n/**\r\n * Basic rendering of boolean values as true/false text.\r\n */ export const BooleanTextCell = /*#__PURE__*/ memo(function TextCell({ item , column , textAlign ='right'  }) {\n    const value = !!getValue(item, column);\n    return /*#__PURE__*/ _jsx(\"div\", {\n        style: {\n            textAlign\n        },\n        children: value.toString()\n    });\n});\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */ import { chart, plotArea } from '@thematic/d3';\nimport { useThematic } from '@thematic/react';\nimport { scaleLinear } from 'd3-scale';\nimport { select } from 'd3-selection';\nimport { useLayoutEffect, useMemo, useState } from 'react';\n/**\n * Creates a basic linear scale for use with d3.\n * Assumed items are ordered and uses the array index for\n * domain position.\n * @param length\n * @param range\n * @returns\n */ export function useIndexedScale(values, range) {\n    const linear = useMemo(()=>scaleLinear().domain([\n            0,\n            values.length - 1\n        ]).range(range).clamp(true), [\n        values,\n        range\n    ]);\n    return useMemo(()=>(_d, i)=>linear(i), [\n        linear\n    ]);\n}\n/**\n * Creates a basic linear scale for use with d3.\n * Scales linearly from the numeric values using full extent.\n * @param values\n * @param range\n * @returns\n */ export function useNumericLinearScale(values, range) {\n    const extent = useMemo(()=>[\n            Math.min(...values),\n            Math.max(...values)\n        ], [\n        values\n    ]);\n    const linear = useMemo(()=>scaleLinear().domain(extent).range(range), [\n        extent,\n        range\n    ]);\n    return useMemo(()=>{\n        // if there is no variation, just fill the space\n        if (extent[0] === extent[1]) {\n            return ()=>range[1];\n        }\n        return (d)=>linear(d);\n    }, [\n        linear,\n        extent,\n        range\n    ]);\n}\n/**\n * Apply thematic to an SVG.\n * @param svgRef\n * @param width\n * @param height\n */ export function useChartSVG(svgRef, width, height) {\n    const theme = useThematic();\n    useLayoutEffect(()=>{\n        select(svgRef.current).call(chart, theme, {\n            width: width < 0 ? 0 : width,\n            height: height < 0 ? 0 : height\n        });\n    }, [\n        theme,\n        svgRef,\n        width,\n        height\n    ]);\n}\n/**\n * Creates a plot area group with default thematic visuals\n * @param svgRef\n * @param width\n * @param height\n * @returns\n */ export function usePlotGroup(svgRef, width, height) {\n    const theme = useThematic();\n    const [group, setGroup] = useState();\n    useLayoutEffect(()=>{\n        const g = select(svgRef.current).append('g').call(plotArea, theme).append('g');\n        setGroup(g);\n    }, [\n        theme,\n        svgRef,\n        width,\n        height\n    ]);\n    return group;\n}\n","import { jsx as _jsx } from \"react/jsx-runtime\";\n/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */ import { line as themeLine } from '@thematic/d3';\nimport { useThematic } from '@thematic/react';\nimport isArray from 'lodash-es/isArray.js';\nimport { memo, useLayoutEffect, useMemo, useRef } from 'react';\nimport { useChartSVG, useIndexedScale, useNumericLinearScale, usePlotGroup } from './hooks.js';\n/**\n * Renders a basic Sparkbar. This is a Sparkline-style bar chart.\n */ export const Sparkbar = /*#__PURE__*/ memo(function Sparkbar({ data , width , height , categorical =false , color , legend , onBarHover ,  }) {\n    const theme = useThematic();\n    const ref = useRef(null);\n    const colors = useMemo(()=>{\n        if (categorical) {\n            if (isArray(color)) {\n                return color;\n            } else {\n                return theme.scales().nominal(data.length).toArray();\n            }\n        }\n        return color || theme.line().stroke().hex();\n    }, [\n        theme,\n        data,\n        color,\n        categorical\n    ]);\n    // subtracting a small amount from the width ensures we have at least a small amount of gap\n    const barWidth = useMemo(()=>Math.floor((width - 4) / data.length), [\n        data,\n        width\n    ]);\n    const xScale = useIndexedScale(data, [\n        barWidth / 2,\n        width - barWidth / 2\n    ]);\n    // one pixel off the height means min values will still have slight visibility\n    // so the user knows something is there\n    const yScale = useNumericLinearScale(data, [\n        height - 1,\n        0\n    ]);\n    useChartSVG(ref, width, height);\n    const group = usePlotGroup(ref, width, height);\n    useLayoutEffect(()=>{\n        if (group) {\n            // clear the line if the data changes\n            group.selectAll('*').remove();\n            group.selectAll('.bar-group').data(data).enter().append('g').attr('class', 'bar-group').append('line').attr('class', 'bar').attr('x1', xScale).attr('x2', xScale).attr('y1', yScale).attr('y2', height).call(themeLine, theme.line()).attr('stroke-width', barWidth).attr('stroke', (_d, i)=>categorical ? colors[i] ?? null : colors).attr('data-legend', (d, i)=>legend?.length ? legend[i] ?? null : d).attr('data-index', (_d, i)=>i).attr('id', (d, i)=>`bar-${i}-${d}-${Math.round(Math.random() * 100)}`);\n            // Alternative to onBarHover tooltip\n            if (!onBarHover) {\n                group.selectAll('.bar-group').append('title').text((d, i)=>legend?.length ? legend[i] ?? null : d);\n            } else {\n                group.selectAll('.bar').on('mouseover mouseout', onBarHover);\n            }\n        }\n    }, [\n        theme,\n        group,\n        data,\n        height,\n        xScale,\n        yScale,\n        colors,\n        categorical,\n        barWidth,\n        legend,\n        onBarHover, \n    ]);\n    return /*#__PURE__*/ _jsx(\"svg\", {\n        ref: ref\n    });\n});\n","import { jsx as _jsx } from \"react/jsx-runtime\";\n/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */ import { line as themeLine } from '@thematic/d3';\nimport { useThematic } from '@thematic/react';\nimport { line } from 'd3-shape';\nimport { memo, useLayoutEffect, useMemo, useRef } from 'react';\nimport { useChartSVG, useIndexedScale, useNumericLinearScale, usePlotGroup } from './hooks.js';\n/**\n * Renders a basic Sparkline\n */ export const Sparkline = /*#__PURE__*/ memo(function Sparkline({ data , width , height , color ,  }) {\n    const theme = useThematic();\n    const ref = useRef(null);\n    const lineColor = useMemo(()=>{\n        return color || theme.line().stroke().hex();\n    }, [\n        theme,\n        color\n    ]);\n    const xScale = useIndexedScale(data, [\n        0,\n        width\n    ]);\n    const yScale = useNumericLinearScale(data, [\n        height,\n        0\n    ]);\n    useChartSVG(ref, width, height);\n    const group = usePlotGroup(ref, width, height);\n    const path = useMemo(()=>{\n        const gen = line(xScale, yScale);\n        return gen(data);\n    }, [\n        data,\n        xScale,\n        yScale\n    ]);\n    useLayoutEffect(()=>{\n        if (group) {\n            // clear the line if the data changes\n            group.selectAll('*').remove();\n            group.append('path').call(themeLine, theme.line()).attr('d', path).attr('stroke-width', 1).attr('stroke', lineColor);\n        }\n    }, [\n        theme,\n        group,\n        path,\n        lineColor\n    ]);\n    return /*#__PURE__*/ _jsx(\"svg\", {\n        ref: ref\n    });\n});\n","import { jsx as _jsx } from \"react/jsx-runtime\";\n/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { Sparkbar } from '@essex/charts-react';\nimport { memo, useMemo } from 'react';\nimport { useCellDimensions } from '../hooks/index.js';\n/**\r\n * Renders an array-valued cell as a CategoricalBar.\r\n */ export const CategoricalBarCell = /*#__PURE__*/ memo(function CategoricalBarCell({ column , categories ={}  }) {\n    const values = useMemo(()=>Object.values(categories), [\n        categories\n    ]);\n    const dimensions = useCellDimensions(column);\n    return /*#__PURE__*/ _jsx(Sparkbar, {\n        data: values,\n        categorical: true,\n        width: dimensions.width,\n        height: dimensions.height\n    });\n});\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { memo, useCallback, useMemo } from 'react';\nimport styled from 'styled-components';\nexport const CellContainer = /*#__PURE__*/ memo(function CellContainer({ onClick , column , children  }) {\n    const handleColumnClick = useCallback((ev)=>{\n        column && onClick && onClick(ev, column?.data?.selected ? undefined : column);\n    }, [\n        column,\n        onClick\n    ]);\n    const cellStyle = useMemo(()=>{\n        const style = {};\n        if (onClick) {\n            style.cursor = 'pointer';\n        }\n        if (column?.data?.selected) {\n            style.fontWeight = 'bold';\n        }\n        return style;\n    }, [\n        onClick,\n        column\n    ]);\n    return /*#__PURE__*/ _jsx(Container, {\n        onClick: handleColumnClick,\n        style: cellStyle,\n        children: children\n    });\n});\nconst Container = styled.div`\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\theight: 100%;\r\n\twidth: inherit;\r\n\t> * {\r\n\t\t&:first-child {\r\n\t\t\tpadding: 6px 8px 6px 12px;\r\n\t\t}\r\n\t}\r\n`;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\n/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { memo } from 'react';\nimport { getValue } from '../util/index.js';\n/**\r\n * Basic rendering of dates.\r\n */ export const DateCell = /*#__PURE__*/ memo(function DateCell({ item , column , textAlign ='right' ,  }) {\n    const value = getValue(item, column);\n    return /*#__PURE__*/ _jsx(\"div\", {\n        style: {\n            textAlign\n        },\n        children: value && value.toLocaleString()\n    });\n});\n","import React, { Fragment, useRef, useState, useMemo, useEffect } from 'react';\n\n/**\n * Renders a React component while also checking whether the children are a function or not\n * @param props Props of the component to render\n */\n\nvar render = function render(props) {\n  if (typeof props.children === 'function') {\n    return React.createElement(Fragment, null, props.children());\n  }\n\n  return React.createElement(Fragment, null, props.children || null);\n};\n\n/**\n * If the `<Case />` is the first one to have its condition evaluates to true\n * inside the parent `<Switch />` it will be the only rendered.\n * @param props The props to pass down to the `<Case />` component\n */\n\nvar Case = function Case(props) {\n  return render(props);\n};\nCase.defaultProps = {\n  children: null\n};\n\n/**\n * If no `<Case />` have its condition evaluates to true inside the parent `<Switch />`,\n * the first `<Default />` will be the only one rendered.\n * @param props The props to pass down to the `<Default />` component\n */\n\nvar Default = function Default(props) {\n  return render(props);\n};\nDefault.defaultProps = {\n  children: null\n};\n\n/**\n * Must only contain a single child, which it renders as-is.\n * Should not be used outside of an `<If />` block.\n * @param props The props to pass down to the `<Else />` component\n */\n\nvar Else = function Else(props) {\n  return render(props);\n};\n\n/**\n * Must contain only a single child, which it renders as-is.\n * Should not be used outside of an `<If />` block whose condition prop is a promise.\n * @param props The props to pass down to the `<Fallback />` component\n */\n\nvar Fallback = function Fallback(props) {\n  return render(props);\n};\n\n/**\n * Resolves a condition that is {@link BooleanLike} or returns {@link BooleanLike} from a function\n * @param condition The condition to resolve\n */\nvar getConditionResult = function getConditionResult(condition) {\n  var conditionResult = Boolean(typeof condition === 'function' ? condition() : condition);\n  return conditionResult;\n};\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar runtime_1 = createCommonjsModule(function (module) {\n/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined$1; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined$1) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined$1;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined$1;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined$1;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined$1, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined$1;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined$1;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined$1;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined$1;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined$1;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n   module.exports \n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n});\n\n/**\n * The MIT License (MIT)\n *\n * Copyright  `2020` `The Sapphire Community and its contributors`\n *\n * Source: https://github.com/sapphiredev/utilities/blob/main/packages/utilities/src/lib/isThenable.ts\n * Full license: https://github.com/sapphiredev/utilities/blob/main/LICENSE.md\n */\n\n/**\n * Verify if the input is a function.\n * @param input The function to verify\n */\nfunction isFunction(input) {\n  return typeof input === 'function';\n}\n\nfunction hasThen(input) {\n  return Reflect.has(input, 'then') && isFunction(input.then);\n}\n\nfunction hasCatch(input) {\n  return Reflect.has(input, 'catch') && isFunction(input[\"catch\"]);\n}\n/**\n * Verify if an object is a promise.\n * @param input The promise to verify\n */\n\n\nfunction isThenable(input) {\n  if (typeof input !== 'object' || input === null) return false;\n  return input instanceof Promise || input !== Promise.prototype && hasThen(input) && hasCatch(input);\n}\n\n/**\n * Compare two arrays without checking for possible nested properties\n * @param a Array to compare with b\n * @param b Array to compare with a\n * @returns True if arrays are identical, false if they are different\n */\n\nvar shallowArraysEqual = function shallowArraysEqual(a, b) {\n  if (!Array.isArray(a) || !Array.isArray(b)) throw new Error('shallowArraysEqual only accepts arrays as parameters');\n  if (a.length !== b.length) return false;\n\n  for (var i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) return false;\n  }\n\n  return true;\n};\n/**\n * Create a CancellablePromise from a native Promise\n * @param promise The promise object to wrap\n * @returns Return value is an object of type CancellablePromise, with 2 properties:\n * - promise: a promise that can be left pending\n * - cancel: the function to use for cancelling the returned promise\n */\n\nvar createCancellablePromise = function createCancellablePromise(promise) {\n  if (!isThenable(promise)) {\n    throw new Error('Argument of createCancellablePromise should be a Promise');\n  }\n\n  var isCancelled = {\n    value: false\n  };\n  var wrappedPromise = new Promise( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/runtime_1.mark(function _callee(res, rej) {\n      var d;\n      return runtime_1.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return promise;\n\n            case 3:\n              d = _context.sent;\n              return _context.abrupt(\"return\", !isCancelled.value && res(d));\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              !isCancelled.value && rej(_context.t0);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function (_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }()); // Forward potential additional properties\n\n  Object.keys(promise).forEach(function (key) {\n    wrappedPromise[key] = promise[key];\n  });\n  return {\n    promise: wrappedPromise,\n    cancel: function cancel() {\n      isCancelled.value = true;\n    }\n  };\n};\n\n/**\n * Calls a function only once during component lifecycle;\n * When dependency array is provided, will call the function again if at least one of the dependencies changed\n * @param callback The function to execute only once\n * @param dependencies A list of dependencies whose value, if changed since last call,\n * will trigger the execution of the callback\n */\n\nvar useSingleton = function useSingleton(callback, dependencies) {\n  if (dependencies === void 0) {\n    dependencies = [];\n  }\n\n  var hasRan = useRef(false);\n  var lastDependencies = useRef([]); // Parameters type check\n\n  if (typeof callback !== 'function') {\n    throw new Error(\"Incorrect callback parameter for useSingleton hook; expected a function, but got: '\" + typeof callback + \"'.\");\n  }\n\n  if (!Array.isArray(dependencies)) {\n    throw new Error(\"Incorrect dependencies parameter for useSingleton; expected an array, but got: '\" + typeof dependencies + \"'.\");\n  }\n\n  var hasDependencies = Array.isArray(dependencies) && dependencies.length > 0;\n\n  if (hasDependencies) {\n    // Has dependencies\n    var hasAnyDependencyChanged = !shallowArraysEqual(lastDependencies.current, dependencies);\n\n    if (hasAnyDependencyChanged) {\n      // Any dep has changed => overwrite last dependencies and execute callback\n      lastDependencies.current = dependencies;\n    } else if (hasRan.current) {\n      // No dep has changed => same behaviour as if no dependencies\n      return;\n    }\n  } else if (hasRan.current) {\n    // No dependencies\n    return;\n  }\n\n  callback();\n  hasRan.current = true;\n};\n\n/**\n * Must contain only a single child, which it renders as-is.\n * Should not be used outside of an `<If />` block.\n * @param props The props to pass down to the `<Then />` component\n */\n\nvar Then = function Then(props) {\n  return render(props);\n};\n\n/**\n * Is included in the `<If />` component, rendered when the condition prop of `<If />` is a Promise;\n * Renders the Fallback component, if contains any, until provided promise is fulfilled;\n * Renders `<Then />` when promise is fulfilled, `<Else />` when rejected\n */\n\nfunction IfAsync(_ref) {\n  var promise = _ref.promise,\n      _ref$keepAlive = _ref.keepAlive,\n      keepAlive = _ref$keepAlive === void 0 ? false : _ref$keepAlive,\n      children = _ref.children;\n\n  var _useState = useState(null),\n      isResolved = _useState[0],\n      setIsResolved = _useState[1];\n\n  var _useState2 = useState(null),\n      returnValue = _useState2[0],\n      setReturnValue = _useState2[1]; // Make promise cancellable\n\n\n  var cancellablePromise = useMemo(function () {\n    return createCancellablePromise(promise);\n  }, [promise]);\n  var history = useRef([]); // Keep history of promises\n  // Handle unmount\n\n  useEffect(function () {\n    return function () {\n      if (!keepAlive) {\n        cancellablePromise.cancel();\n      }\n    };\n  }, [cancellablePromise, cancellablePromise.promise, keepAlive]); // Await promise\n\n  useSingleton( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/runtime_1.mark(function _callee() {\n    var data;\n    return runtime_1.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setIsResolved(null);\n            setReturnValue(null);\n            _context.prev = 2;\n            _context.next = 5;\n            return cancellablePromise.promise;\n\n          case 5:\n            data = _context.sent;\n            setReturnValue(data);\n            setIsResolved(true);\n            history.current.push(cancellablePromise);\n            _context.next = 16;\n            break;\n\n          case 11:\n            _context.prev = 11;\n            _context.t0 = _context[\"catch\"](2);\n            setReturnValue(_context.t0);\n            setIsResolved(false);\n            history.current.push(cancellablePromise);\n\n          case 16:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[2, 11]]);\n  })), [cancellablePromise.promise]);\n\n  if (!children || !isThenable(promise)) {\n    return null;\n  }\n\n  if (isResolved === null) {\n    // Promise is pending\n    var hasFallback = React.Children.toArray(children).find(function (c) {\n      return c.type === Fallback;\n    });\n    return React.createElement(Fragment, null, hasFallback || null);\n  }\n\n  if (!isResolved) {\n    // Promise is fulfilled and rejected\n    var hasElse = React.Children.toArray(children).find(function (c) {\n      return c.type === Else;\n    });\n    if (!hasElse) return React.createElement(Fragment, null, null); // Inject caught error\n\n    var elseElement = hasElse;\n\n    if (typeof hasElse.props.children === 'function') {\n      elseElement = _extends({}, hasElse, {\n        props: _extends({}, hasElse.props, {\n          children: function children() {\n            return hasElse.props.children(returnValue, history.current, cancellablePromise.promise);\n          }\n        })\n      });\n    }\n\n    return React.createElement(Fragment, null, elseElement);\n  } // Promise is fulfilled and resolved\n\n\n  var hasThen = React.Children.toArray(children).find(function (c) {\n    return c.type === Then;\n  });\n  if (!hasThen) return React.createElement(Fragment, null, null); // Inject promise return value\n\n  var thenElement = hasThen;\n\n  if (typeof hasThen.props.children === 'function') {\n    thenElement = _extends({}, hasThen, {\n      props: _extends({}, hasThen.props, {\n        children: function children() {\n          return hasThen.props.children(returnValue, history.current, cancellablePromise.promise);\n        }\n      })\n    });\n  }\n\n  return React.createElement(Fragment, null, thenElement);\n}\n\n/**\n * Handles errors by throwing them to the console.\n * `__DEV__` is replaced by tsdx using {@link https://www.npmjs.com/package/babel-plugin-dev-expression babel-plugin-dev-expressions}\n * which will ensure this entire throw is not present in production\n * @param condition The condition to check\n * @param message The message to throw if `condition` resolves to `true`\n */\nfunction tinyWarning(condition, message) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (condition) {\n      // check console for IE9 support which provides console\n      // only with open devtools\n      if (typeof console !== 'undefined') {\n        console.warn(message);\n      } // Throwing an error and catching it immediately to improve debugging\n      // Users can utilize 'pause on caught exceptions' to get into this throw\n\n\n      try {\n        throw new Error(message);\n      } catch (x) {// noop\n      }\n    }\n  }\n}\n\n/**\n * If condition evaluates to true, renders the `<Then />` block will be rendered,\n * otherwise renders the `<Else />` block. Either block may be omitted.\n *\n * This component can contain any number of `<Then />` or `<Else />` blocks,\n * but only the first block of the right type (either Then or Else, depending on the condition) will be rendered.\n * @param __namedParameters The props to pass down to the `<IF />` component, see {@link ComponentWithConditionProps}\n */\n\nvar If = function If(_ref) {\n  var condition = _ref.condition,\n      _ref$keepAlive = _ref.keepAlive,\n      keepAlive = _ref$keepAlive === void 0 ? false : _ref$keepAlive,\n      children = _ref.children;\n\n  if (!children) {\n    return null;\n  }\n\n  tinyWarning(!Array.isArray(children) && !(children.type === Else || children.type === Then) || !React.Children.toArray(children).every(function (child) {\n    return child.type === Else || child.type === Then || child.type === Fallback;\n  }), 'The <If> component should contain <Then /> <Else /> or <Fallback /> components as its children');\n\n  if (isThenable(condition)) {\n    return React.createElement(IfAsync, {\n      promise: condition,\n      keepAlive: keepAlive\n    }, children);\n  }\n\n  var conditionResult = getConditionResult(condition);\n  return React.createElement(Fragment, null, React.Children.toArray(children).find(function (c) {\n    return c.type !== Else !== !conditionResult;\n  }) || null);\n};\n\n/**\n * It will render the first matching `<Case />`, or the first encountered `<Default />` (or `null`).\n *\n * This component can contain any number of `<Case />` and one `<Default />` blocks\n * @param __namedParameters Children to pass into the `<Switch />` component\n */\n\nvar Switch = function Switch(_ref) {\n  var _ref2, _matchingCase;\n\n  var children = _ref.children;\n  // -- Inspired by react-router --\n  // We use React.Children.forEach instead of React.Children.toArray().find()\n  // here because toArray adds keys to all child elements and we do not want\n  // to trigger an unmount/remount for two children <Case>s or <Default>s\n  var matchingCase = undefined;\n  var defaultCase = undefined; // If the children are a function then resolve it first\n\n  if (isFunction(children)) {\n    children = children();\n  }\n\n  React.Children.forEach(children, function (child) {\n    // not a valid react child, don't add it\n\n    /* istanbul ignore next - This is only a safe fail for people writing bad code */\n    if (!React.isValidElement(child)) {\n      return;\n    }\n\n    if (!matchingCase && child.type === Case) {\n      var condition = child.props.condition;\n      var conditionResult = getConditionResult(condition);\n\n      if (conditionResult) {\n        matchingCase = child;\n      } // else not matching condition, don't add it\n\n    } else if (!defaultCase && child.type === Default) {\n      defaultCase = child;\n    } // else unknown type, don't add it\n\n  });\n  return (_ref2 = (_matchingCase = matchingCase) != null ? _matchingCase : defaultCase) != null ? _ref2 : null;\n};\n\n/** A shorthand for\n *\n * ```jsx\n * <If condition={...}>\n *     <Else>\n *         { ... }\n *     </Else>\n * </If>\n * ```\n *\n * The same rules apply to the child elements as with using the `<Else />` block.\n *\n * @param __namedParameters The props to pass down to the `<IF />` component, see {@link ComponentWithConditionProps}\n */\n\nvar Unless = function Unless(_ref) {\n  var condition = _ref.condition,\n      children = _ref.children;\n  var conditionResult = Boolean(getConditionResult(condition));\n  return !conditionResult && children ? render({\n    children: children\n  }) : null;\n};\nUnless.defaultProps = {\n  children: null\n};\n\n/** A shorthand for\n *\n * ```jsx\n * <If condition={...}>\n *     <Then>\n *         { ... }\n *     </Then>\n * </If>\n * ```\n *\n * The same rules apply to the child elements as with using the `<Then /`> block.\n *\n * @param __namedParameters The props to pass down to the `<IF />` component, see {@link ComponentWithConditionProps}\n */\n\nvar When = function When(_ref) {\n  var condition = _ref.condition,\n      children = _ref.children;\n  var conditionResult = Boolean(getConditionResult(condition));\n  return conditionResult && children ? render({\n    children: children\n  }) : null;\n};\nWhen.defaultProps = {\n  children: null\n};\n\nexport { Case, Default, Else, Fallback, If, Switch, Then, Unless, When };\n//# sourceMappingURL=react-if.esm.js.map\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { DataType, determineType } from '@essex/arquero';\nimport { memo, useCallback, useMemo } from 'react';\nimport { Case, Default, Switch } from 'react-if';\nimport { getValue, isEmpty } from '../util/index.js';\nimport { ArrayCell } from './ArrayCell.js';\nimport { BooleanTextCell, DateCell, EmptyCell, NumberCell, ObjectCell, TextCell } from './index.js';\n/**\r\n * Default rendering of cell contents.\r\n * Designed to look like a basic Excel-style sheet (e.g., right-align numbers by default).\r\n * But with no fancy/costly visualization\r\n */ export const DefaultCell = /*#__PURE__*/ memo(function DefaultCell(props) {\n    const { metadata , item , column , onColumnClick  } = props;\n    const value = getValue(item, column);\n    const type = metadata?.type ?? determineType(value);\n    const handleColumnClick = useCallback((ev)=>{\n        column && onColumnClick && onColumnClick(ev, column?.data?.selected ? undefined : column);\n    }, [\n        column,\n        onColumnClick\n    ]);\n    const cellStyle = useMemo(()=>{\n        const style = {\n            width: '100%'\n        };\n        if (onColumnClick) {\n            style.cursor = 'pointer';\n        }\n        if (column?.data?.selected) {\n            style.fontWeight = 'bold';\n        }\n        return style;\n    }, [\n        onColumnClick,\n        column\n    ]);\n    return /*#__PURE__*/ _jsx(\"div\", {\n        onClick: handleColumnClick,\n        style: cellStyle,\n        children: /*#__PURE__*/ _jsxs(Switch, {\n            children: [\n                /*#__PURE__*/ _jsx(Case, {\n                    condition: isEmpty(value),\n                    children: /*#__PURE__*/ _jsx(EmptyCell, {\n                        textAlign: type === DataType.Number ? 'right' : 'left'\n                    })\n                }),\n                /*#__PURE__*/ _jsx(Case, {\n                    condition: type === DataType.Boolean,\n                    children: /*#__PURE__*/ _jsx(BooleanTextCell, {\n                        ...props\n                    })\n                }),\n                /*#__PURE__*/ _jsx(Case, {\n                    condition: type === DataType.String,\n                    children: /*#__PURE__*/ _jsx(TextCell, {\n                        ...props\n                    })\n                }),\n                /*#__PURE__*/ _jsx(Case, {\n                    condition: type === DataType.Number,\n                    children: /*#__PURE__*/ _jsx(NumberCell, {\n                        ...props,\n                        numberFormat: ','\n                    })\n                }),\n                /*#__PURE__*/ _jsx(Case, {\n                    condition: type === DataType.Date,\n                    children: /*#__PURE__*/ _jsx(DateCell, {\n                        ...props\n                    })\n                }),\n                /*#__PURE__*/ _jsx(Case, {\n                    condition: type === DataType.Array,\n                    children: /*#__PURE__*/ _jsx(ArrayCell, {\n                        ...props\n                    })\n                }),\n                /*#__PURE__*/ _jsx(Default, {\n                    children: /*#__PURE__*/ _jsx(ObjectCell, {\n                        ...props\n                    })\n                })\n            ]\n        })\n    });\n});\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Icon } from '@fluentui/react';\nimport { useThematic } from '@thematic/react';\nimport { memo, useMemo } from 'react';\nimport { useCellDimensions } from '../hooks/index.js';\nconst COMPACT_LINE_HEIGHT = 2;\nexport const DefaultColumnHeader = /*#__PURE__*/ memo(function DefaultColumnHeader({ column , isClickable , onClick  }) {\n    const theme = useThematic();\n    const { isSorted , isSortedDescending , iconName , iconClassName  } = column;\n    const dimensions = useCellDimensions(column);\n    const containerStyle = useMemo(()=>({\n            lineHeight: column.data.compact ? COMPACT_LINE_HEIGHT : 'inherit',\n            cursor: isClickable ? 'pointer' : 'inherit',\n            display: 'flex',\n            justifyContent: 'space-between',\n            width: dimensions.width,\n            borderBottom: column.data?.selected ? `2px solid ${theme.application().accent().hex()}` : `2px solid transparent`\n        }), [\n        theme,\n        dimensions,\n        column,\n        isClickable\n    ]);\n    const textStyle = useMemo(()=>({\n            color: column.data?.selected ? theme.application().accent().hex() : theme.application().foreground().hex(),\n            width: '100%',\n            textAlign: 'center',\n            overflow: 'hidden',\n            whiteSpace: 'nowrap',\n            textOverflow: 'ellipsis'\n        }), [\n        theme,\n        column\n    ]);\n    const iconStyles = useMemo(()=>({\n            root: {\n                fontSize: 12,\n                color: theme.application().midHighContrast().hex()\n            }\n        }), [\n        theme\n    ]);\n    return /*#__PURE__*/ _jsxs(\"div\", {\n        onClick: (e)=>onClick && onClick(e, column),\n        style: containerStyle,\n        children: [\n            /*#__PURE__*/ _jsx(\"div\", {\n                style: textStyle,\n                title: column.name,\n                children: column.name\n            }),\n            iconName ? /*#__PURE__*/ _jsx(Icon, {\n                className: iconClassName,\n                iconName: iconName\n            }) : null,\n            isSorted ? /*#__PURE__*/ _jsx(Icon, {\n                iconName: isSortedDescending ? 'SortDown' : 'SortUp',\n                styles: iconStyles\n            }) : null\n        ]\n    });\n});\n","import { jsx as _jsx } from \"react/jsx-runtime\";\n/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { useThematic } from '@thematic/react';\nimport { memo, useMemo } from 'react';\n/**\r\n * Standard rendering of Empty values.\r\n */ export const EmptyCell = /*#__PURE__*/ memo(function EmptyCell({ textAlign ,  }) {\n    const theme = useThematic();\n    const style = useMemo(()=>({\n            width: '100%',\n            textAlign,\n            color: theme.application().lowContrast().hex()\n        }), [\n        theme,\n        textAlign\n    ]);\n    return /*#__PURE__*/ _jsx(\"div\", {\n        style: style,\n        children: \"\\u2014\"\n    });\n});\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { memo } from 'react';\nimport styled from 'styled-components';\nexport const CommandBarContainer = /*#__PURE__*/ memo(function CommandBarContainer({ props , renderers  }) {\n    return /*#__PURE__*/ _jsx(Container, {\n        className: \"header-command-bar\",\n        children: renderers.map((renderer, i)=>/*#__PURE__*/ _jsx(Command, {\n                children: renderer(props)\n            }, i))\n    });\n});\nconst Command = styled.div``;\nconst Container = styled.div`\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: center;\r\n\tborder-top: 1px solid ${({ theme  })=>theme.application().faint().hex()};\r\n\tborder-bottom: 1px solid ${({ theme  })=>theme.application().faint().hex()};\r\n`;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Dropdown } from '@fluentui/react';\nimport { memo } from 'react';\nimport { getDropdownValue } from '../util/index.js';\n/**\r\n * Renders an array-valued cell as a dropdown.\r\n */ export const ArrayDropdownCell = /*#__PURE__*/ memo(function ArrayDropdownCell({ item , column , onCellDropdownSelect , rowIndex  }) {\n    const values = getDropdownValue(item, rowIndex, column) || [];\n    const placeholderValues = values.slice(0, 10).map((value)=>value.text).join(', ') || 'Open to see the values';\n    return /*#__PURE__*/ _jsx(Dropdown, {\n        onChange: onCellDropdownSelect,\n        placeholder: placeholderValues,\n        options: values,\n        styles: dropdownStyles\n    });\n});\nconst dropdownStyles = {\n    root: {\n        width: '85%'\n    }\n};\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { DataType } from '@essex/arquero';\nimport isNil from 'lodash-es/isNil.js';\nimport { memo, useMemo } from 'react';\nimport { Case, Default, Switch } from 'react-if';\nimport { categories, getValue, isEmpty } from '../util/index.js';\nimport { ArrayDropdownCell } from './ArrayDropdownCell.js';\nimport { CellContainer } from './CellContainer.js';\nimport { EmptyCell } from './EmptyCell.js';\nimport { BooleanSymbolCell, CategoricalBarCell, DateCell, DefaultCell, NumberMagnitudeCell, SparkbarCell, SparklineCell, TextCell } from './index.js';\n/**\r\n * Chooses what to render based on the features prop\r\n */ export const FeaturesCell = /*#__PURE__*/ memo(function FeaturesCell(props) {\n    const { features , metadata , item , column , index , onColumnClick  } = props;\n    const type = metadata?.type;\n    const value = getValue(item, column);\n    const magnitude = useNumberMagnitude(value, metadata, type);\n    const histo = categories(value);\n    return /*#__PURE__*/ _jsx(CellContainer, {\n        onClick: onColumnClick,\n        column: column,\n        children: /*#__PURE__*/ _jsxs(Switch, {\n            children: [\n                /*#__PURE__*/ _jsx(Case, {\n                    condition: isEmpty(value),\n                    children: /*#__PURE__*/ _jsx(EmptyCell, {\n                        textAlign: type === DataType.Number ? 'right' : 'left'\n                    })\n                }),\n                /*#__PURE__*/ _jsx(Case, {\n                    condition: type === DataType.String,\n                    children: /*#__PURE__*/ _jsx(TextCell, {\n                        ...props\n                    })\n                }),\n                /*#__PURE__*/ _jsx(Case, {\n                    condition: features.showBooleanSymbol && type === DataType.Boolean,\n                    children: /*#__PURE__*/ _jsx(BooleanSymbolCell, {\n                        ...props\n                    })\n                }),\n                /*#__PURE__*/ _jsx(Case, {\n                    condition: features.showNumberMagnitude && type === DataType.Number,\n                    children: /*#__PURE__*/ _jsx(NumberMagnitudeCell, {\n                        ...props,\n                        magnitude: magnitude\n                    })\n                }),\n                /*#__PURE__*/ _jsx(Case, {\n                    condition: features.showDateFormatted && type === DataType.Date,\n                    children: /*#__PURE__*/ _jsx(DateCell, {\n                        ...props\n                    })\n                }),\n                /*#__PURE__*/ _jsx(Case, {\n                    condition: features.showCategoricalBar && type === DataType.Array,\n                    children: /*#__PURE__*/ _jsx(CategoricalBarCell, {\n                        ...props,\n                        categories: histo\n                    })\n                }),\n                /*#__PURE__*/ _jsx(Case, {\n                    condition: features.showSparkbar && type === DataType.Array && histo && histo['length' ?? 0],\n                    children: /*#__PURE__*/ _jsx(SparkbarCell, {\n                        ...props\n                    })\n                }),\n                /*#__PURE__*/ _jsx(Case, {\n                    condition: features.showDropdown && type === DataType.Array,\n                    children: /*#__PURE__*/ _jsx(ArrayDropdownCell, {\n                        rowIndex: index || 0,\n                        ...props\n                    })\n                }),\n                /*#__PURE__*/ _jsx(Case, {\n                    condition: features.showSparkline && type === DataType.Array,\n                    children: /*#__PURE__*/ _jsx(SparklineCell, {\n                        ...props\n                    })\n                }),\n                /*#__PURE__*/ _jsx(Default, {\n                    children: /*#__PURE__*/ _jsx(DefaultCell, {\n                        ...props\n                    })\n                })\n            ]\n        })\n    });\n});\nfunction useNumberMagnitude(value, meta, type) {\n    return useMemo(()=>{\n        if (type !== DataType.Number || isNil(value)) {\n            return 0;\n        }\n        const range = (meta?.stats?.max || 1) - (meta?.stats?.min || 0);\n        const mag = (value - (meta?.stats?.min || 0)) / range;\n        return mag;\n    }, [\n        type,\n        value,\n        meta\n    ]);\n}\n","import { jsx as _jsx, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { formatIfNumber } from '@essex/arquero';\nimport { Sparkbar } from '@essex/charts-react';\nimport { TooltipHost } from '@fluentui/react';\nimport { memo, useCallback, useMemo, useState } from 'react';\nimport { useCellDimensions } from '../hooks/index.js';\nconst PADDING_HEIGHT = 8;\n/**\r\n * Renders a histogram for column values in the header.\r\n * For numbers it will use the bin partitioning.\r\n * For strings it will be the unique counts (if categories exist).\r\n */ export const HistogramColumnHeader = /*#__PURE__*/ memo(function HistogramColumnHeader({ metadata , color , ...props }) {\n    const { column , onClick  } = props;\n    const dimensions = useCellDimensions(column, false);\n    const categorical = metadata.type === 'string';\n    const bins = categorical ? metadata.stats?.categories : metadata.stats?.bins;\n    const values = useMemo(()=>(bins || []).map((b)=>b.count), [\n        bins\n    ]);\n    const categories = useCategories(metadata.stats, categorical);\n    const title = useTooltip(categories);\n    const legend = useLegend(categories);\n    const [hover, setHover] = useState();\n    const [id1, setId] = useState();\n    const handleBarHover = useCallback((e)=>{\n        const { target , type  } = e;\n        const index = target.dataset.index;\n        const id = target.id;\n        if (type === 'mouseover' && index >= 0) {\n            setHover(legend[index] || '');\n            setId(id);\n        } else {\n            setHover(undefined);\n            setId(undefined);\n        }\n    }, [\n        legend,\n        setHover,\n        setId\n    ]);\n    const styles = useMemo(()=>{\n        return {\n            height: dimensions.height + PADDING_HEIGHT,\n            cursor: onClick ? 'pointer' : 'inherit'\n        };\n    }, [\n        onClick,\n        dimensions\n    ]);\n    // don't render a single bar\n    if (metadata.stats?.distinct === 1) {\n        return null;\n    }\n    return /*#__PURE__*/ _jsx(_Fragment, {\n        children: bins ? /*#__PURE__*/ _jsx(\"div\", {\n            onClick: (e)=>onClick && bins && onClick(e, column, metadata),\n            title: title,\n            style: styles,\n            children: /*#__PURE__*/ _jsx(TooltipHost, {\n                content: hover,\n                id: id1,\n                calloutProps: {\n                    gapSpace: 5,\n                    target: `#${id1}`\n                },\n                children: /*#__PURE__*/ _jsx(Sparkbar, {\n                    categorical: categorical,\n                    data: values,\n                    width: dimensions.width - 1,\n                    height: dimensions.height,\n                    color: color,\n                    legend: legend,\n                    onBarHover: handleBarHover\n                })\n            })\n        }) : null\n    });\n});\nfunction useCategories(stats, categorical) {\n    return useMemo(()=>{\n        if (categorical) {\n            return stats?.categories || [];\n        }\n        return (stats?.bins || []).map((b)=>({\n                name: `${b.min}`,\n                count: b.count\n            }));\n    }, [\n        stats,\n        categorical\n    ]);\n}\nfunction useTooltip(categories) {\n    return useMemo(()=>{\n        return categories.reduce((acc, cur, idx)=>{\n            const { name , count  } = cur;\n            return acc + (idx > 0 ? '\\n' : '') + `${formatIfNumber(name)}: ${count}`;\n        }, '');\n    }, [\n        categories\n    ]);\n}\nfunction useLegend(categories) {\n    return useMemo(()=>{\n        return categories.map((cat)=>`${formatIfNumber(cat.name)}: ${cat.count}`);\n    }, [\n        categories\n    ]);\n}\n","import { jsx as _jsx, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { CommandBarContainer } from './CommandBarContainer.js';\nimport { DefaultColumnHeader } from './DefaultColumnHeader.js';\nimport { FeaturesCell } from './FeaturesCell.js';\nimport { HistogramColumnHeader } from './HistogramColumnHeader.js';\nimport { SmartCell, StatsColumnHeader } from './index.js';\nexport const createRenderSmartCell = (metadata, color, onColumnClick, onCellDropdownSelect)=>function renderSmartCell(item, index, column) {\n        return /*#__PURE__*/ _jsx(SmartCell, {\n            item: item,\n            index: index,\n            column: column,\n            metadata: metadata,\n            color: color,\n            onColumnClick: onColumnClick,\n            onCellDropdownSelect: onCellDropdownSelect\n        });\n    };\nexport const createRenderFeaturesCell = (features, metadata, color, onColumnClick, onCellDropdownSelect)=>function renderDropdownCell(item, index, column) {\n        return /*#__PURE__*/ _jsx(FeaturesCell, {\n            index: index || 0,\n            item: item,\n            column: column,\n            onCellDropdownSelect: onCellDropdownSelect,\n            onColumnClick: onColumnClick,\n            metadata: metadata,\n            color: color,\n            features: features\n        });\n    };\nexport const createRenderColumnHeader = (renderers)=>function renderColumnHeader(props, defaultRender) {\n        if (!props || !defaultRender) {\n            return null;\n        }\n        return /*#__PURE__*/ _jsx(_Fragment, {\n            children: renderers.map((r, i)=>r({\n                    key: `renderer-${props.column.key}${i}`,\n                    ...props\n                }, defaultRender))\n        });\n    };\n/**\r\n * Establish our own default rendering for column headers.\r\n * This gives us full control over the layout so we can cleanly\r\n * handle the default while also stacking in advanced render features.\r\n * @returns\r\n */ export const createRenderDefaultColumnHeader = (originalProps, isClickable, handleColumnHeaderClick)=>function renderDefaultColumnHeader(props, defaultRender) {\n        if (!props || !defaultRender) {\n            return null;\n        }\n        const p = fixProps(originalProps, props);\n        return /*#__PURE__*/ _jsx(DefaultColumnHeader, {\n            ...p,\n            isClickable: isClickable,\n            onClick: handleColumnHeaderClick\n        });\n    };\nexport const createRenderStatsColumnHeader = (metadata, onClick, stats)=>{\n    return function renderStatsColumnHeader(props, defaultRender) {\n        if (!props || !defaultRender) {\n            return null;\n        }\n        return /*#__PURE__*/ _jsx(StatsColumnHeader, {\n            onClick: onClick,\n            metadata: metadata,\n            stats: stats,\n            ...props\n        });\n    };\n};\nexport const createRenderCommandBarColumnHeader = (renderers)=>{\n    return function renderCommandBarColumnHeader(props, defaultRender) {\n        if (!props || !defaultRender) {\n            return null;\n        }\n        return /*#__PURE__*/ _jsx(CommandBarContainer, {\n            props: props,\n            renderers: renderers\n        }, props.key);\n    };\n};\nexport const createRenderHistogramColumnHeader = (metadata, color, onClick)=>{\n    return function renderHistogramColumnHeader(props, defaultRender) {\n        if (!props || !defaultRender) {\n            return null;\n        }\n        return /*#__PURE__*/ _jsx(HistogramColumnHeader, {\n            onClick: onClick,\n            metadata: metadata,\n            color: color,\n            ...props\n        });\n    };\n};\nfunction fixProps(original, updated) {\n    const iconName = original?.iconName;\n    if (iconName) {\n        return {\n            ...updated,\n            column: {\n                ...updated.column,\n                iconName\n            }\n        };\n    }\n    return updated;\n}\n","import { jsx as _jsx } from \"react/jsx-runtime\";\n/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { memo } from 'react';\nimport { useFormattedNumber } from '../hooks/index.js';\nimport { getValue } from '../util/index.js';\n/**\r\n * Basic endering of number values.\r\n */ export const NumberCell = /*#__PURE__*/ memo(function NumberCell({ item , column , textAlign ='right' , numberFormat  }) {\n    const value = getValue(item, column);\n    const printed = useFormattedNumber(value, numberFormat);\n    return /*#__PURE__*/ _jsx(\"div\", {\n        style: {\n            textAlign\n        },\n        children: printed\n    });\n});\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { useThematic } from '@thematic/react';\nimport { memo, useMemo } from 'react';\nimport { useCellDimensions, useFormattedNumber } from '../hooks/index.js';\nimport { getValue } from '../util/index.js';\n/**\r\n * Basic endering of number values.\r\n */ export const NumberMagnitudeCell = /*#__PURE__*/ memo(function NumberMagnitudeCell({ item , column , textAlign ='right' , numberFormat , color , magnitude =0 ,  }) {\n    const theme = useThematic();\n    const barColor = useMemo(()=>color || theme.rect().fill().hex(), [\n        theme,\n        color\n    ]);\n    const value = getValue(item, column);\n    const printed = useFormattedNumber(value, numberFormat);\n    const dimensions = useCellDimensions(column);\n    const { width , height  } = dimensions;\n    const textFill = useMemo(()=>theme.text().fill().hex(), [\n        theme\n    ]);\n    const size = magnitude * width;\n    return /*#__PURE__*/ _jsx(\"div\", {\n        style: {\n            textAlign\n        },\n        children: /*#__PURE__*/ _jsxs(\"svg\", {\n            width: width,\n            height: height,\n            children: [\n                /*#__PURE__*/ _jsx(\"rect\", {\n                    width: size,\n                    height: height,\n                    x: width - size,\n                    fill: barColor\n                }),\n                /*#__PURE__*/ _jsx(\"text\", {\n                    fill: textFill,\n                    y: height / 2 + 1,\n                    x: width - 2,\n                    dominantBaseline: 'middle',\n                    textAnchor: 'end',\n                    children: printed\n                })\n            ]\n        })\n    });\n});\n","import { jsx as _jsx } from \"react/jsx-runtime\";\n/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { memo } from 'react';\nimport { getValue } from '../util/index.js';\n/**\r\n * Basic rendering of objects.\r\n */ export const ObjectCell = /*#__PURE__*/ memo(function ObjectCell({ item , column , textAlign ='left'  }) {\n    const value = getValue(item, column) || {};\n    return /*#__PURE__*/ _jsx(\"div\", {\n        style: {\n            textAlign\n        },\n        children: value.toString()\n    });\n});\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { memo } from 'react';\nimport { Case, Default, Switch } from 'react-if';\nimport { categories, getValue, isDistinctCategories } from '../util/index.js';\nimport { ArrayCell } from './ArrayCell.js';\nimport { ArrayDropdownCell } from './ArrayDropdownCell.js';\nimport { CategoricalBarCell, SparkbarCell, SparklineCell } from './index.js';\nconst HISTO_MAX = 20;\nconst DROPDOWN_MAX = 15;\n/**\r\n * Chooses what sort of array display would be best.\r\n */ export const SmartArrayCell = /*#__PURE__*/ memo(function SmartArrayCell(props) {\n    const { item , column , index  } = props;\n    const values = getValue(item, column) || [];\n    const cellWidth = column?.currentWidth || 0;\n    const histo = categories(values);\n    const histoLength = Object.keys(histo).length;\n    const dist = isDistinctCategories(histo);\n    return /*#__PURE__*/ _jsxs(Switch, {\n        children: [\n            /*#__PURE__*/ _jsx(Case, {\n                condition: values.length <= 3,\n                children: /*#__PURE__*/ _jsx(ArrayCell, {\n                    ...props\n                })\n            }),\n            /*#__PURE__*/ _jsx(Case, {\n                condition: values.length <= DROPDOWN_MAX,\n                children: /*#__PURE__*/ _jsx(ArrayDropdownCell, {\n                    rowIndex: index || 0,\n                    ...props\n                })\n            }),\n            /*#__PURE__*/ _jsx(Case, {\n                condition: histoLength <= HISTO_MAX && !dist,\n                children: /*#__PURE__*/ _jsx(CategoricalBarCell, {\n                    ...props,\n                    categories: histo\n                })\n            }),\n            /*#__PURE__*/ _jsx(Case, {\n                condition: values.length <= cellWidth,\n                children: /*#__PURE__*/ _jsx(SparkbarCell, {\n                    ...props\n                })\n            }),\n            /*#__PURE__*/ _jsx(Case, {\n                condition: values.length > cellWidth,\n                children: /*#__PURE__*/ _jsx(SparklineCell, {\n                    ...props\n                })\n            }),\n            /*#__PURE__*/ _jsx(Default, {\n                children: /*#__PURE__*/ _jsx(ArrayCell, {\n                    ...props\n                })\n            })\n        ]\n    });\n});\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { DataType } from '@essex/arquero';\nimport isNil from 'lodash-es/isNil.js';\nimport { memo, useMemo } from 'react';\nimport { Case, Default, Switch } from 'react-if';\nimport { getValue, isEmpty } from '../util/index.js';\nimport { CellContainer } from './CellContainer.js';\nimport { EmptyCell } from './EmptyCell.js';\nimport { BooleanSymbolCell, DateCell, NumberMagnitudeCell, ObjectCell, SmartArrayCell, TextCell } from './index.js';\n/**\r\n * Chooses what to render based on data type.\r\n */ export const SmartCell = /*#__PURE__*/ memo(function SmartCell(props) {\n    const { metadata , item , column , onColumnClick  } = props;\n    const type = metadata?.type;\n    const value = getValue(item, column);\n    const magnitude = useNumberMagnitude(value, metadata, type);\n    return /*#__PURE__*/ _jsx(CellContainer, {\n        onClick: onColumnClick,\n        column: column,\n        children: /*#__PURE__*/ _jsxs(Switch, {\n            children: [\n                /*#__PURE__*/ _jsx(Case, {\n                    condition: isEmpty(value),\n                    children: /*#__PURE__*/ _jsx(EmptyCell, {\n                        textAlign: type === DataType.Number ? 'right' : 'left'\n                    })\n                }),\n                /*#__PURE__*/ _jsx(Case, {\n                    condition: type === DataType.String,\n                    children: /*#__PURE__*/ _jsx(TextCell, {\n                        ...props\n                    })\n                }),\n                /*#__PURE__*/ _jsx(Case, {\n                    condition: type === DataType.Boolean,\n                    children: /*#__PURE__*/ _jsx(BooleanSymbolCell, {\n                        ...props\n                    })\n                }),\n                /*#__PURE__*/ _jsx(Case, {\n                    condition: type === DataType.Number,\n                    children: /*#__PURE__*/ _jsx(NumberMagnitudeCell, {\n                        ...props,\n                        magnitude: magnitude\n                    })\n                }),\n                /*#__PURE__*/ _jsx(Case, {\n                    condition: type === DataType.Date,\n                    children: /*#__PURE__*/ _jsx(DateCell, {\n                        ...props\n                    })\n                }),\n                /*#__PURE__*/ _jsx(Case, {\n                    condition: type === DataType.Array,\n                    children: /*#__PURE__*/ _jsx(SmartArrayCell, {\n                        ...props\n                    })\n                }),\n                /*#__PURE__*/ _jsx(Default, {\n                    children: /*#__PURE__*/ _jsx(ObjectCell, {\n                        ...props\n                    })\n                })\n            ]\n        })\n    });\n});\nfunction useNumberMagnitude(value, meta, type) {\n    return useMemo(()=>{\n        if (type !== DataType.Number || isNil(value)) {\n            return 0;\n        }\n        const range = (meta?.stats?.max || 1) - (meta?.stats?.min || 0);\n        const mag = range === 0 ? 0 : (value - (meta?.stats?.min || 0)) / range;\n        return mag;\n    }, [\n        type,\n        value,\n        meta\n    ]);\n}\n","import { jsx as _jsx } from \"react/jsx-runtime\";\n/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { Sparkbar } from '@essex/charts-react';\nimport { memo } from 'react';\nimport { useCellDimensions } from '../hooks/index.js';\nimport { getValue } from '../util/index.js';\n/**\r\n * Renders an array-valued cell as a Sparkbar.\r\n */ export const SparkbarCell = /*#__PURE__*/ memo(function SparkbarCell({ item , column  }) {\n    const values = getValue(item, column) || [];\n    const dimensions = useCellDimensions(column);\n    return /*#__PURE__*/ _jsx(Sparkbar, {\n        data: values,\n        width: dimensions.width,\n        height: dimensions.height\n    });\n});\n","import { jsx as _jsx } from \"react/jsx-runtime\";\n/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { Sparkline } from '@essex/charts-react';\nimport { memo } from 'react';\nimport { useCellDimensions } from '../hooks/index.js';\nimport { getValue } from '../util/index.js';\n/**\r\n * Renders an array-valued cell as a sparkline.\r\n */ export const SparklineCell = /*#__PURE__*/ memo(function SparklineCell({ item , column , color  }) {\n    const values = getValue(item, column) || [];\n    const dimensions = useCellDimensions(column);\n    return /*#__PURE__*/ _jsx(Sparkline, {\n        data: values,\n        width: dimensions.width,\n        height: dimensions.height,\n        color: color\n    });\n});\n","export var StatsColumnType;\n(function(StatsColumnType) {\n    StatsColumnType[\"Type\"] = 'type';\n    StatsColumnType[\"Count\"] = 'count';\n    StatsColumnType[\"Distinct\"] = 'distinct';\n    StatsColumnType[\"Invalid\"] = 'invalid';\n    StatsColumnType[\"Mode\"] = 'mode';\n    StatsColumnType[\"Min\"] = 'min';\n    StatsColumnType[\"Max\"] = 'max';\n    StatsColumnType[\"Mean\"] = 'mean';\n    StatsColumnType[\"Median\"] = 'median';\n    StatsColumnType[\"Stdev\"] = 'stdev';\n})(StatsColumnType || (StatsColumnType = {}));\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { formatIfNumber } from '@essex/arquero';\nimport { useThematic } from '@thematic/react';\nimport upperFirst from 'lodash-es/upperFirst.js';\nimport { memo, useMemo } from 'react';\nimport { StatsColumnType } from '../types.js';\nconst pretty = {\n    distinct: 'unique',\n    invalid: 'empty'\n};\nconst CELL_HEIGHT = 14;\nconst DEFAULT_STATS = [\n    StatsColumnType.Min,\n    StatsColumnType.Max,\n    StatsColumnType.Distinct,\n    StatsColumnType.Invalid, \n];\n/**\r\n * Renders a column header with basic stats.\r\n * The list of stats is configurable, but we aren't exposing that in the table yet.\r\n * Note that the size is fixed to accommodate only four, so we would need a dynamic header size.\r\n */ export const StatsColumnHeader = /*#__PURE__*/ memo(function StatsColumnHeader({ metadata , stats =DEFAULT_STATS , column , onClick ,  }) {\n    const theme = useThematic();\n    const cells = useMemo(()=>{\n        const st = metadata.stats || {};\n        return stats.map((stat)=>{\n            const value = st[stat];\n            return /*#__PURE__*/ _jsx(StatCell, {\n                name: stat,\n                value: value\n            }, `${column.key}-${stat}`);\n        });\n    }, [\n        metadata,\n        column,\n        stats\n    ]);\n    const title = useTooltip(metadata.stats);\n    const styles = useMemo(()=>{\n        return {\n            height: stats.length * CELL_HEIGHT,\n            fontWeight: 'normal',\n            fontSize: 10,\n            color: theme.application().midHighContrast().hex(),\n            cursor: onClick ? 'pointer' : 'inherit'\n        };\n    }, [\n        onClick,\n        theme,\n        stats\n    ]);\n    return /*#__PURE__*/ _jsx(\"div\", {\n        onClick: (e)=>onClick && onClick(e, column, metadata),\n        title: title,\n        style: styles,\n        children: cells\n    });\n});\nconst StatCell = ({ name , value ,  })=>{\n    return value !== undefined ? /*#__PURE__*/ _jsxs(\"div\", {\n        style: {\n            height: CELL_HEIGHT,\n            display: 'flex',\n            justifyContent: 'space-between',\n            paddingLeft: 4,\n            paddingRight: 4,\n            lineHeight: 1\n        },\n        children: [\n            /*#__PURE__*/ _jsxs(\"div\", {\n                style: {\n                    textTransform: 'capitalize'\n                },\n                children: [\n                    pretty[name] || name,\n                    \":\"\n                ]\n            }),\n            /*#__PURE__*/ _jsx(\"div\", {\n                style: {\n                    maxWidth: '100%',\n                    overflow: 'hidden',\n                    whiteSpace: 'nowrap',\n                    textOverflow: 'ellipsis'\n                },\n                children: formatIfNumber(value)\n            })\n        ]\n    }) : null;\n};\nfunction useTooltip(stats) {\n    return useMemo(()=>{\n        const { bins , categories , ...nobins } = stats || {};\n        return Object.entries(nobins).reduce((acc, cur, idx)=>{\n            const [key, value] = cur;\n            const nice = upperFirst(pretty[key] || key);\n            return acc + (idx > 0 ? '\\n' : '') + `${nice}: ${formatIfNumber(value)}`;\n        }, '');\n    }, [\n        stats\n    ]);\n}\n","import { jsx as _jsx } from \"react/jsx-runtime\";\n/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { DetailsRow } from '@fluentui/react';\nimport { useThematic } from '@thematic/react';\nimport { memo, useMemo } from 'react';\n/**\r\n * Render a striped DetailsRow\r\n */ export const StripedRow = /*#__PURE__*/ memo(function StripedRow({ striped , columnBorders , styles , ...props }) {\n    const theme = useThematic();\n    const { itemIndex , compact  } = props;\n    const customStyles = useMemo(()=>{\n        if (striped && itemIndex % 2 === 0) {\n            return {\n                root: {\n                    width: '100%',\n                    background: theme.application().faint().hex()\n                },\n                cell: {\n                    borderRight: columnBorders ? `1px solid ${theme.application().background().hex(0.5)}` : `1px solid transparent`,\n                    padding: 'unset'\n                },\n                ...styles\n            };\n        }\n        return {\n            root: {\n                width: '100%',\n                borderBottom: `1px solid ${theme.application().faint().hex()}`\n            },\n            cell: {\n                padding: 'unset',\n                borderRight: columnBorders ? `1px solid ${theme.application().faint().hex(0.5)}` : `1px solid transparent`,\n                borderTop: itemIndex === 0 ? `1px solid ${theme.application().faint().hex()}` : 'none',\n                borderBottom: compact ? `1px solid ${theme.application().faint().hex()}` : 'none'\n            },\n            ...styles\n        };\n    }, [\n        theme,\n        striped,\n        columnBorders,\n        styles,\n        itemIndex,\n        compact\n    ]);\n    return /*#__PURE__*/ _jsx(DetailsRow, {\n        ...props,\n        styles: customStyles\n    });\n});\n","import { jsx as _jsx } from \"react/jsx-runtime\";\n/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { memo } from 'react';\nimport { getValue } from '../util/index.js';\n/**\r\n * Basic rendering of text values.\r\n */ export const TextCell = /*#__PURE__*/ memo(function TextCell({ item , column , textAlign ='left' ,  }) {\n    const value = getValue(item, column);\n    return /*#__PURE__*/ _jsx(\"div\", {\n        style: {\n            textAlign\n        },\n        children: value.toString()\n    });\n});\n","import { useMemo } from 'react';\nconst DEFAULT_COLUMN_WIDTH = 100;\nconst DEFAULT_COMMAND_BAR_WIDTH = 40;\nconst DEFAULT_COMMAND_BAR_THRESHOLD = 10;\nexport function useCountMinWidth(commandBar) {\n    return useMemo(()=>{\n        const elementsWidth = Math.max(...commandBar?.map((command)=>+command()?.props.styles.root.width) || [\n            0, \n        ]);\n        const buttonsWidth = Math.max(...commandBar?.map((command)=>command()?.props.items.length) || [\n            0\n        ]) * DEFAULT_COMMAND_BAR_WIDTH;\n        const totalWidth = Math.max(buttonsWidth, elementsWidth);\n        const minCommandBar = Math.max(DEFAULT_COLUMN_WIDTH, totalWidth + DEFAULT_COMMAND_BAR_THRESHOLD);\n        return minCommandBar;\n    }, [\n        commandBar\n    ]);\n}\n","import { DataType } from '@essex/arquero';\nimport { useMemo } from 'react';\nimport { createRenderColumnHeader, createRenderCommandBarColumnHeader, createRenderDefaultColumnHeader, createRenderFeaturesCell, createRenderHistogramColumnHeader, createRenderSmartCell, createRenderStatsColumnHeader } from '../renderers/index.js';\nimport { useCellClickhandler, useCellDropdownSelectHandler, useColumnNamesList, useColumnStyles, useIncrementingColumnColorScale } from './index.js';\nimport { useCountMinWidth } from './useCountMinWidth.js';\n/**\r\n * Overlays a number of special features onto the IColumn objects for a table.\r\n * This includes overridden renderers to support our sorting, selection, and data visualization.\r\n * @param table -\r\n * @param columns -\r\n * @param options -\r\n * @returns\r\n */ export function useColumns(table, computedMetadata, columns, visibleColumns, handleColumnHeaderClick, options = {}) {\n    const { features ={} , sortColumn , sortDirection , selectedColumn , onColumnClick , onCellDropdownSelect , includeAllColumns =false , isColumnClickable =false , isDefaultHeaderClickable =false , showColumnBorders =false , compact =false , isResizable =true ,  } = options;\n    const handleCellClick = useCellClickhandler(isColumnClickable, onColumnClick);\n    const handleCellDropdownSelect = useCellDropdownSelectHandler(isColumnClickable, onCellDropdownSelect);\n    const colorScale = useIncrementingColumnColorScale(computedMetadata);\n    const styles = useColumnStyles(isColumnClickable, showColumnBorders);\n    const names = useColumnNamesList(table, columns, includeAllColumns, visibleColumns);\n    //get column width based on min value or on commandBar item passed\n    const columnMinWidth = useCountMinWidth(features.commandBar);\n    return useMemo(()=>{\n        const columnMap = reduce(columns);\n        return names.map((name)=>{\n            const column = columnMap[name] || {\n                key: name,\n                name,\n                minWidth: columnMinWidth,\n                fieldName: name\n            };\n            // HACK: if we let an iconName through, the rendering messes with our layout.\n            // In order to control this we'll pass the original props to the generators,\n            // but omit from what gets sent to the top-level table.\n            // As far as I can tell there's no other way to force the table to let us control this icon rendering\n            // without completely recreating the details header render\n            const { iconName , ...defaults } = column;\n            const meta = computedMetadata?.columns[name];\n            const color = meta && meta.type === DataType.Number ? colorScale() : undefined;\n            const onRender = features.smartCells && meta ? createRenderSmartCell(meta, color, handleCellClick, handleCellDropdownSelect) : createRenderFeaturesCell(features, meta, color, handleCellClick, handleCellDropdownSelect);\n            const headerRenderers = [\n                createRenderDefaultColumnHeader(column, isDefaultHeaderClickable, handleColumnHeaderClick), \n            ];\n            if (features.commandBar) {\n                headerRenderers.push(createRenderCommandBarColumnHeader(features.commandBar));\n            }\n            if ((features.smartHeaders || features.statsColumnHeaders) && meta) {\n                headerRenderers.push(createRenderStatsColumnHeader(meta, features.onStatsColumnHeaderClick, features.statsColumnTypes));\n            }\n            if ((features.smartHeaders || features.histogramColumnHeaders) && meta) {\n                headerRenderers.push(createRenderHistogramColumnHeader(meta, color, features.onHistogramColumnHeaderClick));\n            }\n            return {\n                onRender,\n                onRenderHeader: createRenderColumnHeader(headerRenderers),\n                onColumnClick,\n                isSorted: !!sortDirection && column.fieldName === sortColumn ? true : false,\n                isSortedDescending: sortDirection === 'desc',\n                styles,\n                ...defaults,\n                data: {\n                    selected: column.key === selectedColumn,\n                    compact,\n                    ...column.data\n                },\n                isResizable\n            };\n        });\n    }, [\n        columns,\n        names,\n        features,\n        sortColumn,\n        sortDirection,\n        selectedColumn,\n        onColumnClick,\n        handleCellClick,\n        styles,\n        compact,\n        isResizable,\n        computedMetadata,\n        colorScale,\n        handleCellDropdownSelect,\n        isDefaultHeaderClickable,\n        handleColumnHeaderClick,\n        columnMinWidth, \n    ]);\n}\nfunction reduce(columns) {\n    return (columns || []).reduce((acc, cur)=>{\n        acc[cur.name] = cur;\n        return acc;\n    }, {});\n}\n","import { useThematic } from '@thematic/react';\nimport { useMemo } from 'react';\nexport function useColumnStyles(clickable, separator) {\n    const theme = useThematic();\n    return useMemo(()=>({\n            // we add our own sort icon in the DefaultColumnHeader component\n            // this is because the onRenderHeader column function only\n            // affects an inner div, which can be compressed when sorting is present\n            // we therefore render it ourselves so we can control the layout completely.\n            sortIcon: {\n                display: 'none'\n            },\n            cursor: clickable ? 'pointer' : 'inherit',\n            cellTitle: {\n                borderRight: separator ? `1px solid ${theme.application().faint().hex(0.6)}` : '1px solid transparent'\n            },\n            cellTooltip: {\n                display: 'initial',\n                position: 'relative'\n            }\n        }), [\n        theme,\n        clickable,\n        separator\n    ]);\n}\n","import { useCallback } from 'react';\n/**\r\n * Overrides the default details header rendering so we can inject customization\r\n * @returns\r\n */ export function useDetailsHeaderRenderer() {\n    return useCallback((props, defaultRender)=>{\n        if (!props || !defaultRender) {\n            return null;\n        }\n        const updated = {\n            styles: {\n                root: {\n                    // removes the excessive header padding and matches the bottom padding\n                    paddingTop: 1\n                },\n                cellSizer: {\n                    height: '1.5rem'\n                }\n            },\n            ...props\n        };\n        return defaultRender(updated);\n    }, []);\n}\n","import { useThematic } from '@thematic/react';\nimport merge from 'lodash-es/merge.js';\nimport { useMemo } from 'react';\n/**\r\n * Create a DetailsHeader style with enough height to handle the options we've turned on.\r\n * Each one requires a small amount of vertical space that stacks up.\r\n * @param options -\r\n * @returns\r\n */ export function useDetailsListStyles(isHeadersFixed, features, styles, hasColumnClick, compact) {\n    const theme = useThematic();\n    const isFeatureEnabled = useMemo(()=>{\n        return features?.smartHeaders || features?.histogramColumnHeaders || features?.statsColumnHeaders;\n    }, [\n        features\n    ]);\n    return useMemo(()=>merge({}, {\n            headerWrapper: {\n                position: isHeadersFixed ? 'sticky' : 'inherit',\n                zIndex: '2',\n                top: '0',\n                background: theme.application().background().hex(),\n                borderBottom: !isFeatureEnabled ? `1px solid ${theme.application().faint().hex()}` : 'unset',\n                selectors: {\n                    '.ms-DetailsHeader': {\n                        lineHeight: compact && !isFeatureEnabled ? 'normal' : '42px',\n                        height: 'auto',\n                        borderBottom: !isFeatureEnabled ? `1px solid ${theme.application().faint().hex()}` : 'unset'\n                    },\n                    '.ms-DetailsHeader-cell': {\n                        cursor: hasColumnClick ? 'pointer' : 'default',\n                        height: 'auto',\n                        padding: 'unset'\n                    }\n                }\n            }\n        }, styles), [\n        theme,\n        isFeatureEnabled,\n        styles,\n        isHeadersFixed,\n        hasColumnClick,\n        compact\n    ]);\n}\n","import { format } from 'd3-format';\nimport isNil from 'lodash-es/isNil.js';\nexport function sliceTable(table, offset, limit) {\n    if (offset === 0 && limit === Infinity) {\n        return table;\n    }\n    return table.slice(offset, offset + limit);\n}\nexport function formatNumber(value, formatter) {\n    if (isNil(value)) {\n        return '';\n    }\n    if (formatter) {\n        const f = format(formatter);\n        return f(value);\n    }\n    return value.toString();\n}\n","/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { useMemo } from 'react';\nimport { formatNumber } from '../../common/functions.js';\nexport function useFormattedNumber(value, formatter) {\n    return useMemo(()=>formatNumber(value, formatter), [\n        value,\n        formatter\n    ]);\n}\n","/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { useEffect, useState } from 'react';\nexport function useIntersection(element, rootMargin) {\n    const [isVisible, setState] = useState(false);\n    useEffect(()=>{\n        const observer = new IntersectionObserver(([entry])=>{\n            setState(entry?.isIntersecting ?? false);\n        }, {\n            rootMargin\n        });\n        element && observer.observe(element);\n        return ()=>element && observer.unobserve(element);\n    }, [\n        element,\n        rootMargin\n    ]);\n    return isVisible;\n}\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { IconButton } from '@fluentui/react';\nimport { memo, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { Else, If, Then } from 'react-if';\nimport styled from 'styled-components';\nimport { useIntersection } from './GroupHeader.hooks.js';\nexport const GroupHeader = /*#__PURE__*/ memo(function GroupHeader({ columnName , props , children: children1 , lazyLoadGroups  }) {\n    const { group , onToggleCollapse  } = props;\n    const ref = useRef();\n    // whether the element toggle is manual or by visibility on scroll\n    const [manualToggle, setManualToggle] = useState(false);\n    // trigger as soon as the element becomes visible\n    const inViewport = useIntersection(ref.current, '0px');\n    const countChildren = useCallback((children)=>{\n        let total = 0;\n        children.forEach((child)=>{\n            total += child.count;\n            total += child.children ? countChildren(child.children) : 0;\n        });\n        return total;\n    }, []);\n    useEffect(()=>{\n        if (inViewport && group?.isCollapsed && onToggleCollapse) {\n            onToggleCollapse(group);\n        }\n    }, [\n        inViewport,\n        group,\n        onToggleCollapse\n    ]);\n    const onManualLevelToggle = useCallback(()=>{\n        setManualToggle(true);\n        onToggleCollapse && onToggleCollapse(group);\n    }, [\n        group,\n        onToggleCollapse,\n        setManualToggle\n    ]);\n    const shouldLazyLoad = useMemo(()=>{\n        return lazyLoadGroups && group?.level > 0 && !manualToggle;\n    }, [\n        group,\n        lazyLoadGroups,\n        manualToggle\n    ]);\n    return /*#__PURE__*/ _jsxs(HeaderContainer, {\n        // uses the ref to toggle if element is into view if the user didn't toggled it with the button\n        ref: (element)=>ref.current = shouldLazyLoad ? element : undefined,\n        groupLevel: group?.level,\n        children: [\n            /*#__PURE__*/ _jsx(LevelButton, {\n                onClick: onManualLevelToggle,\n                iconProps: {\n                    iconName: group?.isCollapsed ? 'ChevronRight' : 'ChevronDown'\n                }\n            }),\n            /*#__PURE__*/ _jsxs(If, {\n                condition: !!children1,\n                children: [\n                    /*#__PURE__*/ _jsx(Then, {\n                        children: children1\n                    }),\n                    /*#__PURE__*/ _jsxs(Else, {\n                        children: [\n                            /*#__PURE__*/ _jsx(HeaderDetailsText, {\n                                children: /*#__PURE__*/ _jsxs(Bold, {\n                                    children: [\n                                        columnName ? `${columnName}  - ` : '',\n                                        group?.name\n                                    ]\n                                })\n                            }),\n                            /*#__PURE__*/ _jsxs(HeaderDetailsText, {\n                                children: [\n                                    \"Children: \",\n                                    group?.count\n                                ]\n                            }),\n                            group?.children && /*#__PURE__*/ _jsxs(HeaderDetailsText, {\n                                children: [\n                                    \"Total Items: \",\n                                    countChildren(group?.children)\n                                ]\n                            })\n                        ]\n                    })\n                ]\n            })\n        ]\n    });\n});\nconst HeaderContainer = styled.div`\r\n\tpadding-left: ${({ groupLevel  })=>`${groupLevel * 12}px`};\r\n\tdisplay: flex;\r\n\tgap: 8px;\r\n`;\nconst LevelButton = styled(IconButton)`\r\n\twidth: 5%;\r\n`;\nconst HeaderDetailsText = styled.span`\r\n\talign-self: center;\r\n`;\nconst Bold = styled.b``;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useCallback } from 'react';\nimport { GroupHeader } from '../../GroupHeader/index.js';\n/**\r\n * Overrides the default group header rendering so we can inject customization\r\n * @returns\r\n */ export function useGroupHeaderRenderer(table, computedMetadata, groupHeaderFunction, lazyLoadGroups = true) {\n    return useCallback((props, defaultRender)=>{\n        if (!props || !defaultRender) {\n            return null;\n        }\n        const columnName = table.groups().names[props.groupLevel];\n        const meta = columnName ? computedMetadata?.columns[columnName] : undefined;\n        if (!groupHeaderFunction) {\n            return /*#__PURE__*/ _jsx(GroupHeader, {\n                props: props,\n                columnName: columnName,\n                lazyLoadGroups: lazyLoadGroups\n            });\n        }\n        return groupHeaderFunction(meta, columnName, props);\n    }, [\n        groupHeaderFunction,\n        table,\n        lazyLoadGroups,\n        computedMetadata?.columns\n    ]);\n}\n","import { DataType } from '@essex/arquero';\nimport { useThematic } from '@thematic/react';\nimport { useMemo } from 'react';\n/**\r\n * Creates a thematic nominal color scale function that auto-increments for the numeric columns in a table.\r\n * @param meta -\r\n * @returns\r\n */ export function useIncrementingColumnColorScale(meta) {\n    const theme = useThematic();\n    const count = useMemo(()=>countNumeric(meta), [\n        meta\n    ]);\n    const scale = useMemo(()=>theme.scales().nominal(count), [\n        theme,\n        count\n    ]);\n    return useMemo(()=>{\n        let index = 0;\n        return ()=>scale(index++).hex();\n    }, [\n        scale\n    ]);\n}\nfunction countNumeric(meta) {\n    if (!meta) return 1;\n    return Object.values(meta.columns).reduce((acc, cur)=>{\n        return acc + (cur.type === DataType.Number ? 1 : 0);\n    }, 0);\n}\n","import { useMemo } from 'react';\nimport { sliceTable } from '../../common/functions.js';\nexport function useSlicedTable(table, offset, limit) {\n    return useMemo(()=>sliceTable(table, offset, limit), [\n        table,\n        offset,\n        limit\n    ]);\n}\n","/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { SortDirection } from '@essex/arquero';\nimport { useMemo } from 'react';\n/**\r\n * Sort top level group headers if the table is grouped, there isn't any column sorted or\r\n * if the respective column is sorted\r\n * @param table -\r\n * @param column -\r\n * @param sort -\r\n * @param entries -\r\n * @returns RowObject[] | undefined\r\n */ export function useSortedGroups(table, column, sort = SortDirection.Ascending, entries) {\n    return useMemo(()=>{\n        if (!table.isGrouped()) return undefined;\n        const firstColumn = table.groups().names[0];\n        if (column && column !== firstColumn) return entries;\n        return sort === SortDirection.Ascending ? entries?.sort() : entries?.sort().reverse();\n    }, [\n        column,\n        entries,\n        sort,\n        table\n    ]);\n}\n","/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { SortDirection } from '@essex/arquero';\nimport { desc } from 'arquero';\nimport { useMemo } from 'react';\nexport function useSortedTable(table, column, sort) {\n    return useMemo(()=>{\n        let columns = [];\n        const isColumnOnTable = table.columnNames().includes(column || '');\n        if (!sort) {\n            return table;\n        }\n        if ((!column || !sort) && !table.isGrouped() || !isColumnOnTable) {\n            return table.unorder();\n        } else if (column) {\n            columns.push(column);\n        }\n        if (table.isGrouped()) {\n            columns = [\n                ...table.groups().names,\n                ...columns\n            ];\n        }\n        return table.orderby(sort === SortDirection.Descending ? columns.map((col)=>desc(col)) : columns);\n    }, [\n        table,\n        column,\n        sort\n    ]);\n}\n","/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { SortDirection } from '@essex/arquero';\nimport { useCallback, useState } from 'react';\nimport { noop } from '../../functions.js';\nexport function useSortHandling(allowSorting, onColumnHeaderClick = noop) {\n    const [sortColumn, setSortColumn] = useState();\n    const [sortDirection, setSortDirection] = useState();\n    const handleColumnHeaderClick = useCallback((evt, column)=>{\n        if (allowSorting) {\n            if (column?.isSorted || !sortDirection) {\n                setSortDirection(sortDirection === SortDirection.Ascending ? SortDirection.Descending : sortDirection === SortDirection.Descending ? undefined : SortDirection.Ascending);\n            }\n            setSortColumn(column?.fieldName);\n        }\n        onColumnHeaderClick(evt, column);\n    }, [\n        allowSorting,\n        onColumnHeaderClick,\n        setSortColumn,\n        setSortDirection,\n        sortDirection, \n    ]);\n    return {\n        sortColumn,\n        sortDirection,\n        handleColumnHeaderClick\n    };\n}\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useCallback } from 'react';\nimport { StripedRow } from '../renderers/index.js';\n/**\r\n *\r\n * @param striped -\r\n * @returns\r\n */ export function useStripedRowsRenderer(striped = false, columnBorders = false) {\n    return useCallback((props)=>{\n        if (!props) {\n            return null;\n        }\n        return /*#__PURE__*/ _jsx(StripedRow, {\n            ...props,\n            striped: striped,\n            columnBorders: columnBorders\n        });\n    }, [\n        striped,\n        columnBorders\n    ]);\n}\n","import { useMemo } from 'react';\nexport function useSubsetTable(table, columns) {\n    return useMemo(()=>{\n        if (columns && columns.length > 0) {\n            // for some reason, it updates here first when changing a table.\n            // doing this stops the super error from arquero while the real columns aren't re-rendered\n            const tableColumns = table.columnNames();\n            const existingColumnNames = columns.filter((x)=>tableColumns.includes(x));\n            return table.select(existingColumnNames);\n        }\n        return table;\n    }, [\n        table,\n        columns\n    ]);\n}\n","import { introspect } from '@essex/arquero';\nimport { useMemo } from 'react';\n/**\r\n * Optionally executes a series of table characterization functions.\r\n * @param table -\r\n * @param discover -\r\n */ export function useTableMetadata(table, existing, discover = false, saveMetadata) {\n    return useMemo(()=>{\n        if (existing) {\n            return existing;\n        }\n        if (discover) {\n            const meta = introspect(table, discover);\n            saveMetadata && saveMetadata(meta, table);\n            return meta;\n        }\n    }, [\n        table,\n        existing,\n        discover,\n        saveMetadata\n    ]);\n}\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { ConstrainMode, DetailsList, DetailsListLayoutMode, SelectionMode } from '@fluentui/react';\nimport { memo, useCallback, useEffect, useMemo, useState } from 'react';\nimport styled from 'styled-components';\nimport { groupBuilder } from '../common/groups.js';\nimport { useColumns, useDetailsHeaderRenderer, useDetailsListStyles, useGroupHeaderRenderer, useSlicedTable, useSortedGroups, useSortedTable, useSortHandling, useStripedRowsRenderer, useSubsetTable, useTableMetadata } from './hooks/index.js';\nimport { debounceFn } from './util/index.js';\n/**\r\n * Renders an arquero table using a fluent DetailsList.\r\n */ export const ArqueroDetailsList = /*#__PURE__*/ memo(function ArqueroDetailsList({ table , features ={} , metadata , offset =0 , limit =Infinity , includeAllColumns =true , visibleColumns , isSortable =false , isStriped =false , isColumnClickable =false , showColumnBorders =false , selectedColumn , onColumnClick , onCellDropdownSelect , onRenderGroupHeader , onChangeMetadata , // extract props we want to set data-centric defaults for\nselectionMode =SelectionMode.none , layoutMode =DetailsListLayoutMode.fixedColumns , columns , onColumnHeaderClick , styles , isHeadersFixed =false , compact =false , isResizable =true , // passthrough the remainder as props\n...props }) {\n    const [version, setVersion] = useState(0);\n    const { sortColumn , sortDirection , handleColumnHeaderClick  } = useSortHandling(isSortable, onColumnHeaderClick);\n    // first subset the table using the visible columns\n    // this will prevent any further operations on columns we aren't going to show\n    const subset = useSubsetTable(table, visibleColumns);\n    // sort the table internally\n    // note that this is different than the orderby of a pipeline step\n    // this is a temporary sort only for the table display\n    const sorted = useSortedTable(subset, sortColumn, sortDirection);\n    // slice any potential page\n    const sliced = useSlicedTable(sorted, offset, limit);\n    // last, copy these items to actual JS objects for the DetailsList\n    const items = useMemo(()=>sliced.objects(), [\n        sliced\n    ]);\n    // if the table is grouped, groups the information in a way we can iterate\n    const groupedEntries = useMemo(()=>table.isGrouped() ? sliced.objects({\n            grouped: 'entries'\n        }) : undefined, [\n        sliced,\n        table\n    ]);\n    // sorts first level group headers\n    const sortedGroups = useSortedGroups(table, sortColumn, sortDirection, groupedEntries);\n    const computedMetadata = useTableMetadata(table, metadata, anyStatsFeatures(features), onChangeMetadata);\n    const isDefaultHeaderClickable = useMemo(()=>{\n        return isSortable || isColumnClickable || !!onColumnHeaderClick;\n    }, [\n        isSortable,\n        isColumnClickable,\n        onColumnHeaderClick\n    ]);\n    const onColumnResize = useCallback((column, newWidth)=>{\n        const set = ()=>setVersion((prev)=>prev + 1);\n        if (column?.currentWidth !== newWidth) {\n            debounceFn(set);\n        }\n    }, [\n        setVersion\n    ]);\n    const displayColumns = useColumns(table, computedMetadata, columns, visibleColumns, handleColumnHeaderClick, {\n        features,\n        sortColumn,\n        sortDirection,\n        selectedColumn,\n        onColumnClick,\n        onCellDropdownSelect,\n        isDefaultHeaderClickable,\n        includeAllColumns,\n        isColumnClickable,\n        showColumnBorders,\n        compact,\n        isResizable\n    });\n    const headerStyle = useDetailsListStyles(isHeadersFixed, features, styles, !!onColumnClick, compact);\n    const renderRow = useStripedRowsRenderer(isStriped, showColumnBorders);\n    const renderDetailsHeader = useDetailsHeaderRenderer();\n    const renderGroupHeader = useGroupHeaderRenderer(table, computedMetadata, onRenderGroupHeader, features.lazyLoadGroups);\n    const groups = useMemo(()=>{\n        if (!sliced.isGrouped()) {\n            return undefined;\n        }\n        const existingGroups = sliced.groups();\n        const totalLevelCount = existingGroups.names.length;\n        return sortedGroups?.map((row)=>{\n            const initialLevel = 0;\n            return groupBuilder(row, existingGroups, initialLevel, totalLevelCount, items, sortDirection, features.lazyLoadGroups, sortColumn);\n        });\n    }, [\n        sliced,\n        sortedGroups,\n        items,\n        sortColumn,\n        sortDirection,\n        features\n    ]);\n    // as in FluentUI documentation, when updating item we can update the list items with a spread operator.\n    // since when adding a new column we're changing the columns prop too, this approach doesn't work for that.\n    // a workaround found in the issues suggest to use this version property to use as comparison to force re-render\n    useEffect(()=>{\n        setVersion((prev)=>prev + 1);\n    }, [\n        columns,\n        table,\n        compact\n    ]);\n    return /*#__PURE__*/ _jsx(DetailsWrapper, {\n        \"data-is-scrollable\": \"true\",\n        children: /*#__PURE__*/ _jsx(DetailsList, {\n            items: [\n                ...items\n            ],\n            selectionMode: selectionMode,\n            layoutMode: layoutMode,\n            groups: groups,\n            getKey: (_, index)=>{\n                return index.toString();\n            },\n            groupProps: {\n                onRenderHeader: renderGroupHeader\n            },\n            columns: displayColumns,\n            constrainMode: ConstrainMode.unconstrained,\n            onRenderRow: renderRow,\n            onRenderDetailsHeader: renderDetailsHeader,\n            onColumnResize: onColumnResize,\n            compact: compact,\n            ...props,\n            listProps: {\n                version\n            },\n            styles: headerStyle\n        })\n    });\n});\nconst DetailsWrapper = styled.div`\r\n\theight: inherit;\r\n\tposition: relative;\r\n\tmax-height: inherit;\r\n\toverflow-y: auto;\r\n\toverflow-x: auto;\r\n\r\n\tspan.ms-DetailsHeader-cellTitle {\r\n\t\tbackground-color: ${({ theme  })=>theme.application().background().hex()};\r\n\t}\r\n\r\n\t.ms-List-cell {\r\n\t\tmin-height: unset;\r\n\t}\r\n\r\n\t.ms-CommandBar {\r\n\t\tpadding: unset;\r\n\t}\r\n\r\n\t.ms-OverflowSet {\r\n\t\tjustify-content: center;\r\n\t}\r\n`;\nfunction anyStatsFeatures(features) {\n    return Object.values(features || {}).some((v)=>v === true);\n}\n","/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ export const HEIGHT = 36;\n","/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { useThematic } from '@thematic/react';\nimport { useMemo } from 'react';\nexport function useColorDefaults(color, bgColor) {\n    const theme = useThematic();\n    return useMemo(()=>({\n            background: bgColor || theme.application().accent().hex(),\n            foreground: color || theme.application().background().hex()\n        }), [\n        theme,\n        bgColor,\n        color\n    ]);\n}\n","import { useMemo } from 'react';\nexport function useColumnCounts(table, visibleColumns) {\n    return useMemo(()=>{\n        const total = table.numCols();\n        const visible = visibleColumns ? visibleColumns.length : total;\n        const hidden = total - visible;\n        return {\n            total,\n            visible,\n            hidden\n        };\n    }, [\n        table,\n        visibleColumns\n    ]);\n}\n","import { useMemo } from 'react';\nexport function useRowCounts(table) {\n    return useMemo(()=>{\n        const total = table.totalRows();\n        const visible = table.numRows();\n        const hidden = total - visible;\n        return {\n            total,\n            visible,\n            hidden\n        };\n    }, [\n        table\n    ]);\n}\n","import { jsx as _jsx } from \"react/jsx-runtime\";\n/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { DirectionalHint, FocusTrapCallout, TextField } from '@fluentui/react';\nimport { memo, useCallback } from 'react';\nimport styled from 'styled-components';\n/**\r\n * Renders the callout with a field to rename the table (and autofocus to the input)\r\n */ export const RenameCallout = /*#__PURE__*/ memo(function RenameCallout({ onSend , onChange , editedName , name  }) {\n    const validateKeyEvent = useCallback((e)=>{\n        if (e.key === 'Enter') return onSend(editedName);\n        if (e.key === 'Escape') {\n            onSend(name);\n        }\n    }, [\n        onSend,\n        name,\n        editedName\n    ]);\n    return /*#__PURE__*/ _jsx(FocusCallout, {\n        target: \"#editName\",\n        directionalHint: DirectionalHint.topCenter,\n        onDismiss: ()=>onSend(name),\n        children: /*#__PURE__*/ _jsx(TextField, {\n            value: editedName,\n            onKeyDown: validateKeyEvent,\n            onChange: onChange,\n            underlined: true\n        })\n    });\n});\nconst FocusCallout = styled(FocusTrapCallout)`\r\n\twidth: 320;\r\n\tmax-width: 90%;\r\n\tpadding: 10px;\r\n`;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { memo, useCallback, useEffect, useState } from 'react';\nimport { Else, If, Then } from 'react-if';\nimport styled from 'styled-components';\nimport { RenameCallout } from './RenameCallout.js';\n/**\r\n * Renders the table name if passed, or the option to rename the name if the function\r\n * onRenameTable is passed to be called when clicking save or pressing enter on the callout\r\n */ export const TableName = /*#__PURE__*/ memo(function TableName({ onRenameTable , name , color ,  }) {\n    const [isEditing, setIsEditing] = useState(false);\n    const [editedName, setEditedName] = useState(name || '');\n    useEffect(()=>{\n        setEditedName(name);\n    }, [\n        name,\n        setEditedName\n    ]);\n    const onChange = useCallback((_e, value)=>{\n        setEditedName(value);\n    }, [\n        setEditedName\n    ]);\n    const onSend = useCallback((newName)=>{\n        // if the user enters an empty value, save the previous value\n        const incomingName = !newName ? name : newName;\n        onRenameTable && onRenameTable(incomingName);\n        setIsEditing(false);\n        setEditedName(incomingName);\n    }, [\n        onRenameTable,\n        setIsEditing,\n        setEditedName,\n        name\n    ]);\n    return /*#__PURE__*/ _jsx(Container, {\n        children: /*#__PURE__*/ _jsxs(If, {\n            condition: !!onRenameTable,\n            children: [\n                /*#__PURE__*/ _jsx(Then, {\n                    children: /*#__PURE__*/ _jsxs(Container, {\n                        children: [\n                            /*#__PURE__*/ _jsx(H3Editable, {\n                                color: color,\n                                id: \"editName\",\n                                title: \"Edit\",\n                                onClick: ()=>setIsEditing(true),\n                                children: name\n                            }),\n                            /*#__PURE__*/ _jsx(If, {\n                                condition: isEditing,\n                                children: /*#__PURE__*/ _jsx(Then, {\n                                    children: /*#__PURE__*/ _jsx(RenameCallout, {\n                                        onSend: onSend,\n                                        editedName: editedName,\n                                        onChange: onChange,\n                                        name: name\n                                    })\n                                })\n                            })\n                        ]\n                    })\n                }),\n                /*#__PURE__*/ _jsx(Else, {\n                    children: /*#__PURE__*/ _jsx(If, {\n                        condition: name,\n                        children: /*#__PURE__*/ _jsx(Then, {\n                            children: /*#__PURE__*/ _jsx(H3, {\n                                color: color,\n                                children: name\n                            })\n                        })\n                    })\n                })\n            ]\n        })\n    });\n});\nconst H3 = styled.h3`\r\n\tfont-weight: normal;\r\n\tfont-size: 0.8em;\r\n\tmargin-right: 8px;\r\n\tcolor: ${({ theme , color  })=>color || theme.application().background().hex()};\r\n`;\nconst H3Editable = styled(H3)`\r\n\tcursor: pointer;\r\n\tborder-bottom: 1px dotted\r\n\t\t${({ theme  })=>theme.application().background().hex()};\r\n`;\nconst Container = styled.div``;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */ import { memo, useMemo } from 'react';\nimport styled from 'styled-components';\nimport { HEIGHT } from './constants.js';\nimport { useColorDefaults, useColumnCounts, useRowCounts } from './hooks/index.js';\nimport { TableName } from './TableName.js';\nexport const ArqueroTableHeader = /*#__PURE__*/ memo(function ArqueroTableHeader({ table , name , showRowCount =true , showColumnCount =true , commandBar , farCommandBar , visibleColumns , onRenameTable , bgColor , color ,  }) {\n    const { background , foreground  } = useColorDefaults(color, bgColor);\n    const groupCount = useMemo(()=>{\n        return table.isGrouped() ? table.groups().size : 0;\n    }, [\n        table\n    ]);\n    const columnCounts = useColumnCounts(table, visibleColumns);\n    const rowCounts = useRowCounts(table);\n    return /*#__PURE__*/ _jsxs(Header, {\n        bgColor: background,\n        color: foreground,\n        children: [\n            /*#__PURE__*/ _jsx(Left, {\n                children: commandBar\n            }),\n            /*#__PURE__*/ _jsxs(Middle, {\n                children: [\n                    name ? /*#__PURE__*/ _jsx(TableName, {\n                        onRenameTable: onRenameTable,\n                        name: name,\n                        color: foreground\n                    }) : null,\n                    showRowCount === true ? /*#__PURE__*/ _jsx(H3, {\n                        children: `${rowCounts.visible} row${rowCounts.visible !== 1 ? 's' : ''}${rowCounts.hidden > 0 ? ` (${rowCounts.hidden} filtered)` : ''}`\n                    }) : null,\n                    showColumnCount === true ? /*#__PURE__*/ _jsx(H3, {\n                        children: `${columnCounts.visible} col${columnCounts.visible !== 1 ? 's' : ''}${columnCounts.hidden > 0 ? ` (${columnCounts.hidden} hidden)` : ''}`\n                    }) : null,\n                    groupCount ? /*#__PURE__*/ _jsxs(H3, {\n                        children: [\n                            groupCount,\n                            \" groups\"\n                        ]\n                    }) : null\n                ]\n            }),\n            /*#__PURE__*/ _jsx(Right, {\n                children: farCommandBar\n            })\n        ]\n    });\n});\nconst Header = styled.div`\r\n\theight: ${HEIGHT}px;\r\n\twidth: 100%;\r\n\tbackground-color: ${({ bgColor  })=>bgColor};\r\n\tcolor: ${({ color  })=>color};\r\n\tposition: relative;\r\n\tbox-sizing: border-box;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: space-between;\r\n`;\nconst H3 = styled.h3`\r\n\tfont-weight: normal;\r\n\tfont-size: 0.8em;\r\n`;\nconst Left = styled.div`\r\n\tflex: 1;\r\n\tdisplay: flex;\r\n\tjustify-content: flex-start;\r\n`;\nconst Middle = styled.div`\r\n\tflex: 2;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tgap: 8px;\r\n`;\nconst Right = styled.div`\r\n\tflex: 1;\r\n\tdisplay: flex;\r\n\tjustify-content: flex-end;\r\n`;\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { ArqueroDetailsList, ArqueroTableHeader } from '@essex/arquero-react'\nimport type { ICommandBarItemProps } from '@fluentui/react'\nimport { CommandBar, Stack } from '@fluentui/react'\nimport { useThematic } from '@thematic/react'\nimport { memo, useMemo } from 'react'\nimport styled from 'styled-components'\n\nimport type { ICsvContent } from '~models/csv'\n\nexport interface ICsvTableProps {\n\tcontent: ICsvContent\n\tcommands?: ICommandBarItemProps[]\n\tvisibleColumns?: string[]\n}\n\nexport const CsvTable: React.FC<ICsvTableProps> = memo(function CsvTable({\n\tcontent,\n\tcommands = [],\n\tvisibleColumns,\n}: ICsvTableProps) {\n\tconst thematic = useThematic()\n\n\tconst commandBar = useMemo(() => {\n\t\tif (!commands.length) {\n\t\t\treturn <></>\n\t\t}\n\t\treturn (\n\t\t\t<StyledCommandBar\n\t\t\t\titems={commands}\n\t\t\t\tstyles={{\n\t\t\t\t\troot: {\n\t\t\t\t\t\tbackground: thematic.application().accent().hex(),\n\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t},\n\t\t\t\t}}\n\t\t\t/>\n\t\t)\n\t}, [commands, thematic])\n\n\tif (content.table.numCols() === 0) {\n\t\treturn <></>\n\t}\n\n\treturn (\n\t\t<Stack>\n\t\t\t<Stack.Item>\n\t\t\t\t<ArqueroTableHeader\n\t\t\t\t\ttable={content.table}\n\t\t\t\t\tcommandBar={commandBar}\n\t\t\t\t\tvisibleColumns={visibleColumns}\n\t\t\t\t\tshowColumnCount={true}\n\t\t\t\t/>\n\t\t\t\t<ArqueroDetailsList\n\t\t\t\t\ttable={content.table}\n\t\t\t\t\tmetadata={content.metadata}\n\t\t\t\t\tfeatures={{\n\t\t\t\t\t\thistogramColumnHeaders: true,\n\t\t\t\t\t\tstatsColumnHeaders: true,\n\t\t\t\t\t}}\n\t\t\t\t\tisSortable\n\t\t\t\t\tisHeadersFixed\n\t\t\t\t\tshowColumnBorders\n\t\t\t\t\tvisibleColumns={visibleColumns}\n\t\t\t\t\tstyles={{\n\t\t\t\t\t\troot: {\n\t\t\t\t\t\t\theight: 800,\n\t\t\t\t\t\t\tborder: `1px solid ${thematic.application().faint().hex()}`,\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Stack.Item>\n\t\t</Stack>\n\t)\n})\n\nconst StyledCommandBar = styled(CommandBar)`\n\t& button,\n\t& button:hover {\n\t\tcolor: ${p => p.theme.palette.neutralLight} !important;\n\t\tbackground: ${p => p.theme.palette.themePrimary};\n\n\t\t& i,\n\t\t& i:hover {\n\t\t\tcolor: ${p => p.theme.palette.neutralLight} !important;\n\t\t}\n\t}\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { IMetricByKey } from '@essex/sds-core'\nimport { memo } from 'react'\nimport { Chart } from 'react-chartjs-2'\n\nexport interface IMetricsChart {\n\tlabel: string\n\tmetrics: IMetricByKey\n\ttype: 'line' | 'bar'\n\tmax?: number\n\tdrawYAxisOnChartArea?: boolean\n}\n\nexport interface MetricsChartProps {\n\tlabels: number[]\n\tleftChart?: IMetricsChart\n\trightChart?: IMetricsChart\n\theight: number\n\twidth: number\n}\n\nfunction add_chart(\n\tdatasets,\n\tscales,\n\tchart: IMetricsChart,\n\tposition: 'left' | 'right',\n\tlabels: number[],\n) {\n\tdatasets.push({\n\t\tlabel: chart.label,\n\t\ttype: chart.type,\n\t\tdata: labels.map(l => chart.metrics[l] ?? 0),\n\t\tyAxisID: position,\n\t})\n\tscales[position] = {\n\t\ttype: 'linear',\n\t\tposition: position,\n\t\tsuggestedMax: chart.max,\n\t\tgrid: {\n\t\t\tdrawOnChartArea: chart.drawYAxisOnChartArea,\n\t\t},\n\t}\n}\n\nexport const MetricsChart: React.FC<MetricsChartProps> = memo(\n\tfunction MetricsChart({\n\t\tlabels,\n\t\tleftChart,\n\t\trightChart,\n\t\theight,\n\t\twidth,\n\t}: MetricsChartProps) {\n\t\tconst datasets = []\n\t\tconst scales = {}\n\n\t\tif (leftChart) {\n\t\t\tadd_chart(datasets, scales, leftChart, 'left', labels)\n\t\t}\n\n\t\tif (rightChart) {\n\t\t\tadd_chart(datasets, scales, rightChart, 'right', labels)\n\t\t}\n\n\t\treturn (\n\t\t\t<Chart\n\t\t\t\ttype=\"bar\"\n\t\t\t\theight={height}\n\t\t\t\twidth={width}\n\t\t\t\tdata={{\n\t\t\t\t\tlabels,\n\t\t\t\t\tdatasets,\n\t\t\t\t}}\n\t\t\t\toptions={{\n\t\t\t\t\tresponsive: false,\n\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\tscales: scales,\n\t\t\t\t}}\n\t\t\t\tstyle={{\n\t\t\t\t\tmargin: 'auto',\n\t\t\t\t}}\n\t\t\t/>\n\t\t)\n\t},\n)\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { IMicrodataStatistics } from '@essex/sds-core'\nimport { useTheme } from '@fluentui/react'\nimport { FlexContainer } from '@sds/components'\nimport { memo } from 'react'\n\nimport { MetricsChart } from '~components/Charts'\nimport {\n\tuseMetricsByCountLabels,\n\tuseMetricsByLenLabels,\n} from '~components/Charts/hooks'\nimport { DataEvaluationInfoDownloader } from '~components/DataEvaluationInfoDownloader'\nimport { MetricsSummaryTable } from '~components/MetricsSummaryTable'\nimport type { IMicrodataMaxStatistics } from '~models'\nimport type { AggregateType } from '~workers/types'\n\nexport interface DataEvaluationInfoProps {\n\tcontextKey: string\n\treportingLength: number\n\tstats: IMicrodataStatistics\n\tmicrodataMaxStats: IMicrodataMaxStatistics\n\taggregateType: AggregateType\n\tchartHeight: number\n\tchartWidth: number\n}\n\nexport const DataEvaluationInfo: React.FC<DataEvaluationInfoProps> = memo(\n\tfunction DataEvaluationInfo({\n\t\tcontextKey,\n\t\treportingLength,\n\t\tstats,\n\t\tmicrodataMaxStats,\n\t\taggregateType,\n\t\tchartHeight,\n\t\tchartWidth,\n\t}: DataEvaluationInfoProps) {\n\t\tconst lenLabels = useMetricsByLenLabels(reportingLength)\n\t\tconst countLabels = useMetricsByCountLabels(\n\t\t\tstats.meanProportionalErrorByBucket,\n\t\t)\n\t\tconst theme = useTheme()\n\n\t\treturn (\n\t\t\t<FlexContainer vertical gap={theme.spacing.s1}>\n\t\t\t\t<DataEvaluationInfoDownloader\n\t\t\t\t\tcontextKey={contextKey}\n\t\t\t\t\tstats={stats}\n\t\t\t\t\taggregateType={aggregateType}\n\t\t\t\t\treportingLength={reportingLength}\n\t\t\t\t/>\n\t\t\t\t<MetricsSummaryTable stats={stats} aggregateType={aggregateType} />\n\t\t\t\t<MetricsChart\n\t\t\t\t\tlabels={countLabels}\n\t\t\t\t\tleftChart={{\n\t\t\t\t\t\tlabel: 'Mean proportional error',\n\t\t\t\t\t\tmetrics: stats.meanProportionalErrorByBucket,\n\t\t\t\t\t\ttype: 'bar',\n\t\t\t\t\t\tmax: microdataMaxStats.meanProportionalErrorByBucket,\n\t\t\t\t\t}}\n\t\t\t\t\theight={chartHeight}\n\t\t\t\t\twidth={chartWidth}\n\t\t\t\t/>\n\t\t\t\t<MetricsChart\n\t\t\t\t\tlabels={countLabels}\n\t\t\t\t\tleftChart={{\n\t\t\t\t\t\tlabel: 'Mean length of combinations',\n\t\t\t\t\t\tmetrics: stats.meanCombinationLengthByBucket,\n\t\t\t\t\t\ttype: 'bar',\n\t\t\t\t\t\tmax: microdataMaxStats.meanCombinationLengthByBucket,\n\t\t\t\t\t}}\n\t\t\t\t\theight={chartHeight}\n\t\t\t\t\twidth={chartWidth}\n\t\t\t\t/>\n\t\t\t\t<MetricsChart\n\t\t\t\t\tlabels={lenLabels}\n\t\t\t\t\tleftChart={{\n\t\t\t\t\t\tlabel: 'Mean combinations count by length',\n\t\t\t\t\t\tmetrics: stats.combinationsCountMeanByLen,\n\t\t\t\t\t\ttype: 'bar',\n\t\t\t\t\t\tmax: microdataMaxStats.combinationsCountMeanByLen,\n\t\t\t\t\t}}\n\t\t\t\t\theight={chartHeight}\n\t\t\t\t\twidth={chartWidth}\n\t\t\t\t/>\n\t\t\t\t<MetricsChart\n\t\t\t\t\tlabels={lenLabels}\n\t\t\t\t\tleftChart={{\n\t\t\t\t\t\tlabel: 'Distinct combinations count by length',\n\t\t\t\t\t\tmetrics: stats.totalNumberOfCombinationsByLen,\n\t\t\t\t\t\ttype: 'bar',\n\t\t\t\t\t\tmax: microdataMaxStats.totalNumberOfCombinationsByLen,\n\t\t\t\t\t}}\n\t\t\t\t\theight={chartHeight}\n\t\t\t\t\twidth={chartWidth}\n\t\t\t\t/>\n\t\t\t\t<MetricsChart\n\t\t\t\t\tlabels={lenLabels}\n\t\t\t\t\tleftChart={{\n\t\t\t\t\t\tlabel: 'Rare combinations count by length',\n\t\t\t\t\t\tmetrics: stats.numberOfRareCombinationsByLen,\n\t\t\t\t\t\ttype: 'bar',\n\t\t\t\t\t\tmax: microdataMaxStats.numberOfRareCombinationsByLen,\n\t\t\t\t\t}}\n\t\t\t\t\theight={chartHeight}\n\t\t\t\t\twidth={chartWidth}\n\t\t\t\t/>\n\t\t\t\t<MetricsChart\n\t\t\t\t\tlabels={lenLabels}\n\t\t\t\t\tleftChart={{\n\t\t\t\t\t\tlabel: 'Rare combinations percentage by length',\n\t\t\t\t\t\tmetrics: stats.percentageOfRareCombinationsByLen,\n\t\t\t\t\t\ttype: 'bar',\n\t\t\t\t\t\tmax: microdataMaxStats.percentageOfRareCombinationsByLen,\n\t\t\t\t\t}}\n\t\t\t\t\theight={chartHeight}\n\t\t\t\t\twidth={chartWidth}\n\t\t\t\t/>\n\t\t\t\t<MetricsChart\n\t\t\t\t\tlabels={lenLabels}\n\t\t\t\t\tleftChart={{\n\t\t\t\t\t\tlabel: 'Leakage count by length',\n\t\t\t\t\t\tmetrics: stats.leakageCountByLen,\n\t\t\t\t\t\ttype: 'bar',\n\t\t\t\t\t\tmax: microdataMaxStats.leakageCountByLen,\n\t\t\t\t\t}}\n\t\t\t\t\theight={chartHeight}\n\t\t\t\t\twidth={chartWidth}\n\t\t\t\t/>\n\t\t\t\t<MetricsChart\n\t\t\t\t\tlabels={lenLabels}\n\t\t\t\t\tleftChart={{\n\t\t\t\t\t\tlabel: 'Leakage percentage by length',\n\t\t\t\t\t\tmetrics: stats.leakagePercentageByLen,\n\t\t\t\t\t\ttype: 'bar',\n\t\t\t\t\t\tmax: microdataMaxStats.leakagePercentageByLen,\n\t\t\t\t\t}}\n\t\t\t\t\theight={chartHeight}\n\t\t\t\t\twidth={chartWidth}\n\t\t\t\t/>\n\t\t\t</FlexContainer>\n\t\t)\n\t},\n)\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { IEvaluateResult, IMicrodataStatistics } from '@essex/sds-core'\nimport type { IDropdownOption } from '@fluentui/react'\nimport _ from 'lodash'\nimport type { MutableRefObject } from 'react'\nimport { useCallback, useMemo } from 'react'\n\nimport type { IMicrodataMaxStatistics } from '~models'\nimport { useSdsManagerInstance } from '~states'\nimport type { ISynthesisInfo } from '~workers/types'\nimport { AggregateType } from '~workers/types'\n\nexport function useSelectedSynthesisOnChange(\n\tselectedSynthesis: ISynthesisInfo | null,\n\tsetEvaluateResult: (evaluateResult: IEvaluateResult | null) => void,\n\tisMounted: MutableRefObject<boolean>,\n): () => Promise<void> {\n\tconst [manager] = useSdsManagerInstance()\n\n\treturn useCallback(async () => {\n\t\tif (selectedSynthesis && manager) {\n\t\t\tconst result = await manager.instance.getEvaluateResult(\n\t\t\t\tselectedSynthesis.key,\n\t\t\t)\n\n\t\t\tif (isMounted.current) {\n\t\t\t\tsetEvaluateResult(result)\n\t\t\t}\n\t\t} else {\n\t\t\tsetEvaluateResult(null)\n\t\t}\n\t}, [manager, selectedSynthesis, setEvaluateResult, isMounted])\n}\n\nexport function useAggregateTypeOptions(): IDropdownOption[] {\n\treturn [\n\t\t{ key: AggregateType.Sensitive, text: 'Sensitive' },\n\t\t{ key: AggregateType.Aggregated, text: 'Aggregate' },\n\t\t{ key: AggregateType.Synthetic, text: 'Synthetic' },\n\t]\n}\n\nexport function useMicrodataMaxStatistics(\n\tstatsList?: (IMicrodataStatistics | undefined)[],\n): IMicrodataMaxStatistics {\n\treturn useMemo(() => {\n\t\tconst filteredStats = (statsList ?? []).filter(\n\t\t\tstats => stats !== undefined,\n\t\t) as IMicrodataStatistics[]\n\t\tconst res: IMicrodataMaxStatistics = {}\n\n\t\tif (filteredStats.length !== 0) {\n\t\t\tconst base = filteredStats[0]\n\n\t\t\tfor (const k in base) {\n\t\t\t\tif (typeof base[k] === 'number') {\n\t\t\t\t\tres[k] = _(filteredStats)\n\t\t\t\t\t\t.map(stats => stats[k])\n\t\t\t\t\t\t.max()\n\t\t\t\t} else {\n\t\t\t\t\tres[k] = _(filteredStats)\n\t\t\t\t\t\t.flatMap(stats => _.values(stats[k]))\n\t\t\t\t\t\t.max()\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn res\n\t}, [statsList])\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { FlexItem } from '@sds/components'\nimport styled from 'styled-components'\n\nexport const FlexCentered = styled(FlexItem)`\n\ttext-align: center;\n\toverflow-x: auto;\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { IEvaluateResult } from '@essex/sds-core'\nimport { Dropdown, Label } from '@fluentui/react'\nimport { FlexContainer } from '@sds/components'\nimport { memo, useEffect, useRef, useState } from 'react'\nimport { useTheme } from 'styled-components'\n\nimport { DataEvaluationInfo } from '~components/DataEvaluationInfo'\nimport { SynthesisDropdown } from '~components/SynthesisDropdown'\nimport { useDropdownOnChange } from '~pages/hooks'\nimport type { ISynthesisInfo } from '~workers/types'\nimport { AggregateType } from '~workers/types'\n\nimport { useAllFinishedSynthesisInfo } from '../Synthesize.hooks.js'\nimport {\n\tuseAggregateTypeOptions,\n\tuseMicrodataMaxStatistics,\n\tuseSelectedSynthesisOnChange,\n} from './DataEvaluation.hooks.js'\nimport { FlexCentered } from './DataEvaluation.styles.js'\nimport type { DataEvaluationProps } from './DataEvaluation.types.js'\n\nconst aggregateTypeToStatKey = {\n\t[AggregateType.Sensitive]: 'sensitiveDataStats',\n\t[AggregateType.Aggregated]: 'aggregateCountsStats',\n\t[AggregateType.Synthetic]: 'syntheticDataStats',\n}\n\nexport const DataEvaluation: React.FC<DataEvaluationProps> = memo(\n\tfunction DataEvaluation({ selectedSynthesis }) {\n\t\tconst isMounted = useRef(true)\n\t\tconst [leftEvaluateResult, setLeftEvaluateResult] =\n\t\t\tuseState<IEvaluateResult | null>()\n\t\tconst [rightEvaluateResult, setRightEvaluateResult] =\n\t\t\tuseState<IEvaluateResult | null>()\n\t\tconst [leftAggregateType, setLeftAggregateType] = useState<AggregateType>(\n\t\t\tAggregateType.Sensitive,\n\t\t)\n\t\tconst [rightAggregateType, setRightAggregateType] = useState<AggregateType>(\n\t\t\tAggregateType.Synthetic,\n\t\t)\n\t\tconst aggregateTypeOptions = useAggregateTypeOptions()\n\t\tconst leftAggregateTypeOnChange = useDropdownOnChange(setLeftAggregateType)\n\t\tconst rightAggregateTypeOnChange = useDropdownOnChange(\n\t\t\tsetRightAggregateType,\n\t\t)\n\t\tconst leftStats = leftEvaluateResult\n\t\t\t? leftEvaluateResult[aggregateTypeToStatKey[leftAggregateType]]\n\t\t\t: undefined\n\t\tconst rightStats = rightEvaluateResult\n\t\t\t? rightEvaluateResult[aggregateTypeToStatKey[rightAggregateType]]\n\t\t\t: undefined\n\t\tconst microdataMaxStats = useMicrodataMaxStatistics([leftStats, rightStats])\n\t\tconst allFinishedSynthesisInfo = useAllFinishedSynthesisInfo()\n\t\tconst [leftSelectedSynthesis, setLeftSelectedSynthesis] =\n\t\t\tuseState<ISynthesisInfo | null>(selectedSynthesis)\n\t\tconst [rightSelectedSynthesis, setRightSelectedSynthesis] =\n\t\t\tuseState<ISynthesisInfo | null>(selectedSynthesis)\n\t\tconst leftSelectedSynthesisOnChange = useSelectedSynthesisOnChange(\n\t\t\tleftSelectedSynthesis,\n\t\t\tsetLeftEvaluateResult,\n\t\t\tisMounted,\n\t\t)\n\t\tconst rightSelectedSynthesisOnChange = useSelectedSynthesisOnChange(\n\t\t\trightSelectedSynthesis,\n\t\t\tsetRightEvaluateResult,\n\t\t\tisMounted,\n\t\t)\n\t\tconst theme = useTheme()\n\n\t\tconst chartHeight = 400\n\n\t\tconst chartWidth = 550\n\n\t\tuseEffect(() => {\n\t\t\tsetLeftSelectedSynthesis(selectedSynthesis)\n\t\t\tsetRightSelectedSynthesis(selectedSynthesis)\n\t\t}, [selectedSynthesis])\n\n\t\tuseEffect(() => {\n\t\t\tleftSelectedSynthesisOnChange()\n\t\t}, [leftSelectedSynthesis, leftSelectedSynthesisOnChange])\n\n\t\tuseEffect(() => {\n\t\t\trightSelectedSynthesisOnChange()\n\t\t}, [rightSelectedSynthesis, rightSelectedSynthesisOnChange])\n\n\t\tuseEffect(() => {\n\t\t\treturn () => {\n\t\t\t\tisMounted.current = false\n\t\t\t}\n\t\t}, [])\n\n\t\treturn (\n\t\t\t<FlexContainer vertical gap={theme.spacing.s1}>\n\t\t\t\t<FlexContainer gap={theme.spacing.s1}>\n\t\t\t\t\t<FlexCentered grow={1}>\n\t\t\t\t\t\t<FlexContainer vertical gap={theme.spacing.s1}>\n\t\t\t\t\t\t\t<SynthesisDropdown\n\t\t\t\t\t\t\t\tselectedSynthesis={leftSelectedSynthesis}\n\t\t\t\t\t\t\t\tallSynthesisInfo={allFinishedSynthesisInfo}\n\t\t\t\t\t\t\t\tonChange={setLeftSelectedSynthesis}\n\t\t\t\t\t\t\t\tdisabled={allFinishedSynthesisInfo.length === 0}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Dropdown\n\t\t\t\t\t\t\t\tselectedKey={leftAggregateType}\n\t\t\t\t\t\t\t\tonChange={leftAggregateTypeOnChange}\n\t\t\t\t\t\t\t\tplaceholder=\"Select data statistics\"\n\t\t\t\t\t\t\t\toptions={aggregateTypeOptions}\n\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\tallFinishedSynthesisInfo.length === 0 ||\n\t\t\t\t\t\t\t\t\tleftSelectedSynthesis === undefined\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FlexContainer>\n\t\t\t\t\t</FlexCentered>\n\t\t\t\t\t<FlexCentered grow={1}>\n\t\t\t\t\t\t<FlexContainer vertical gap={theme.spacing.s1}>\n\t\t\t\t\t\t\t<SynthesisDropdown\n\t\t\t\t\t\t\t\tselectedSynthesis={rightSelectedSynthesis}\n\t\t\t\t\t\t\t\tallSynthesisInfo={allFinishedSynthesisInfo}\n\t\t\t\t\t\t\t\tonChange={setRightSelectedSynthesis}\n\t\t\t\t\t\t\t\tdisabled={allFinishedSynthesisInfo.length === 0}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Dropdown\n\t\t\t\t\t\t\t\tselectedKey={rightAggregateType}\n\t\t\t\t\t\t\t\tonChange={rightAggregateTypeOnChange}\n\t\t\t\t\t\t\t\tplaceholder=\"Select data statistics\"\n\t\t\t\t\t\t\t\toptions={aggregateTypeOptions}\n\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\tallFinishedSynthesisInfo.length === 0 ||\n\t\t\t\t\t\t\t\t\trightSelectedSynthesis === null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FlexContainer>\n\t\t\t\t\t</FlexCentered>\n\t\t\t\t</FlexContainer>\n\n\t\t\t\t<FlexContainer gap={theme.spacing.s1}>\n\t\t\t\t\t<FlexCentered grow={1}>\n\t\t\t\t\t\t{leftSelectedSynthesis && leftEvaluateResult ? (\n\t\t\t\t\t\t\t<DataEvaluationInfo\n\t\t\t\t\t\t\t\tcontextKey={leftSelectedSynthesis.key}\n\t\t\t\t\t\t\t\treportingLength={leftEvaluateResult.reportingLength}\n\t\t\t\t\t\t\t\tstats={leftStats}\n\t\t\t\t\t\t\t\tmicrodataMaxStats={microdataMaxStats}\n\t\t\t\t\t\t\t\taggregateType={leftAggregateType}\n\t\t\t\t\t\t\t\tchartHeight={chartHeight}\n\t\t\t\t\t\t\t\tchartWidth={chartWidth}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Label>Nothing selected</Label>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</FlexCentered>\n\t\t\t\t\t<FlexCentered grow={1}>\n\t\t\t\t\t\t{rightSelectedSynthesis && rightEvaluateResult ? (\n\t\t\t\t\t\t\t<DataEvaluationInfo\n\t\t\t\t\t\t\t\tcontextKey={rightSelectedSynthesis.key}\n\t\t\t\t\t\t\t\treportingLength={rightEvaluateResult.reportingLength}\n\t\t\t\t\t\t\t\tstats={rightStats}\n\t\t\t\t\t\t\t\tmicrodataMaxStats={microdataMaxStats}\n\t\t\t\t\t\t\t\taggregateType={rightAggregateType}\n\t\t\t\t\t\t\t\tchartHeight={chartHeight}\n\t\t\t\t\t\t\t\tchartWidth={chartWidth}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Label>Nothing selected</Label>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</FlexCentered>\n\t\t\t\t</FlexContainer>\n\t\t\t</FlexContainer>\n\t\t)\n\t},\n)\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { IEvaluateResult, IMultiValueColumns } from '@essex/sds-core'\nimport type { ICommandBarItemProps } from '@fluentui/react'\nimport type { Dispatch, MutableRefObject, SetStateAction } from 'react'\nimport { useCallback, useMemo } from 'react'\n\nimport type { ICsvContent } from '~models'\nimport { useDownloadCommand } from '~pages/hooks'\nimport { useSdsManagerInstance, useSensitiveContent } from '~states'\nimport type { ISynthesisInfo } from '~workers/types'\n\nimport { usableMultiValueColumns } from '../../../utils/index.js'\nimport { useGetSyntheticCsvContent } from '../Synthesize.hooks.js'\n\nexport function useGetAndSetSyntheticCsvContent(\n\tsetSyntheticCsvContent: (content: ICsvContent) => void,\n\tisMounted: MutableRefObject<boolean>,\n): (\n\tselectedSynthesis: ISynthesisInfo,\n\tjoinMultiValueColumns: boolean,\n) => Promise<void> {\n\tconst getSyntheticCsvData = useGetSyntheticCsvContent()\n\n\treturn useCallback(\n\t\tasync (\n\t\t\tselectedSynthesis: ISynthesisInfo,\n\t\t\tjoinMultiValueColumns: boolean,\n\t\t) => {\n\t\t\tconst syntheticCsvData = await getSyntheticCsvData(\n\t\t\t\tselectedSynthesis,\n\t\t\t\tjoinMultiValueColumns,\n\t\t\t)\n\n\t\t\tif (isMounted.current) {\n\t\t\t\tsetSyntheticCsvContent(syntheticCsvData)\n\t\t\t}\n\t\t},\n\t\t[getSyntheticCsvData, setSyntheticCsvContent, isMounted],\n\t)\n}\n\nexport function useGetAndSetEvaluateResult(\n\tsetEvaluateResult: (evaluateResult: IEvaluateResult | null) => void,\n\tisMounted: MutableRefObject<boolean>,\n): (selectedSynthesis: ISynthesisInfo) => Promise<void> {\n\tconst [manager] = useSdsManagerInstance()\n\n\treturn useCallback(\n\t\tasync (selectedSynthesis: ISynthesisInfo) => {\n\t\t\tconst evaluateResult =\n\t\t\t\t(await manager?.instance.getEvaluateResult(selectedSynthesis.key)) ??\n\t\t\t\tnull\n\n\t\t\tif (isMounted.current) {\n\t\t\t\tsetEvaluateResult(evaluateResult)\n\t\t\t}\n\t\t},\n\t\t[manager, setEvaluateResult, isMounted],\n\t)\n}\n\nexport function useSensitiveMultiValueColumns(): IMultiValueColumns {\n\tconst [sensitiveContent] = useSensitiveContent()\n\n\treturn useMemo(() => {\n\t\treturn usableMultiValueColumns(sensitiveContent)\n\t}, [sensitiveContent])\n}\n\nexport function useToggleJoinMultiValueColumnsCommand(\n\tjoinMultiValueColumns: boolean,\n\tsetJoinMultiValueColumns: Dispatch<SetStateAction<boolean>>,\n): ICommandBarItemProps | null {\n\tconst multiValueColumns = useSensitiveMultiValueColumns()\n\n\treturn useMemo(() => {\n\t\tif (Object.keys(multiValueColumns).length > 0) {\n\t\t\treturn {\n\t\t\t\tkey: 'multi-values',\n\t\t\t\ttext: `Join multi-values ${joinMultiValueColumns ? 'on' : 'off'}`,\n\t\t\t\ticonProps: {\n\t\t\t\t\ticonName: joinMultiValueColumns ? 'ToggleRight' : 'ToggleLeft',\n\t\t\t\t},\n\t\t\t\tonClick: () => {\n\t\t\t\t\tsetJoinMultiValueColumns(prev => !prev)\n\t\t\t\t},\n\t\t\t}\n\t\t} else {\n\t\t\treturn null\n\t\t}\n\t}, [multiValueColumns, joinMultiValueColumns, setJoinMultiValueColumns])\n}\n\nexport function useSyntheticTableCommands(\n\tcontent: ICsvContent,\n\tjoinMultiValueColumns: boolean,\n\tsetJoinMultiValueColumns: Dispatch<SetStateAction<boolean>>,\n): ICommandBarItemProps[] {\n\tconst dlcmd = useDownloadCommand(content, 'synthetic_data.csv')\n\tconst tjcmd = useToggleJoinMultiValueColumnsCommand(\n\t\tjoinMultiValueColumns,\n\t\tsetJoinMultiValueColumns,\n\t)\n\treturn useMemo(\n\t\t() => [dlcmd, tjcmd].filter(cmd => cmd !== null) as ICommandBarItemProps[],\n\t\t[dlcmd, tjcmd],\n\t)\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport styled from 'styled-components'\n\nexport const StyledItem = styled.div`\n\tmargin-top: ${p => p.theme.spacing.s1};\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\n/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { IEvaluateResult } from '@essex/sds-core'\nimport type { IPivotItemProps } from '@fluentui/react'\nimport { Pivot, PivotItem, Spinner, useTheme } from '@fluentui/react'\nimport { FlexContainer } from '@sds/components'\nimport { memo, useEffect, useRef, useState } from 'react'\n\nimport { CsvTable } from '~components/CsvTable'\nimport { HumanReadableSummary } from '~components/HumanReadableSummary'\nimport type { ICsvContent } from '~models'\nimport { defaultCsvContent } from '~models'\n\nimport { DataEvaluation } from '../DataEvaluation/index.js'\nimport {\n\tuseGetAndSetEvaluateResult,\n\tuseGetAndSetSyntheticCsvContent,\n\tuseSyntheticTableCommands,\n} from './DataSynthesisResult.hooks.js'\nimport { StyledItem } from './DataSynthesisResult.styles.js'\nimport type { DataSynthesisResultProps } from './DataSynthesisResult.types.js'\n\nexport const DataSynthesisResult: React.FC<DataSynthesisResultProps> = memo(\n\tfunction DataSynthesisResult({ selectedSynthesis }) {\n\t\tconst theme = useTheme()\n\t\tconst isMounted = useRef(true)\n\t\tconst [isLoading, setIsLoading] = useState(false)\n\t\tconst [evaluateResult, setEvaluateResult] =\n\t\t\tuseState<IEvaluateResult | null>(null)\n\t\tconst [syntheticCsvContent, setSyntheticCsvContent] =\n\t\t\tuseState<ICsvContent | null>(null)\n\t\tconst [lastHeader, setLastHeader] = useState<\n\t\t\t{ props: IPivotItemProps } | undefined\n\t\t>(undefined)\n\t\tconst [joinMultiValueColumns, setJoinMultiValueColumns] = useState(false)\n\t\tconst tableCommands = useSyntheticTableCommands(\n\t\t\tsyntheticCsvContent || defaultCsvContent,\n\t\t\tjoinMultiValueColumns,\n\t\t\tsetJoinMultiValueColumns,\n\t\t)\n\t\tconst getAndSetSyntheticCsvData = useGetAndSetSyntheticCsvContent(\n\t\t\tsetSyntheticCsvContent,\n\t\t\tisMounted,\n\t\t)\n\t\tconst getAndSetEvaluateResult = useGetAndSetEvaluateResult(\n\t\t\tsetEvaluateResult,\n\t\t\tisMounted,\n\t\t)\n\n\t\tuseEffect(() => {\n\t\t\tasync function loadData() {\n\t\t\t\tsetIsLoading(true)\n\t\t\t\tawait Promise.all([\n\t\t\t\t\tgetAndSetSyntheticCsvData(selectedSynthesis, joinMultiValueColumns),\n\t\t\t\t\tgetAndSetEvaluateResult(selectedSynthesis),\n\t\t\t\t])\n\t\t\t\tif (isMounted.current) {\n\t\t\t\t\tsetIsLoading(false)\n\t\t\t\t}\n\t\t\t}\n\t\t\tloadData()\n\t\t}, [\n\t\t\tselectedSynthesis,\n\t\t\tjoinMultiValueColumns,\n\t\t\tgetAndSetSyntheticCsvData,\n\t\t\tgetAndSetEvaluateResult,\n\t\t])\n\n\t\tuseEffect(() => {\n\t\t\treturn () => {\n\t\t\t\tisMounted.current = false\n\t\t\t}\n\t\t}, [])\n\n\t\treturn (\n\t\t\t<FlexContainer vertical>\n\t\t\t\t{isLoading ? (\n\t\t\t\t\t<Spinner />\n\t\t\t\t) : (\n\t\t\t\t\tevaluateResult && (\n\t\t\t\t\t\t<FlexContainer vertical gap={theme.spacing.m}>\n\t\t\t\t\t\t\t<Pivot\n\t\t\t\t\t\t\t\tonLinkClick={setLastHeader}\n\t\t\t\t\t\t\t\tselectedKey={lastHeader?.props.itemKey}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<PivotItem\n\t\t\t\t\t\t\t\t\theaderText=\"Evaluation summary\"\n\t\t\t\t\t\t\t\t\titemKey=\"Evaluation summary\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<StyledItem>\n\t\t\t\t\t\t\t\t\t\t<HumanReadableSummary\n\t\t\t\t\t\t\t\t\t\t\tevaluateResult={evaluateResult}\n\t\t\t\t\t\t\t\t\t\t\tsynthesisInfo={selectedSynthesis}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</StyledItem>\n\t\t\t\t\t\t\t\t</PivotItem>\n\t\t\t\t\t\t\t\t<PivotItem\n\t\t\t\t\t\t\t\t\theaderText=\"Advanced evaluation\"\n\t\t\t\t\t\t\t\t\titemKey=\"Advanced evaluation\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<StyledItem>\n\t\t\t\t\t\t\t\t\t\t<DataEvaluation selectedSynthesis={selectedSynthesis} />\n\t\t\t\t\t\t\t\t\t</StyledItem>\n\t\t\t\t\t\t\t\t</PivotItem>\n\t\t\t\t\t\t\t\t{syntheticCsvContent && (\n\t\t\t\t\t\t\t\t\t<PivotItem\n\t\t\t\t\t\t\t\t\t\theaderText=\"Synthetic data\"\n\t\t\t\t\t\t\t\t\t\titemKey=\"Synthetic data\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<StyledItem>\n\t\t\t\t\t\t\t\t\t\t\t<CsvTable\n\t\t\t\t\t\t\t\t\t\t\t\tcontent={syntheticCsvContent}\n\t\t\t\t\t\t\t\t\t\t\t\tcommands={tableCommands}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</StyledItem>\n\t\t\t\t\t\t\t\t\t</PivotItem>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Pivot>\n\t\t\t\t\t\t</FlexContainer>\n\t\t\t\t\t)\n\t\t\t\t)}\n\t\t\t</FlexContainer>\n\t\t)\n\t},\n)\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { IInputNumberByLength, IMultiValueColumns } from '@essex/sds-core'\nimport { useCallback } from 'react'\n\nimport type { ICsvContent, IRawSynthesisParameters } from '~models'\nimport {\n\tAccuracyMode,\n\tFabricationMode,\n\tOversamplingType,\n\tUseSyntheticCounts,\n} from '~models'\nimport { useSdsManagerInstance, useSensitiveContentValue } from '~states'\nimport { usableHeaders, usableMultiValueColumns } from '~utils'\nimport type {\n\tIAggregateSeededSynthesisParameters,\n\tIDpSynthesisParameters,\n\tISynthesisParameters,\n\tIValueSeededSynthesisParameters,\n} from '~workers/types'\nimport { SynthesisMode } from '~workers/types'\n\nexport function generateContextKey(params: IRawSynthesisParameters): string {\n\tswitch (params.synthesisMode) {\n\t\tcase SynthesisMode.Unseeded:\n\t\tcase SynthesisMode.RowSeeded:\n\t\t\treturn `K-Anonymity ${params.synthesisMode} (RecordLimit=${params.recordLimit}, PrivacyResolution=${params.resolution}, AggregationLimit=${params.reportingLength})`\n\t\tcase SynthesisMode.ValueSeeded:\n\t\t\treturn (\n\t\t\t\t`K-Anonymity ${params.synthesisMode} (RecordLimit=${params.recordLimit}, PrivacyResolution=${params.resolution}, AggregationLimit=${params.reportingLength}, Oversampling=${params.oversamplingType}` +\n\t\t\t\t(params.oversamplingType === OversamplingType.Unlimited\n\t\t\t\t\t? ')'\n\t\t\t\t\t: `, OversamplingRatio=${params.oversamplingRatio}, OversamplingTries=${params.oversamplingTries})`)\n\t\t\t)\n\t\tcase SynthesisMode.AggregateSeeded:\n\t\t\treturn `K-Anonymity ${params.synthesisMode} (RecordLimit=${params.recordLimit}, PrivacyResolution=${params.resolution}, AggregationLimit=${params.reportingLength}, UseSyntheticCounts=${params.aggregateSeededUseSyntheticCounts}, WeightSelectionPercentile=${params.weightSelectionPercentile})`\n\t\tcase SynthesisMode.DP:\n\t\t\treturn `Differential Privacy (RecordLimit=${\n\t\t\t\tparams.recordLimit\n\t\t\t}, PrivacyResolution=${params.resolution}, AggregationLimit=${\n\t\t\t\tparams.reportingLength\n\t\t\t}, UseSyntheticCounts=${\n\t\t\t\tparams.dpAggregateSeededUseSyntheticCounts\n\t\t\t}, WeightSelectionPercentile=${\n\t\t\t\tparams.weightSelectionPercentile\n\t\t\t}, Percentile=${params.percentilePercentage}, PercentileEpsilonProp=${\n\t\t\t\tparams.percentileEpsilonProportion\n\t\t\t}, NumberOfRecordsEpsilonProportion=${\n\t\t\t\tparams.numberOfRecordsEpsilonProportion\n\t\t\t}, Epsilon=${params.noiseEpsilon}, DeltaFactor=${\n\t\t\t\tparams.deltaFactor\n\t\t\t}, FabricationMode=(${params.fabricationMode}, [${Object.values(\n\t\t\t\tparams.threshold,\n\t\t\t).join(',')}]), AccuracyMode=${params.accuracyMode})`\n\t}\n}\n\nfunction generateSigmaProportions(\n\treportingLength: number,\n\taccuracyMode: AccuracyMode,\n): number[] {\n\tconst sigmaProportions: number[] = []\n\n\tfor (let i = 0; i < reportingLength; i++) {\n\t\tlet p\n\t\tswitch (accuracyMode) {\n\t\t\tcase AccuracyMode.Balanced:\n\t\t\t\tp = 1.0\n\t\t\t\tbreak\n\t\t\tcase AccuracyMode.PrioritizeLongCombinations:\n\t\t\t\tp = 1.0 / (i + 1)\n\t\t\t\tbreak\n\t\t\tcase AccuracyMode.PrioritizeShortCombinations:\n\t\t\t\tp = 1.0 / (reportingLength - i)\n\t\t\t\tbreak\n\t\t}\n\t\tsigmaProportions.push(p)\n\t}\n\treturn sigmaProportions\n}\n\nfunction generateNoisyThresholdValuesByLen(\n\tfabricationMode: FabricationMode,\n\tthreshold: IInputNumberByLength,\n\treportingLength: number,\n): IInputNumberByLength {\n\tlet ret = {}\n\n\tswitch (fabricationMode) {\n\t\tcase FabricationMode.Balanced:\n\t\t\tif (reportingLength >= 2) {\n\t\t\t\tret[2] = 0.55\n\t\t\t\tfor (let i = 3; i <= reportingLength; ++i) {\n\t\t\t\t\tret[i] = 1.0\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak\n\t\tcase FabricationMode.Progressive:\n\t\t\tif (reportingLength === 2) {\n\t\t\t\tret[2] = 0.1\n\t\t\t} else {\n\t\t\t\tconst ratio = 0.9 / (reportingLength - 2)\n\t\t\t\tfor (let i = 2; i <= reportingLength; ++i) {\n\t\t\t\t\tret[i] = Math.min(0.1 + ratio * (i - 2), 1.0)\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak\n\t\tcase FabricationMode.Minimize:\n\t\t\tfor (let i = 2; i <= reportingLength; ++i) {\n\t\t\t\tret[i] = 0.01\n\t\t\t}\n\t\t\tbreak\n\t\tcase FabricationMode.Uncontrolled:\n\t\t\tfor (let i = 2; i <= reportingLength; ++i) {\n\t\t\t\tret[i] = 1.0\n\t\t\t}\n\t\t\tbreak\n\t\tcase FabricationMode.Custom:\n\t\t\tret = threshold\n\t\t\tbreak\n\t}\n\treturn ret\n}\n\nfunction convertRawToSynthesisParameters(\n\trawParams: IRawSynthesisParameters,\n\tuseColumns: string[],\n\tmultiValueColumns: IMultiValueColumns,\n\tsensitiveCsvContent: ICsvContent,\n): ISynthesisParameters {\n\tlet ret: ISynthesisParameters = {\n\t\tmode: rawParams.synthesisMode,\n\t\tcsvDataParameters: {\n\t\t\tdelimiter: sensitiveCsvContent.delimiter,\n\t\t\tsubjectId: sensitiveCsvContent.subjectId,\n\t\t\tuseColumns,\n\t\t\tsensitiveZeros: sensitiveCsvContent.headers\n\t\t\t\t.filter(h => h.hasSensitiveZeros)\n\t\t\t\t.map(h => h.name),\n\t\t\tmultiValueColumns,\n\t\t\trecordLimit: rawParams.recordLimit,\n\t\t},\n\t\tbaseSynthesisParameters: {\n\t\t\tresolution: rawParams.resolution,\n\t\t\tcacheMaxSize: rawParams.cacheSize,\n\t\t\temptyValue: '',\n\t\t},\n\t\treportingLength: rawParams.reportingLength,\n\t}\n\n\tswitch (rawParams.synthesisMode) {\n\t\tcase SynthesisMode.Unseeded:\n\t\t\tbreak\n\t\tcase SynthesisMode.RowSeeded:\n\t\t\tbreak\n\t\tcase SynthesisMode.ValueSeeded:\n\t\t\tret = {\n\t\t\t\t...ret,\n\t\t\t\toversampling:\n\t\t\t\t\trawParams.oversamplingType === OversamplingType.Controlled\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\toversamplingRatio: rawParams.oversamplingRatio,\n\t\t\t\t\t\t\t\toversamplingTries: rawParams.oversamplingTries,\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: undefined,\n\t\t\t} as IValueSeededSynthesisParameters\n\t\t\tbreak\n\t\tcase SynthesisMode.AggregateSeeded:\n\t\t\tret = {\n\t\t\t\t...ret,\n\t\t\t\tuseSyntheticCounts:\n\t\t\t\t\trawParams.aggregateSeededUseSyntheticCounts ===\n\t\t\t\t\tUseSyntheticCounts.Yes,\n\t\t\t\tweightSelectionPercentile: rawParams.weightSelectionPercentile,\n\t\t\t} as IAggregateSeededSynthesisParameters\n\t\t\tbreak\n\t\tcase SynthesisMode.DP: {\n\t\t\tconst deltaFactor =\n\t\t\t\trawParams.deltaFactor === 0 && rawParams.recordLimit > 0\n\t\t\t\t\t? Math.log(rawParams.recordLimit)\n\t\t\t\t\t: rawParams.deltaFactor\n\n\t\t\tret = {\n\t\t\t\t...ret,\n\t\t\t\tdpParameters: {\n\t\t\t\t\tepsilon: rawParams.noiseEpsilon,\n\t\t\t\t\tdelta:\n\t\t\t\t\t\trawParams.recordLimit > 0\n\t\t\t\t\t\t\t? 1.0 / (deltaFactor * rawParams.recordLimit)\n\t\t\t\t\t\t\t: 0.0,\n\t\t\t\t\tpercentilePercentage: rawParams.percentilePercentage,\n\t\t\t\t\tpercentileEpsilonProportion: rawParams.percentileEpsilonProportion,\n\t\t\t\t\tnumberOfRecordsEpsilonProportion:\n\t\t\t\t\t\trawParams.numberOfRecordsEpsilonProportion,\n\t\t\t\t\tsigmaProportions: generateSigmaProportions(\n\t\t\t\t\t\trawParams.reportingLength,\n\t\t\t\t\t\trawParams.accuracyMode,\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t\tnoiseThreshold: {\n\t\t\t\t\ttype: 'Adaptive',\n\t\t\t\t\tvaluesByLen: generateNoisyThresholdValuesByLen(\n\t\t\t\t\t\trawParams.fabricationMode,\n\t\t\t\t\t\trawParams.threshold,\n\t\t\t\t\t\trawParams.reportingLength,\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t\tuseSyntheticCounts:\n\t\t\t\t\trawParams.dpAggregateSeededUseSyntheticCounts ===\n\t\t\t\t\tUseSyntheticCounts.Yes,\n\t\t\t\tweightSelectionPercentile: rawParams.weightSelectionPercentile,\n\t\t\t} as IDpSynthesisParameters\n\t\t\tbreak\n\t\t}\n\t}\n\treturn ret\n}\n\nexport function useOnRunGenerateAndEvaluate(): (\n\trawParams: IRawSynthesisParameters,\n) => Promise<void> {\n\tconst sensitiveContent = useSensitiveContentValue()\n\tconst manager = useSdsManagerInstance()[0]?.instance\n\n\treturn useCallback(\n\t\tasync (rawParams: IRawSynthesisParameters) => {\n\t\t\tconst synthesisParams = convertRawToSynthesisParameters(\n\t\t\t\trawParams,\n\t\t\t\tusableHeaders(sensitiveContent).map(h => h.name),\n\t\t\t\tusableMultiValueColumns(sensitiveContent),\n\t\t\t\tsensitiveContent,\n\t\t\t)\n\n\t\t\tawait manager?.startGenerateAndEvaluate(\n\t\t\t\tgenerateContextKey(rawParams),\n\t\t\t\tsensitiveContent.table.toCSV({ delimiter: sensitiveContent.delimiter }),\n\t\t\t\tsynthesisParams,\n\t\t\t)\n\t\t},\n\t\t[sensitiveContent, manager],\n\t)\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\n\nimport { FlexContainer } from '@sds/components'\nimport styled from 'styled-components'\n\nexport const Container = styled(FlexContainer)`\n\tmargin-top: ${p => p.theme.spacing.s2};\n\tmargin-left: ${p => p.theme.spacing.l1};\n\tmargin-right: ${p => p.theme.spacing.l1};\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { useTheme } from '@fluentui/react'\nimport { memo, useCallback } from 'react'\n\nimport { StatefulAllSynthesisInfo } from '~components/AllSynthesisInfo'\nimport { CollapsablePanel } from '~components/CollapsablePanel/CollapsablePanel'\nimport { useCanRun } from '~pages/hooks'\nimport {\n\tuseGlobalErrorMessage,\n\tuseSelectedSynthesisInfo,\n\tuseSensitiveContentValue,\n} from '~states'\nimport { IWasmSynthesizerWorkerStatus } from '~workers/types'\n\nimport { DataSynthesisParameters } from '../DataSynthesisParameters/index.js'\nimport { DataSynthesisResult } from '../DataSynthesisResult/index.js'\nimport { useOnRunGenerateAndEvaluate } from './DataSynthesis.hooks.js'\nimport { Container } from './DataSynthesis.styles.js'\n\nexport const DataSynthesis: React.FC = memo(function DataSynthesis() {\n\tconst theme = useTheme()\n\tconst canRun = useCanRun()\n\tconst sensitiveContent = useSensitiveContentValue()\n\tconst [selectedSynthesis] = useSelectedSynthesisInfo()\n\tconst [, setGlobalErrorMessage] = useGlobalErrorMessage()\n\n\tconst onRunGenerateAndEvaluate = useOnRunGenerateAndEvaluate()\n\n\tconst onRun = useCallback(\n\t\tasync rawParams => {\n\t\t\ttry {\n\t\t\t\tawait onRunGenerateAndEvaluate(rawParams)\n\t\t\t\tsetGlobalErrorMessage(undefined)\n\t\t\t} catch (err) {\n\t\t\t\tsetGlobalErrorMessage(`${err}`)\n\t\t\t}\n\t\t},\n\t\t[onRunGenerateAndEvaluate, setGlobalErrorMessage],\n\t)\n\n\treturn (\n\t\t<Container vertical gap={theme.spacing.s1}>\n\t\t\t<DataSynthesisParameters\n\t\t\t\tenableRun={canRun}\n\t\t\t\tsensitiveCsvContent={sensitiveContent}\n\t\t\t\tonRun={onRun}\n\t\t\t/>\n\n\t\t\t<CollapsablePanel header={<h3>Results</h3>} defaultCollapsed>\n\t\t\t\t<StatefulAllSynthesisInfo />\n\t\t\t</CollapsablePanel>\n\n\t\t\t{selectedSynthesis?.status === IWasmSynthesizerWorkerStatus.FINISHED && (\n\t\t\t\t<DataSynthesisResult selectedSynthesis={selectedSynthesis} />\n\t\t\t)}\n\t\t</Container>\n\t)\n})\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { FC } from 'react'\nimport { memo } from 'react'\nimport styled from 'styled-components'\n\nimport { PageDescription, Pages } from '~pages'\n\nimport { DataSynthesis } from './DataSynthesis/index.js'\n\nexport const SynthesizePage: FC = memo(function SynthesizePage() {\n\treturn (\n\t\t<Container>\n\t\t\t<PageDescription>{Pages.Synthesize.description}</PageDescription>\n\t\t\t<DataSynthesis />\n\t\t</Container>\n\t)\n})\nSynthesizePage.displayName = 'SynthesizePage'\n\nconst Container = styled.div`\n\theight: 100%;\n\toverflow-y: auto;\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { useCallback } from 'react'\n\n/**\n * onChange handler that only fires if the input is a valid number\n * @param setter\n * @returns\n */\nexport function useSpinButtonOnChange(\n\tsetter: (val: number) => void,\n): (event: React.SyntheticEvent<HTMLElement>, newValue?: string) => void {\n\treturn useCallback(\n\t\t(event, newValue?) => {\n\t\t\tconst val = +(newValue || 0)\n\t\t\tif (!isNaN(val)) {\n\t\t\t\tsetter(val)\n\t\t\t}\n\t\t},\n\t\t[setter],\n\t)\n}\n"],"names":["AggregateType","useRefEffect","callback","initial","createRefCallback","refCallback","value","data","React.useRef","getStyles","memoizeFunction","theme","customStyles","focusInset","focusColor","_a","_b","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","baseButtonStyles","getBaseButtonStyles","baseSplitButtonStyles","getSplitButtonStyles","p","semanticColors","commandButtonHighContrastFocus","commandButtonStyles","getFocusStyle","HighContrastSelector","ButtonGlobalClassNames","__assign","getHighContrastNoAdjustStyle","concatStyleSets","CommandBarButton","_super","__extends","styles","React.createElement","BaseButton","nullRender","__decorate","customizable","React.Component","ResizeGroupDirection","RESIZE_DELAY","getMeasurementCache","measurementsCache","measurement","getNextResizeGroupStateProvider","measurementCache","_measurementCache","_containerDimension","_getMeasuredDimension","measuredData","getElementToMeasureDimension","cachedDimension","measuredDimension","_shrinkContentsUntilTheyFit","onReduceData","dataToMeasure","nextMeasuredData","_growDataUntilItDoesNotFit","onGrowData","_updateContainerDimension","newDimension","fullDimensionData","renderedData","nextState","getNextState","props","currentState","newContainerDimension","shouldRenderDataForMeasurement","getInitialResizeGroupState","MeasuredContext","React.createContext","hiddenDivStyles","hiddenParentStyles","resizeDataReducer","state","action","useResizeState","nextResizeGroupStateProvider","rootRef","initialStateData","useConst","React.useReducer","resizeData","dispatchResizeDataAction","React.useEffect","stateRef","updateResizeState","React.useCallback","remeasure","useResizingBehavior","initialHiddenDiv","updateHiddenDiv","hasRenderedContent","async","useAsync","containerDimension","boundingRect","refToMeasure","measuredBoundingRect","win","useWindow","useOnEvent","dataNeedsMeasuring","isInitialMeasure","measuredContextValue","ResizeGroupBase","React.forwardRef","forwardedRef","mergedRootRef","useMergedRefs","React.useImperativeHandle","className","onRenderData","divProps","getNativeProps","divProperties","ResizeGroup","COMMAND_BAR_HEIGHT","getCommandButtonStyles","rootStyles","labelStyles","root","label","restCustomStyles","__rest","registerPersistedKeytips","keytipsToRegister","keytipManager","registeredPersistedKeytips","_i","keytipsToRegister_1","keytip","uniqueID","unregisterPersistedKeytips","useKeytipRegistrations","prevPersistedKeytips","usePrevious","OverflowButton","KeytipManager","overflowItems","keytipSequences","itemSubMenuProvider","onRenderOverflowButton","persistedKeytips","getSubMenuForItem","item","React.useMemo","newKeytipsToRegister","newOverflowItems","overflowItem","persistedKeytip","newOverflowItem","modifiedOverflowItems","getClassNames","classNamesFunction","COMPONENT_NAME","useComponentRef","divContainer","_forceIntoFirstElement","bypassHiddenElements","focusSucceeded","focusFirstChild","childElement","elementContains","OverflowSetBase","mergedRef","items","vertical","role","overflowSide","onRenderItem","classNames","showOverflow","i","overflowItemStyle","OverflowSet","styled","CommandBarBase","_this","React.createRef","ariaLabel","primaryGroupAriaLabel","farItemsGroupAriaLabel","hasSecondSet","FocusZone","css","FocusZoneDirection","itemText","commandButtonProps","TooltipHost","ButtonAs","CommandBarButtonAs","DefaultButtonAs","Type","composeComponentAs","overflowButtonProps","combinedOverflowItems","__spreadArray","overflowProps","OverflowButtonType","shiftOnReduce","onDataReduced","primaryItems","cacheKey","farItems","movedItem","newData","onDataGrown","minimumOverflowItems","initializeComponentRef","dataDidRender","ResizeGroupAs","commandBarData","nativeProps","overflowSet","ev","overflow","returnKey","acc","current","primaryKey","overflowKey","farKey","CommandBar","observeResize","target","onResize","observer_1","t","onResizeWrapper_1","win_1","getWindow","animationFrameId_1","useOverflow","onOverflowItemsChanged","rtl","pinnedIndex","updateOverflowRef","containerWidthRef","containerRef","container","cleanupObserver","entries","menuButtonRef","menuButton","useIsomorphicLayoutEffect","minContainerWidth","extraWidth","containerWidth","itemOffsetEnd","setOverflowIndex","prevOverflowIndex","overflowIndex","ele","index","cancelAnimationFrame","PivotItem","getTabId","pivotId","itemKey","getLinkItems","result","React.Children","child","isPivotItem","linkText","pivotItemProps","warn","React.isValidElement","PivotBase","ref","focusZoneRef","overflowMenuButtonComponentRef","useId","useControllableValue","selectedKey","setSelectedKey","componentRef","linkSize","linkFormat","overflowBehavior","overflowAriaLabel","focusZoneProps","overflowButtonAs","nameProps","linkCollection","renderLinkContent","link","itemCount","itemIcon","headerText","Icon","renderPivotLink","renderLinkCollection","renderPivotLinkSelectedKey","headerButtonProps","onRenderItemLink","tabId","linkContent","isSelected","contentString","itemSemantics","CommandButton","onLinkClick","onKeyDown","updateSelectedItem","KeyCodes","selectedIndex","renderPivotItem","isActive","selectedTabId","isKeyValid","getSelectedKey","renderedSelectedKey","renderedSelectedIndex","l","overflowMenuProps","DirectionalHint","overflowMenuButtonRef","elements","isOverflowing","getRTL","globalClassNames","getLinkStyles","isLinkInOverflowMenu","fonts","rootIsLarge","rootIsTabs","IsFocusVisibleClassName","AnimationVariables","FontWeights","getGlobalClassNames","normalize","Pivot","download","filename","type","dataURI","downloadTable","table","options","blob","downloadCommand","downloadFilename","merge","useDownloadCommand","content","useMemo","useCanRun","useSensitiveContentValue","isProcessing","useIsProcessingValue","useDropdownOnChange","setter","useCallback","event","getMetricsByCountLabels","metricsByKey","bin","useMetricsByCountLabels","getMetricsByLenLabels","reportingLength","_","useMetricsByLenLabels","useDownloadOnClick","downloadAnchorRef","getDownloadInfo","info","downloadIcon","DownloadButton","onGetDownloadInfo","title","disabled","useRef","useTheme","downloadOnClick","jsxs","Stack","jsx","ActionButton","DownloadAnchor","getMicrodataMetricsItems","stats","aggregateType","precision","emptyValue","tooltips","useMicrodataMetricsItems","MetricsSummaryTable","memo","columns","InfoTooltip","DetailsList","SelectionMode","DetailsListLayoutMode","getMetricsSummaryCsv","microdataMetricItems","delimiter","useOnGetMetricsSummaryCsv","getAnalysisByCountCsv","countLabels","csv","c","useOnGetAnalysisByCountCsv","getAnalysisByLenCsv","lenLabels","useOnGetAnalysisByLenCsv","getAggregatesCsv","manager","contextKey","aggregatesDelimiter","combinationDelimiter","useOnGetAggregatesCsv","useSdsManagerInstance","useOnGetDownloadInfo","getter","alias","DataEvaluationInfoDownloader","onGetAggregatesDownloadInfo","onGetMetricsSummaryDownloadInfo","onGetAnalysisByCountDownloadInfo","onGetAnalysisByLenDownloadInfo","FlexContainer","getSensitiveDataPrivacyText","evaluateResult","synthesisInfo","uniqueRecordsPercentage","rareRecordsPercentage","useSensitiveDataPrivacyText","getAggregateDataUtilityText","SynthesisMode","useAggregateDataUtilityText","getSyntheticDataPrivacyText","distinctCount","prev","curr","leakagePercentage","useSyntheticDataPrivacyText","getSyntheticDataUtilityText","retainedCombinationsPercentage","useSyntheticDataUtilityText","useHumanReadableSummaryItems","sensitiveDataPrivacyText","aggregateDataUtilityText","syntheticDataPrivacyText","syntheticDataUtilityText","getHumanReadableSummaryText","HumanReadableSummary","WrappedText","onRenderRow","DetailsRow","Container","StyledSpinner","Spinner","useSynthesisInfoColumns","onDelete","IWasmSynthesizerWorkerStatus","IconButton","useSynthesisInfoSelection","onSelected","selection","Selection","selectedItems","AllSynthesisInfo","allSynthesisInfo","selectedSynthesisInfo","useEffect","FlexItem","StatefulAllSynthesisInfo","useAllSynthesisInfo","selectedSynthesis","setSelectedSynthesis","useSelectedSynthesisInfo","newSelection","CollapsablePanel","header","children","defaultCollapsed","isCollapsed","setIsCollapsed","useState","TooltipWrapper","tooltip","Label","useNoisyCountThresholdChange","noisyCountThreshold","setRawSynthesisParams","handlers","_event","newValue","val","useFabricationModeOptions","FabricationMode","useOversamplingTypeOptions","OversamplingType","useAccuracyModeOptions","AccuracyMode","useSynthesisModeOptions","DropdownMenuItemType","useUseSyntheticCountOptions","UseSyntheticCounts","useUpdateNoisyCountThreshold","useRawSynthesisParameters","fabricationMode","newValues","defaultThreshold","StyledDropdown","Dropdown","StyledSpinButton","SpinButton","DataSynthesisAdvancedParameters","rawSynthesisParams","oversamplingTypeOptions","useSyntheticCountsOptions","fabricationModeOptions","accuracyModeOptions","handleCacheSizeChange","useSpinButtonOnChange","useRawSynthesisParametersPropertySetter","handleOversamplingTypeChange","handleOversamplingRatioChange","handleOversamplingTriesChange","handleAggregateSeededUseSyntheticCountsChange","handleWeightSelectionPercentileChange","handleDeltaFactorChange","handleDpAggregateSeededUseSyntheticCountsChange","handlePercentilePercentageChange","handlePercentileEpsilonProportionChange","handleNumberOfRecordsEpsilonProportionChange","handleFabricationModeChange","handleNoisyCountThresholdChange","handleAccuracyModeChange","updateNoisyCountThreshold","Position","Fragment","DataSynthesisParameters","enableRun","sensitiveCsvContent","onRun","isAdvancedParametersOpen","openAdvancedParameter","dismissAdvancedParameter","useBoolean","synthesisModeOptions","handleSynthesisModeChange","handleResolutionChange","handleRecordLimitChange","handleReportingLengthChange","handleNoiseEpsilonChange","onRunClicked","PrimaryButton","Panel","fixedBinCount","column","min","max","count","clamped","format","step","fixedBinStep","binner","escape","d","top","ultimate","penultimate","rebinmax","candidate","op","DataType","SortDirection","determineType","isNil","isNaN","isDate","isArray","value1","minExp","getExp","exp","exp1","mantissa","fixed","formatIfNumber","parsed","columnType","values","dataType","SAMPLE_MAX","columnTypes","cur","selected","reqStats","requiredStats","optStats","optionalStats","bins","binning","cats","categories","mode","req","optn","optt","args","filter","filterColumns","name","numeric","binArgs","binRollup","distinct","fillBins","hash","filled","v","limit","counted","a","b","set","filt","array","introspect","detailed","meta","detailedMeta","basicMeta","sts","stat","groupBuilder","row","existingGroups","actualLevel","totalLevelCount","sortDirection","lazyLoadGroups","sortColumn","fatherIndex","valueGroups","columnName","startIndex","group","nextLevel","sortValueGroupsItems","valueGroup","noop","useCellClickhandler","clickable","onColumnClick","useCellDimensions","considerCompactMode","COMPACT_HEIGHT","HEIGHT","useCellDropdownSelectHandler","onOptionSelect","useColumnNamesList","all","visibleColumns","list","getValue","getDropdownValue","rowIndex","itens","uniqueValues","uniqWith","isEqual","orderBy","existing","isDistinctCategories","isEmpty","isString","debounceFn","fn","delay","timer","CELL_LENGTH","TOOLTIP_LENGTH","ArrayCell","textAlign","printed","usePrinted","useTooltip","_jsx","length","arr","BooleanSymbolCell","dimensions","attrs","useBooleanCircleAttrs","useThematic","width","height","BooleanTextCell","useIndexedScale","range","linear","scaleLinear","useNumericLinearScale","extent","useChartSVG","svgRef","useLayoutEffect","select","chart","usePlotGroup","setGroup","g","plotArea","Sparkbar","categorical","color","legend","onBarHover","colors","barWidth","xScale","yScale","themeLine","Sparkline","lineColor","path","line","CategoricalBarCell","CellContainer","onClick","handleColumnClick","cellStyle","style","DateCell","render","React","Case","Default","Else","Fallback","getConditionResult","condition","conditionResult","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","error","_asyncToGenerator","self","err","_extends","source","createCommonjsModule","module","runtime_1","runtime","exports","Op","hasOwn","undefined$1","$Symbol","iteratorSymbol","asyncIteratorSymbol","toStringTagSymbol","define","obj","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","makeInvokeMethod","tryCatch","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","prototype","method","genFun","ctor","AsyncIterator","PromiseImpl","invoke","record","unwrapped","previousPromise","enqueue","callInvokeWithMethodAndArg","iter","doneResult","delegate","delegateResult","maybeInvokeDelegate","pushTryEntry","locs","entry","resetTryEntry","object","keys","next","iterable","iteratorMethod","skipTempReset","rootEntry","rootRecord","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","afterLoc","finallyLoc","tryLoc","thrown","resultName","nextLoc","isFunction","input","hasThen","isThenable","shallowArraysEqual","createCancellablePromise","promise","isCancelled","wrappedPromise","_ref","_callee","res","rej","_context","_x","_x2","useSingleton","dependencies","hasRan","lastDependencies","hasDependencies","hasAnyDependencyChanged","Then","IfAsync","_ref$keepAlive","keepAlive","_useState","isResolved","setIsResolved","_useState2","returnValue","setReturnValue","cancellablePromise","history","hasFallback","hasElse","elseElement","thenElement","If","Switch","_ref2","_matchingCase","matchingCase","defaultCase","DefaultCell","metadata","_jsxs","EmptyCell","TextCell","NumberCell","ObjectCell","COMPACT_LINE_HEIGHT","DefaultColumnHeader","isClickable","isSorted","isSortedDescending","iconName","iconClassName","containerStyle","textStyle","iconStyles","e","CommandBarContainer","renderers","renderer","Command","ArrayDropdownCell","onCellDropdownSelect","placeholderValues","dropdownStyles","FeaturesCell","features","magnitude","useNumberMagnitude","histo","NumberMagnitudeCell","SparkbarCell","SparklineCell","PADDING_HEIGHT","HistogramColumnHeader","useCategories","useLegend","hover","setHover","id1","setId","handleBarHover","id","_Fragment","idx","cat","createRenderSmartCell","SmartCell","createRenderFeaturesCell","createRenderColumnHeader","defaultRender","r","createRenderDefaultColumnHeader","originalProps","handleColumnHeaderClick","fixProps","createRenderStatsColumnHeader","StatsColumnHeader","createRenderCommandBarColumnHeader","createRenderHistogramColumnHeader","original","updated","numberFormat","useFormattedNumber","barColor","textFill","size","HISTO_MAX","DROPDOWN_MAX","SmartArrayCell","cellWidth","histoLength","dist","StatsColumnType","pretty","CELL_HEIGHT","DEFAULT_STATS","cells","st","StatCell","nobins","nice","upperFirst","StripedRow","striped","columnBorders","itemIndex","compact","DEFAULT_COLUMN_WIDTH","DEFAULT_COMMAND_BAR_WIDTH","DEFAULT_COMMAND_BAR_THRESHOLD","useCountMinWidth","commandBar","elementsWidth","command","buttonsWidth","totalWidth","useColumns","computedMetadata","selectedColumn","includeAllColumns","isColumnClickable","isDefaultHeaderClickable","showColumnBorders","isResizable","handleCellClick","handleCellDropdownSelect","colorScale","useIncrementingColumnColorScale","useColumnStyles","names","columnMinWidth","columnMap","reduce","defaults","onRender","headerRenderers","separator","useDetailsHeaderRenderer","useDetailsListStyles","isHeadersFixed","hasColumnClick","isFeatureEnabled","sliceTable","offset","formatNumber","formatter","useIntersection","element","rootMargin","isVisible","setState","observer","GroupHeader","children1","onToggleCollapse","manualToggle","setManualToggle","inViewport","countChildren","total","onManualLevelToggle","shouldLazyLoad","HeaderContainer","LevelButton","HeaderDetailsText","Bold","groupLevel","useGroupHeaderRenderer","groupHeaderFunction","countNumeric","scale","useSlicedTable","useSortedGroups","sort","firstColumn","useSortedTable","isColumnOnTable","col","desc","useSortHandling","allowSorting","onColumnHeaderClick","setSortColumn","setSortDirection","evt","useStripedRowsRenderer","useSubsetTable","tableColumns","existingColumnNames","x","useTableMetadata","discover","saveMetadata","ArqueroDetailsList","isSortable","isStriped","onRenderGroupHeader","onChangeMetadata","selectionMode","layoutMode","version","setVersion","subset","sorted","sliced","groupedEntries","sortedGroups","anyStatsFeatures","onColumnResize","newWidth","displayColumns","headerStyle","renderRow","renderDetailsHeader","renderGroupHeader","groups","DetailsWrapper","ConstrainMode","useColorDefaults","bgColor","useColumnCounts","visible","hidden","useRowCounts","RenameCallout","onSend","onChange","editedName","validateKeyEvent","FocusCallout","TextField","FocusTrapCallout","TableName","onRenameTable","isEditing","setIsEditing","setEditedName","newName","incomingName","H3Editable","H3","ArqueroTableHeader","showRowCount","showColumnCount","farCommandBar","background","foreground","groupCount","columnCounts","rowCounts","Header","Left","Middle","Right","CsvTable","commands","thematic","StyledCommandBar","add_chart","datasets","scales","position","labels","MetricsChart","leftChart","rightChart","Chart","DataEvaluationInfo","microdataMaxStats","chartHeight","chartWidth","useSelectedSynthesisOnChange","setEvaluateResult","isMounted","useAggregateTypeOptions","useMicrodataMaxStatistics","statsList","filteredStats","base","k","FlexCentered","aggregateTypeToStatKey","DataEvaluation","leftEvaluateResult","setLeftEvaluateResult","rightEvaluateResult","setRightEvaluateResult","leftAggregateType","setLeftAggregateType","rightAggregateType","setRightAggregateType","aggregateTypeOptions","leftAggregateTypeOnChange","rightAggregateTypeOnChange","leftStats","rightStats","allFinishedSynthesisInfo","useAllFinishedSynthesisInfo","leftSelectedSynthesis","setLeftSelectedSynthesis","rightSelectedSynthesis","setRightSelectedSynthesis","leftSelectedSynthesisOnChange","rightSelectedSynthesisOnChange","SynthesisDropdown","useGetAndSetSyntheticCsvContent","setSyntheticCsvContent","getSyntheticCsvData","useGetSyntheticCsvContent","joinMultiValueColumns","syntheticCsvData","useGetAndSetEvaluateResult","useSensitiveMultiValueColumns","sensitiveContent","useSensitiveContent","usableMultiValueColumns","useToggleJoinMultiValueColumnsCommand","setJoinMultiValueColumns","multiValueColumns","useSyntheticTableCommands","dlcmd","tjcmd","cmd","StyledItem","DataSynthesisResult","isLoading","setIsLoading","syntheticCsvContent","lastHeader","setLastHeader","tableCommands","defaultCsvContent","getAndSetSyntheticCsvData","getAndSetEvaluateResult","loadData","generateContextKey","params","generateSigmaProportions","accuracyMode","sigmaProportions","generateNoisyThresholdValuesByLen","threshold","ret","ratio","convertRawToSynthesisParameters","rawParams","h","deltaFactor","useOnRunGenerateAndEvaluate","synthesisParams","usableHeaders","DataSynthesis","canRun","setGlobalErrorMessage","useGlobalErrorMessage","onRunGenerateAndEvaluate","SynthesizePage","PageDescription","Pages"],"mappings":"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"}